/**
 * Author: @snandy
 * Date: 2013-3-5 10:48:49
 */
Function.prototype.bindAsEventListener2=function(a,b){var c=this;return function(d){return c.call(a,d||window.event,b)}},~function(window,document){function Dom(){}var Browser=function(a){var b={ie:/msie/.test(a)&&!/opera/.test(a),chrome:/chrome/.test(a)};return b}(navigator.userAgent.toLowerCase());Dom.create=function(a,b,c){var d=document.createElement(a);return b&&(d.className=b),c||(c=document.body),c.appendChild(d),d},Dom.show=function(a){a.style.display="block"},Dom.hide=function(a){a.style.display="none"},Dom.getViewSize=function(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}},Dom.getOffsetRect=function(a){var b={left:0,top:0,width:0,height:0,bottom:0,right:0};return a==document?(a=document.documentElement,b.left=a.scrollLeft,b.top=a.scrollTop,Browser.ie?(b.width=a.offsetWidth,b.height=a.offsetHeight):(b.width=window.innerWidth,b.height=window.innerHeight)):(b.left=a.offsetLeft,b.top=a.offsetTop,a==document.body&&!Browser.ie?(a=document.documentElement,b.width=a.scrollWidth,b.height=a.scrollHeight):(b.width=a.offsetWidth,b.height=a.offsetHeight)),b.bottom=b.top+b.height,b.right=b.left+b.width,b},Dom.getRect=function(a){var b=Dom.getOffsetRect(a),c=a.offsetParent;while(c){var d=Dom.getOffsetRect(c);b.left+=d.left,b.top+=d.top,c=c.offsetParent}return b.bottom=b.top+b.height,b.right=b.left+b.width,b},Dom.setPosition=function(a,b){a.style.left=b.left+"px",a.style.top=b.top+"px"},Dom.showModalDialog=function(a,b,c){var d,e="",f,g;if(Browser.ie){if(c)for(var h=0;h<c.length;h++){var i=c[h][0],j=c[h][1];switch(i){case"width":i="dialogWidth",j+="px";break;case"height":i="dialogHeight",j+="px"}e+=i+":"+j+";"}d=window.showModalDialog(a,b,e)}else{if(c){for(var h=0;h<c.length;h++){var i=c[h][0],j=c[h][1];i==="width"&&(f=screen.width/2-j/2),i==="height"&&(g=screen.height/2-j/2),e+=i+"="+j+","}e+="left="+f+",",e+="top="+g}d=window.open(a,null,e+"modal=yes"),d.dialogArguments=b}return d},Dom.open=function(a,b,c,d){var e,f="";b||(b=null),c||(c=[["modal","yes"]]),d&&(c.push(["location","no"]),c.push(["menubar","no"]),c.push(["toolbar","no"]),c.push(["scrollbars","yes"]),c.push(["resizable","yes"]));for(var g=0;g<c.length;g++)f+=c[g][0]+"="+c[g][1],g!=c.length-1&&(f+=",");return window.openDialogArguments=b,e=window.open(a,null,f),e};var Editor={};Editor.editorWin=!1,Editor.editorObj=!1,Editor.cache=!1,Editor.coder=!1,Editor.selection=!1,Editor.rangeCache=!1,Editor.viewState="view",Editor.Config={},Editor.Config.tool={};var editorConfig=Editor.Config;Editor.init=function(a,b){this.parent=$(a),Editor.initFrame(),Editor.menu=$("menuContainer"),Editor.coder=$("entrycontent"),Editor.coder.value=$("entryDraft").value,Browser.ie==null?(alert("您现在所使用的浏览器不支持此编辑器很多高级功能，建议您采用IE或Firefox！"),Dom.show(Editor.coder),Editor.menu.style.height="0px"):(Browser.ie&&($(b).style.display=""),Editor.container=$("editorContainer"),Editor.txtContainer=$("txtEditorContainer"),Editor.ifrContainer=$("ifrEditorContainer"),Editor.ctContainer=$("cacheToolContainer"),Editor.initElements()),Editor.initCache()},Editor.initCache=function(){Editor.initCacheTool(),Editor.recover(),window.setInterval(Editor.backup,6e4)},Editor.initFrame=function(){this.parent.innerHTML='<div id="cacheToolContainer" style="width:1px;height:1px;"></div><div class="all_container"><div id="menuContainer" class="menu_container"></div><div id="editorContainer" class="editor_container"><div id="txtEditorContainer" class="editor_coder"><textarea id="entrycontent" name="entrycontent" ></textarea></div><div id="ifrEditorContainer" class="editor"></div></div></div>'},Editor.initTools=function(){Editor.controls={};var a=!1,b=editorConfig.tool.data,c=editorConfig.tool.css;for(var d=0;d<b.length;d++){var e=Dom.create("div",c.part,Editor.menu),f=b[d];for(var g=0;g<f.length;g++){Dom.create("div",c.newLine,e);var h=Dom.create("div",c.row,e),i=f[g];for(var j=0;j<i.length;j++){var k=i[j],l=k[0],m=k[1];if(l=="line"){var n="http://js.pp.sohu.com/ppp/blog/styles_v_0909301/images/editor/"+m+".gif",o=Dom.create("div",c.tool,h),p=Dom.create("img",!1,o);p.src=n}else{var q=k[2],r=k[3],s=k[4],t=k[5],u=k[6],o=Dom.create("div",l=="bimg"?c.toolBig:c.tool,h);Editor.controls[m]=o,o.sohu={},o.sohu.id=m,o.sohu.type=l,o.sohu.state=0;if(l=="img"||l=="bimg"){var n="http://js2.pp.sohu.com.cn/ppp/blog/styles_v_100314/images/editor/"+m+".gif",p=Dom.create("img",!1,o);p.src=n,p.title=q,o.sohu.tool=p}else{var v=m+"Select",w=Dom.create("div",m,o);if(Browser.ie){o.sohu.tool=[],o.sohu.tool.selectedIndex=0,o.sohu.tool[0]=Dom.create("div",v,w),o.sohu.tool[0].sohuValue=null;var x,y;m=="fontname"?(x=editorConfig.lister.fontNameData.text,y=editorConfig.lister.fontNameData.value,o.sohu.tool[0].innerHTML="字体"):(x=editorConfig.lister.fontSizeData.text,y=editorConfig.lister.fontSizeData.value,o.sohu.tool[0].innerHTML="字号");for(var d=0;d<x.length;d++){var z=Dom.create("div",v,w);z.style.display="none",z.innerHTML=x[d],z.sohuValue=y[d].toString(),o.sohu.tool[d+1]=z}}else a=!0,o.sohu.tool=Dom.create("div",v,w)}o.sohu.downCall=r,s?(o.sohu.upCall=s,t&&(o.sohu.selectCall=t),u&&(o.sohu.cancelCall=u)):o.sohu.upCall=r,Event.observe(o,"mouseover",Editor.toolMouseOver.bind(Editor,o)),Event.observe(o,"mouseout",Editor.toolMouseOut.bind(Editor,o)),Event.observe(o,"mousedown",Editor.toolMouseDown.bind(Editor,o)),Event.observe(o,"mouseup",Editor.toolMouseUp.bindAsEventListener2(Editor,o))}}}a&&(a=!1,d+=4)}},Editor.initElements=function(){var a=editorConfig.tool.css;Dom.show(Editor.coder),Dom.hide(Editor.txtContainer),Editor.initTools(),Editor.menu.onselectstart=function(){return!1},window.sohu={},Editor.ifrContainer.innerHTML='<div class="editor_bg"><div class="editor_bg_on"></div><div class="editor_margin_on"></div><iframe frameborder="0"></iframe><div class="editor_margin_below"></div><div class="editor_bg_down"></div></div>',Editor.editorObj=Editor.ifrContainer.firstChild.childNodes[2],Editor.editorWin=Editor.editorObj.contentWindow,Editor.editorObj.style.height="330px",Editor.coder.style.height="330px";var b=Editor.editorWin.document;b.open();var c="";c+="<html>",c+="<head>",c+='<meta http-equiv="Content-Type" content="text/html; charset=gbk" />',c+="<style> *{line-height:160%;}body{font-size:14px;line-height:130%;font-family:'宋体',Verdana,Arial,Helvetica,sans-serif;}img{border:0;}p{margin:5px 0;}</style>",c+="</head>",c+="<body>",Browser.ie||(c+=Editor.coder.value==""?"":Editor.coder.value),c+="</body>",c+="</html>",b.write(c),b.close(),Browser.ie?(Editor.iCache=Dom.create("iframe",a.cache,Editor.ifrContainer),Editor.iCacheDoc=Editor.iCache.contentWindow.document,Editor.iCacheDoc.open(),Editor.iCacheDoc.write("<html><head><style>body{font-family:'宋体';}</style></head><body></body></html>"),Editor.iCacheDoc.close(),b.body.contentEditable=!0,Event.observe(Editor.editorWin.document.body,"beforedeactivate",Editor.cacheRange),Event.observe(Editor.getDocument().body,"paste",Editor.shortcutPaste),Event.observe(Editor.editorWin.document,"selectionchange",Editor.checkAllState),Editor.pasteHTML(Editor.coder.value==""?"":Editor.coder.value)):(Editor.disableSpecialTool(),Editor.bindLoadFF()),Event.observe(window,"beforeunload",Editor.delBackup.bind(this)),Editor.cache=Dom.create("div",a.cache,document.body);var d=Dom.create("div",editorConfig.tool.css.footer,Editor.container);d.innerHTML='<span style="float:left;margin-left:10px;"><a href="javascript:void(0)"><img align="absmiddle" src="http://js1.pp.sohu.com.cn/ppp/blog/styles_v_0909301/images/editor/ico_plus.gif" title="增大窗口" /></a>&nbsp;<a href="javascript:void(0)"><img align="absmiddle" src="http://js1.pp.sohu.com.cn/ppp/blog/styles_v_0909301/images/editor/ico_minus.gif" title="减小窗口" /></a></span><span style="float:right;margin-right:10px;""><input type="checkbox"/>显示源代码</span>',Editor.wideAreaControler=d.firstChild.firstChild,Editor.narrowAreaControler=d.firstChild.lastChild,Editor.viewControler=d.lastChild.firstChild,this.setAble(Editor.narrowAreaControler,!1),this.setOpacity(Editor.narrowAreaControler.firstChild,.3),Event.observe(Editor.wideAreaControler,"click",this.setArea.bind(this,!0)),Event.observe(Editor.narrowAreaControler,"click",this.setArea.bind(this,!1)),Event.observe(Editor.viewControler,"click",this.setView.bind(this)),Event.observe(Editor.editorWin.document,"keypress",Editor._e_keyPress.bindAsEventListener2(Editor))},Editor.setArea=function(a){var b=parseInt(Editor.editorObj.style.height),c=100;a?b<630&&(Editor.editorObj.style.height=parseInt(Editor.editorObj.style.height)+c+"px",Editor.coder.style.height=parseInt(Editor.coder.style.height)+c+"px",b=parseInt(Editor.editorObj.style.height),b==630&&(this.setAble(Editor.wideAreaControler,!1),this.setOpacity(Editor.wideAreaControler.firstChild,.3))):b>330&&(Editor.editorObj.style.height=parseInt(Editor.editorObj.style.height)-c+"px",Editor.coder.style.height=parseInt(Editor.coder.style.height)-c+"px",b=parseInt(Editor.editorObj.style.height),b==330&&(this.setAble(Editor.narrowAreaControler,!1),this.setOpacity(Editor.narrowAreaControler.firstChild,.3))),b>330&&(this.setAble(Editor.narrowAreaControler,!0),this.setOpacity(Editor.narrowAreaControler.firstChild,1)),b<630&&(this.setAble(Editor.wideAreaControler,!0),this.setOpacity(Editor.wideAreaControler.firstChild,1))},Editor.setAble=function(a,b){b?a.disabled="":a.disabled="disabled"},Editor.setOpacity=function(a,b){a.style.filter="Alpha(Opacity="+b*100+")",a.style.MozOpacity=b},Editor.disableSpecialTool=function(){Editor.setState(Editor.controls.cut,-3),Editor.setState(Editor.controls.copy,-3),Editor.setState(Editor.controls.paste,-3),Editor.controls.cut.sohu.tool.title="提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + C]！",Editor.controls.copy.sohu.tool.title="提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + X]！",Editor.controls.paste.sohu.tool.title="提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + V]！"},Editor.bindLoadFF=function(){Editor.setDesignMode(!0),Event.observe(Editor.editorWin.document.body,"mouseup",Editor.checkAllState),Event.observe(Editor.editorWin.document,"keypress",Editor.checkAllState)},Editor.setContent=function(){Editor.txtContainer.style.display=="none"||Editor.coder.style.display=="none"?Editor.coder.value=Editor._bindEntryStyle():(Editor.editorWin.document.body.innerHTML=Editor.coder.value,Editor.coder.value=Editor.editorWin.document.body.innerHTML)},Editor._bindEntryStyle=function(){var a=Editor.editorWin.document.body.childNodes,b=null;for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.nodeType&&e.nodeType==1){if(b){b=null;break}b=e}}var f=Editor.editorWin.document.body.innerHTML;return!b||b.tagName.toLowerCase()!="div"||b.style.lineHeight!="160%"||b.style.fontSize!="14px"?(f=['<div style="line-height:160%;font-size:14px;">',f,"</div>"],f.join("")):f},Editor.preview=function(){var a=$F("entrytitle");if(a==""){alert("请填写日志标题"),$("entrytitle").focus();return}a=a.convertTextToHTML(),Editor.setContent();var b=$F(Editor.coder);if(b.length<1){alert("请填写日志内容");return}var c=[],d={win:window,title:a,content:b};Dom.open("/editor/support/preview.html",d,c,!0)},Editor.checkAllState=function(){if(!Editor.isChecking){Editor.isChecking=!0,Editor.stateArray||(Editor.stateChecking=!0,Browser.ie?Editor.stateArray=["Paste","Cut","Copy","FontName","FontSize","Bold","Italic","Underline","JustifyLeft","InsertOrderedList","InsertUnorderedList","Undo"]:Editor.stateArray=["fontname","fontsize","bold","italic","underline","justifyleft","insertorderedlist","insertunorderedlist"]);try{var a=Editor.editorWin.document;if(a){var b=0;for(b=0;b<Editor.stateArray.length;b++)Editor.checkCommandState(Editor.stateArray[b],a)}}catch(c){}finally{Editor.isChecking=!1}}},Editor.checkCommandState=function(a,b){var c=!1,d=a.toLowerCase(),e=Editor.controls[d];d=="insertorderedlist"?e=Editor.controls.orderlist:d=="insertunorderedlist"&&(e=Editor.controls.unorderlist);switch(d){case"cut":case"copy":case"paste":c=b.queryCommandEnabled(a),c?Editor.setState(e,0):Editor.setState(e,-3);break;case"fontname":case"fontsize":c=b.queryCommandValue(a);if(Browser.ie){var f=e.sohu.tool,g=f.selectedIndex;if(f[g].sohuValue!=c){var h=0,i=!1;if(c!=null)for(h=1;h<f.length;h++)f[h].sohuValue==c&&(i=!0,f.selectedIndex=h);i||(f.selectedIndex=0),f.selectedIndex!=g&&(f[g].style.display="none",f[f.selectedIndex].style.display="")}}else{if(d=="fontname")if(c=="")c="字体";else{c=c.replace(/'/g,"");var j=c.indexOf(",");j>0&&(c=c.substr(0,j)),j=c.indexOf("_"),j>0&&(c=c.substr(0,j))}else if(c=="")c="字号";else{var h=0,i=!1,k=editorConfig.lister.fontSizeData.value;for(h=0;h<k.length;h++)if(k[h]==c){c=editorConfig.lister.fontSizeData.text[h],i=!0;break}i||(c="字号")}e.sohu.tool.innerHTML=c}break;case"justifyleft":case"justifycenter":case"justifyright":var l=0,m=0,n=0;Browser.ie?(l=b.queryCommandState("JustifyLeft")?-2:0,m=b.queryCommandState("JustifyCenter")?-2:0,n=b.queryCommandState("JustifyRight")?-2:0):(c=b.queryCommandValue(a),c=="left"&&(l=-2),c=="center"&&(m=-2),c=="right"&&(n=-2)),Editor.setState(Editor.controls.justifyleft,l),Editor.setState(Editor.controls.justifycenter,m),Editor.setState(Editor.controls.justifyright,n);break;case"undo":c=Editor.editorWin.document.queryCommandEnabled(a),c?Editor.setState(e,0):Editor.setState(e,-3);break;default:c=b.queryCommandState(a),c?Editor.setState(e,-2):Editor.setState(e,0)}return c},Editor.command=function(a,b){var c=!1;if(Editor.isView()){Editor.checkRange();if(b&&b=="#"&&Browser.ie)Editor.removeColor(a);else try{Browser.ie||(a=a.toLowerCase()),Editor.editorWin.document.execCommand(a,!1,b),Browser.ie||Editor.editorWin.focus()}catch(d){}}return c},Editor.getText=function(){var a=Editor.getRange();return a&&(Editor.selection.type.toLowerCase()=="control"?html=a.item(0).innerHTML:html=a.text,html||(html="")),html},Editor.removeColor=function(a){var b=Editor.getText();if(b.length>0){var c=Editor.getSpecialElement("font",!0);c&&c.innerHTML==b&&(a=="ForeColor"?c.color="":c.style.backgroundColor="")}else Editor.editorWin.document.execCommand(a,!1,"#")},Editor.undo=function(){return Editor.command("Undo",1),-1},Editor.setState=function(a,b,c){a||(a=Editor.controls[c]);if(a){a.sohu.state=b;if(a.sohu.type!="select"){var d=a.sohu.type=="bimg"?"Big":"";switch(b){case 1:a.className=editorConfig.tool.css["toolOver"+d];break;case 0:a.className=editorConfig.tool.css["tool"+d];break;case-1:case-2:a.className=editorConfig.tool.css["toolDown"+d];break;case-3:a.className=editorConfig.tool.css["toolDisable"+d]}}}},Editor.toolMouseOver=function(a){Editor.isView()&&a.sohu.state==0&&Editor.setState(a,1)},Editor.toolMouseOut=function(a){Editor.isView()&&(a.sohu.state==1||a.sohu.state==-1)&&Editor.setState(a,0)},Editor.toolMouseDown=function(a){Editor.isView()&&a.sohu.state!=-3&&(Lister.now&&(!a.sohu.lister||a.sohu.lister!=Lister.now)&&Lister.now.cancel(!1),a.sohu.state!=-1&&a.sohu.state!=-2&&Editor.setState(a,-1))},Editor.toolMouseUp=function(a,b){if(Editor.isView()&&b.sohu.state!=-3){var c=1;b.sohu.state==-1&&(c=b.sohu.downCall.call(Editor)),b.sohu.state==-2&&(c=b.sohu.upCall.call(Editor)),Editor.setState(b,c),Event.stop(a),Editor.checkAllState()}},Editor.blankUpCall=function(){return 0},Editor.blankCall=function(a){if(typeof a!="undefined")return a},Editor.normalCancelCall=function(a,b){var c=0;b&&(c=b),Editor.setState(null,c,a)},Editor.showFontNameList=function(){var a=Editor.controls.fontname;return a.sohu.lister||(a.sohu.lister=new Lister(a,editorConfig.lister.fontNameData,1,editorConfig.lister.option)),a.sohu.lister.show(),-2},Editor.hideFontNameList=function(){var a=Editor.controls.fontname;return a.sohu.lister&&a.sohu.lister.cancel(!1),1},Editor.setFontName=function(a){a&&Editor.command("FontName",a),Editor.setState(null,0,"fontname")},Editor.cancelFontName=function(){Editor.setState(null,0,"fontname")},Editor.showFontName=function(a,b){var c=Editor.controls.fontname.sohu.tool,d="字体";if(a)d=a;else if(b){var e=0,f=editorConfig.lister.fontNameData;for(e=0;e<f.value.length;e++)f.value[e]==b&&(d=f.text[e])}c.innerHTML=d},Editor.showFontSizeList=function(){var a=Editor.controls.fontsize;return a.sohu.lister||(a.sohu.lister=new Lister(a,editorConfig.lister.fontSizeData,1,editorConfig.lister.option)),a.sohu.lister.show(),-2},Editor.hideFontSizeList=function(){var a=Editor.controls.fontsize;return a.sohu.lister&&a.sohu.lister.cancel(!1),1},Editor.setFontSize=function(a){a&&Editor.command("FontSize",a),Editor.setState(null,0,"fontname")},Editor.cancelFontSize=function(){Editor.setState(null,0,"fontsize")},Editor.showFontSize=function(a,b){var c=Editor.controls.fontsize.sohu.tool,d="字号";if(a)d=a;else if(b){var e=0,f=editorConfig.lister.fontSizeData;for(e=0;e<f.value.length;e++)f.value[e]==b&&(d=f.text[e])}c.innerHTML=d},Editor.showForeColorList=function(){var a=Editor.controls.forecolor;return a.sohu.lister||(a.sohu.lister=new Lister(a,editorConfig.lister.colorData,6,editorConfig.lister.option)),a.sohu.lister.show(),-2},Editor.hideForeColorList=function(){var a=Editor.controls.forecolor;return a.sohu.lister&&a.sohu.lister.cancel(!1),1},Editor.setForeColor=function(a){a&&Editor.command("ForeColor",a),Editor.setState(null,0,"forecolor")},Editor.cancelForeColor=function(){Editor.setState(null,0,"forecolor")},Editor.showBackColorList=function(){var a=Editor.controls.backcolor;return a.sohu.lister||(a.sohu.lister=new Lister(a,editorConfig.lister.colorData,6,editorConfig.lister.option)),a.sohu.lister.show(),-2},Editor.hideBackColorList=function(){var a=Editor.controls.backcolor;return a.sohu.lister&&a.sohu.lister.cancel(!1),1},Editor.setBackColor=function(a,b){a&&(Browser.ie?Editor.command("BackColor",a):Editor.command("hilitecolor",a)),Editor.setState(null,0,"backcolor")},Editor.cancelBackColor=function(){Editor.setState(null,0,"backcolor")},Editor.getDocument=function(){return Editor.editorWin.document},Editor.setDesignMode=function(a){Editor.getDocument().designMode=a?"On":"Off"},Editor.canEdit=function(){return Editor.viewState!="changing"},Editor.isView=function(){return Editor.viewState=="view"},Editor.showBrow=function(){var a=Editor.controls.emot;if(!a.sohu.lister){var b={init:function(a,b){Emote.init({parent:a,output:"url",callback:function(a,c){b('<img src="'+a+'" title="'+c+'"/>')},matrix:{20:[11,6],42:[6,4]},stat:"editor"})},type:"function"};a.sohu.lister=new Lister(a,b,8,editorConfig.lister.option)}return a.sohu.lister.show(),-2},Editor.hideBrow=function(){var a=Editor.controls.emot;return a.sohu.lister&&a.sohu.lister.cancel(!1),1},Editor.addBrow=function(a){if(a){var b="&nbsp;"+a+"&nbsp;";Editor.pasteHTML(b)}Editor.setState(null,0,"emot")},Editor.cancelBrowCall=function(){Editor.setState(null,0,"emot")},Editor.fastPasteHTML=function(a){if(Browser.ie){var b=Editor.editorWin.document.selection.createRange();b&&b.pasteHTML(a)}else{var b=Editor.editorWin.document;b.execCommand("inserthtml",null,a)}},Editor.pasteHTML=function(a){var b=!1;if(Editor.isView()){var c=Editor.getRange();if(c){if(Browser.ie){var d=Editor.selection.type.toLowerCase();if(d=="control"){var e=Editor.editorWin.document.body.createTextRange();e.moveToElementText(c.item(0)),c=e}c.pasteHTML(a),c.select()}else Browser.chrome?Editor.chromePasteHTML(a):Editor.command("inserthtml",a);b=!0}else alert("发生错误，请重新操作！")}return b},Editor.chromePasteHTML=function(a){var b=Editor.editorWin,c=b.document,d,e;if(b.getSelection){d=b.getSelection(),d.rangeCount||Editor.focusContent();if(d.getRangeAt&&d.rangeCount){e=d.getRangeAt(0),e.deleteContents();var f=c.createElement("div");f.innerHTML=a;var g=c.createDocumentFragment(),h,i;while(h=f.firstChild)i=g.appendChild(h);e.insertNode(g),i&&(e=e.cloneRange(),e.setStartAfter(i),e.collapse(!0),d.removeAllRanges(),d.addRange(e))}}},Editor.getClipboardData=function(){Editor.iCacheDoc.body.innerHTML="",Editor.iCacheDoc.body.createTextRange().execCommand("Paste");var a=Editor.iCacheDoc.body.innerHTML;return Editor.iCacheDoc.body.innerHTML="",a},Editor.clearFromWord=function(a){return a=a.replace(/<\/?SPAN[^>]*>/gi,""),a=a.replace(/<(\w[^>]*) class=([^ |>]*)([^>]*)/gi,"<$1$3"),a=a.replace(/<(\w[^>]*) style="([^"]*)"([^>]*)/gi,"<$1$3"),a=a.replace(/<(\w[^>]*) lang=([^ |>]*)([^>]*)/gi,"<$1$3"),a=a.replace(/<\\?\?xml[^>]*>/gi,""),a=a.replace(/<\/?\w+:[^>]*>/gi,""),a=a.replace(/<\/?\w+:[^>]*>/gi,""),a=a.replace(/<\/?\w+:[^>]*>/gi,""),a},Editor.getSelectedHTML=function(){var a="",b=Editor.getRange();if(b)if(Browser.ie)Editor.selection.type.toLowerCase()=="control"?a=b.item(0).outerHTML:a=b.htmlText,a||(a="");else if(Editor.selection.rangeCount>0){var c=Editor.selection.getRangeAt(0),d=c.cloneContents();Editor.cache.innerHTML="",Editor.cache.appendChild(d),a=Editor.cache.innerHTML,Editor.cache.innerHTML=""}return a},Editor.setBold=function(){var a=Editor.command("Bold")?-2:0;return a},Editor.setItalic=function(){var a=Editor.command("Italic")?-2:0;return a},Editor.setUnderline=function(){var a=Editor.command("Underline")?-2:0;return a},Editor.copy=function(){return Browser.ie?(Editor.command("Copy"),-1):(alert("提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + C]！"),0)},Editor.cut=function(){return Browser.ie?(Editor.command("Cut"),-1):(alert("提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + X]！"),0)},Editor.shortcutPaste=function(){return Editor.paste(),!1},Editor.paste=function(){if(Browser.ie){if(Editor.isView()){var a=Editor.getClipboardData();if(a&&a.length>0){var b=/<\w[^>]* class="?MsoNormal"?/gi;b.test(a)&&confirm("您现在是从word中复制，是否清除其中的格式？\r\n\r\n小提示：清除格式可以使编辑更为方便！")&&(a=Editor.clearFromWord(a)),Editor.pasteHTML(a)}}return-1}return alert("提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + V]！"),0},Editor.setElementJustify=function(a,b){switch(b){case"left":align="FLOAT: left; MARGIN: 0px 10px 10px 0px";break;case"center":align="DISPLAY: block; MARGIN: 0px auto 10px; TEXT-ALIGN: center";break;case"right":align="FLOAT: right; MARGIN: 0px 0px 10px 10px";break;default:align="DISPLAY: block"}a.style.cssText=align},Editor.setLeft=function(){var a=Editor.getSpecialElement(["img","embed"]);return a?Editor.setElementJustify(a,"left"):Editor.command("JustifyLeft"),-1},Editor.setCenter=function(){var a=Editor.getSpecialElement(["img","embed"]);return a?Editor.setElementJustify(a,"center"):Editor.command("JustifyCenter"),-1},Editor.setRight=function(){var a=Editor.getSpecialElement(["img","embed"]);return a?Editor.setElementJustify(a,"right"):Editor.command("JustifyRight"),-1},Editor.setOrder=function(){return Editor.command("InsertOrderedList"),-1},Editor.setUnorder=function(){return Editor.command("InsertUnorderedList"),-1},Editor.setIndent=function(){return Editor.command("Indent"),-1},Editor.setOutdent=function(){return Editor.command("Outdent"),-1},Editor.showLink=function(){var a=Editor.controls.url,b=Editor.getSpecialElement("a",!0);if(!b){var c=Editor.getSelectedHTML();if(c.length<1)return alert("请选择要添加链接的内容！"),0}var d=[["height","260"],["width","560"],["center","yes"]],e={win:window,controler:a,obj:b};return Dom.showModalDialog("/editor/support/link.html",e,d),0},Editor.clearLink=function(){if(Browser.ie)Editor.command("Unlink");else{var a="",b;Browser.ie?b=Editor.getSpecialElement("a",!0):b=Editor.getSpecialElement("a",!1);if(b){a=b.innerHTML;if(!Browser.ie){var c=Editor.editorWin.document.createRange();c.selectNode(b);var d=Editor.editorWin.getSelection();d&&(d.removeAllRanges(),d.addRange(c))}Editor.pasteHTML(a)}}},Editor.cancelLinkCall=function(){Editor.setState(null,0,"url")},Editor.addLink=function(a){if(a){var b="",c=Editor.getSpecialElement("a");c?b=c.innerHTML:b=Editor.getSelectedHTML(),c?(c.href=a.link,c.target=a.target):(b='<a href="'+a.link+'" target="'+a.target+'">'+b+"</a>",Editor.pasteHTML(b))}},Editor.showImg=function(){var a=Editor.controls.simg,b=Editor.getSpecialElement("img",!0),c=[["height","647"],["width","800"],["center","yes"]],d={win:window,controler:a,obj:b};return Dom.showModalDialog("/editor/support/insert_image.html",d,c),0},Editor.showMusic=function(){var a=Editor.controls.smusic,b=Editor.getSpecialElement("img",!0),c=[["height",Browser.chrome?"400":"360"],["width","405"],["center","yes"]],d={win:window,controler:a,obj:b},e=Dom.showModalDialog("/editor/support/insert_music.html",d,c);return 0},Editor.cancelImgCall=function(){Editor.setState(null,0,"simg")},Editor.addImg=function(a){if(a){var b=Editor.getSpecialElement("img",!0),c="";if(a.align)switch(a.align){case"none":c=" ";break;case"left":c="FLOAT: left; MARGIN: 0px 10px 10px 0px";break;case"center":c="DISPLAY: block; MARGIN: 0px auto 10px; TEXT-ALIGN: center";break;case"right":c="FLOAT: right; MARGIN: 0px 0px 10px 10px"}if(b)b.src=a.data[0].url,b.style.cssText=c;else{var d=a.type,e=a.data,f=a.showMemo,g="";c==""&&(c="DISPLAY: block; MARGIN: 0px auto 10px; TEXT-ALIGN: center;");if(d=="imgs"){var h=e.length;for(var i=0;i<h;i++){var j=e[i],k=j.url,l=j.alt?j.alt:"",m=j.link;m&&(g+='<a href="'+m+'" target="_blank">'),g+='<img src="'+k+'" border="0" style="'+c+'" alt="'+l+'" />',m&&(g+="</a>"),f&&(g+='<div style="'+c+'">'+(e[i].alt?e[i].alt:"")+"</div>")}}else{g="<br /><!-- sohublogblock begin -->";if(a.kind==1){g+='<div style="float:left;padding:7px;"><div style="float:left;margin:0 10px 8px 0;width:229px;"><div style="padding:10px;background-color:white;text-align:center"><a href="'+a.link+'" target=_blank><img style="width:200px;" src="'+a.url+'"></a><div style="font-size:12px;color:#333;text-align:left;"><div style="font-weight:bold;padding-top:10px;">'+a.name+'</div><div style="padding-top:10px;">'+a.desc+'</div><div style="text-align:right;padding-top:10px;">'+a.count+"张</div></div></div></div>";var n=e.length;for(var i=0;i<n;i++){var j=e[i];g+='<div style="float:left;margin:2px;text-align:center"><a href="'+j.link+'" target=_blank><img alt="'+j.alt+'" src="'+j.url+'" border=0></a></div>'}g+="</div>"}else if(a.kind==2){g+='<div style="overflow:auto;float:left;background-color:#333;padding:7px;"><div style="float:left;margin:0 10px 8px 0;width:300px;"><div style="padding:10px;background-color:white;text-align:center"><a href="'+a.link+'" target=_blank><img style="width:250px;" src="'+a.url+'"></a><div style="font-size:12px;color: #333;text-align:left";><div style="font-weight:bold;padding-top:10px;">'+a.name+'</div><div style="padding-top:10px;">'+a.desc+'</div><div style="padding-top:10px;text-align:right">'+a.count+"张</div></div></div></div>";var n=e.length;for(var i=0;i<n;i++){var j=e[i];g+='<div style="float:left;margin:0 5px 1px 0;width:150px;height:190px;text-align:center;"><div style="margin:0;width:100%;background-color:white;"><div style="padding:7px;text-align:center;"><a href="'+j.link+'" target=_blank><img src="'+j.url+'" alt="'+j.alt+'"></a><div style="font-size:12px;margin:7px 0 0;overflow:hidden;color:#333;height:28px;text-align:left;line-height:120%;">'+j.alt+"</div></div></div></div>"}g+="</div>"}g+='<div style="clear:both;"></div><!-- sohublogblock end --><br/>'}Editor.pasteHTML(g)}}},Editor.redraw=function(){Editor.editorWin.document.body.style.display="none",Editor.editorWin.document.body.style.display="block"},Editor.showImg2=function(){var a=Editor.controls.simg,b=[["height","647"],["width","800"],["center","yes"]],c={win:window,controler:a};return Dom.showModalDialog("/editor/support/insert_image2.html",c,b),0},Editor.addImg2=function(a){if(a&&a.length>0){var b,c="";for(b=a.length-1;b>=0;b--)c+='<img border="0" style="display:block;text-align:center;margin:0px auto 10px;" src="'+a[b]+'" />';Editor.pasteHTML(c)}},Editor.showMv=function(){var a=Editor.controls.svideo,b=Editor.getSpecialElement("embed",!0),c=[["height","647"],["width","760"],["center","yes"]],d={win:window,controler:a,obj:b};return Dom.showModalDialog("/editor/support/insert_media.html",d,c),0},Editor.cancelMvCall=function(){Editor.setState(null,0,"svideo")},Editor.addMv=function(a){if(!a)return;if(a.type=="net"){var b="",c=Editor.getSpecialElement("embed");switch(a.f_align.toString()){case"none":b="DISPLAY:block";break;case"left":b="FLOAT:left;MARGIN: 0px 10px 10px 0px";break;case"center":b="DISPLAY:block;MARGIN: 0px auto 10px;TEXT-ALIGN:center";break;case"right":b="FLOAT:right;MARGIN: 0px 0px 10px 10px"}var d=a.f_url.substring(a.f_url.lastIndexOf(".")+1).toLowerCase(),e="video";/mp3|wma|wav|mid/.test(d)&&(e="audio");var f="",g="";a.f_width==""?f=e=="audio"?300:480:f=a.f_width,a.f_height==""?g=e=="audio"?45:418:g=a.f_height;if(c){var h=Editor.getRange();c.src=a.f_url,c.style.cssText=b,c.width=f,c.height=g,c.autostart=a.f_autostart=="true"?!0:!1,c.loop=a.f_loop=="true"?!0:!1}else{var i=a.f_autostart,j=a.f_loop,k='<embed style="'+b+'" src="'+a.f_url+'&autoplay=false" width="'+f+'" height="'+g+'"  loop="'+j+'" autostart="'+i+'" />';Editor.pasteHTML(k)}}else if(a.type=="lists"){var b="DISPLAY: block; MARGIN: 0px auto 10px; TEXT-ALIGN: center",k="",l=a.data;for(var m=0;m<l.length;m++)k+='<embed style="'+b+'" src="'+l[m].flash+'&autoplay=false" width="480" height="418" quality="high" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',l[m].title&&(k+='<div style="DISPLAY: block; MARGIN: 0px auto 10px; TEXT-ALIGN: center;"><a href="'+l[m].url+'" target="_blank">'+l[m].title+"</a></div><br />");Editor.pasteHTML(k)}},Editor.setView=function(){if(Editor.viewState!="changing"){var a=Editor.viewState;Editor.viewState="changing";var b=a=="view"?"code":"view";if(a!=b)if(b=="code")Editor.viewControler.checked=!0,Editor.coder.value=Editor.editorWin.document.body.innerHTML,Dom.hide(Editor.ifrContainer),Dom.show(Editor.txtContainer),Editor.menu.style.filter="Alpha(Opacity=30)",Editor.menu.style.MozOpacity="0.3",Editor.coder.focus();else if(b=="view"){Editor.viewControler.checked=!1,Editor.editorWin.document.body.innerHTML=Editor.coder.value,Dom.hide(Editor.txtContainer),Dom.show(Editor.ifrContainer),Editor.menu.style.filter="Alpha(Opacity=100)",Editor.menu.style.MozOpacity="1";if(Browser.ie){var c=Editor.editorWin.document.body.createTextRange();c.setEndPoint("EndToStart",c),c.select()}else Editor.editorWin.document.designMode="on";Editor.editorObj.focus&&Editor.editorObj.focus()}Editor.viewState=b}},Editor.showMap=function(){var a=Editor.controls.map;return a.sohu.lister||(a.sohu.lister=new Lister(a,editorConfig.lister.mapData,6,editorConfig.lister.option)),a.sohu.lister.show(),-2},Editor.hideMap=function(){var a=Editor.controls.map;return a.sohu.lister&&a.sohu.lister.cancel(!1),1},Editor.initMapInput=function(a){a.value="",a.focus()},Editor.checkMapInput=function(a){var b=a.value;if(b!=""){if(Browser.ie){Editor.controls.map.sohu.lister.cancel(!1);var c="http://map.sogou.com/privatemap/?lq="+decodeURIComponent(b)+"&login=auto&appid=1733&redirect=http://blog.sohu.com/editor/support/map.html",d=[["width","800"],["height","600"],["center","yes"]],e=Dom.open(c,null,d);e||alert("您的浏览器阻止了地图操作窗口，请关闭浏览器的阻止弹出窗口选项后继续使用！")}else alert("对不起，您的浏览器不支持此功能！");return 0}alert("请填入搜索关键词！"),a.focus()},Editor.addMap=function(a){Editor.checkRange();var b=a.src,c=a.link,d='<a href="'+c+'" target="_blank"><img title="点击此查看地图" src="'+b+'" style="display: block; margin: 0px auto 10px; text-align: center;" border="0" /></a>';d=decodeURI(d),Editor.pasteHTML(d)},Editor.cancelMapCall=function(){Editor.setState(null,0,"map")},Editor.showArticle=function(){var a=Editor.controls.article,b=[["height","350"],["width","550"],["center","yes"]];Editor.setContent();var c=Editor.coder.value.unescapeHTML();if(c.length<300)alert("对不起，文品测试至少需要300个文字！");else{var d={win:window,controler:a,content:c};Dom.showModalDialog("/editor/support/sogou_article.html",d,b)}return 0},Editor.cancelArticleCall=function(){Editor.setState(null,0,"article")},Editor.addArticle=function(a){a="<br /><!-- sohublogblock begin -->"+a+"<!-- sohublogblock end -->",Editor.pasteHTML(a)},Editor.showRelative=function(){var a=$F("keywords").trim();return a==""?(Editor.setContent(),Editor.coder.value.length<100?Editor.popupRelative(a):(showTipInfo("正在分析您的日志内容，请稍候..."),_requestTag(Editor.popupRelative))):Editor.popupRelative(a),0},Editor.popupRelative=function(a){hideTipInfo();var b=Editor.controls.relative_s,c=[["height","572"],["width","643"],["center","yes"]],d={win:window,controler:b,keywords:a};return Dom.showModalDialog("/editor/support/relative.html",d,c),0},Editor.cancelRelativeCall=function(){Editor.setState(null,0,"relative_s")},Editor.addRelative=function(a,b){b=b||"entry";switch(b){case"entry":var c="日志";break;case"mini":var c="微博";break;default:var c="日志"}var d="";if(a[0].length>0){var e=a[0];d+='<br /><div style="font-weight: bold;">我的相关'+c+"：</div><br />";for(var f=0;f<e.length;f++){var g=e[f].title,h=e[f].url,i=Editor.getDateStr(e[f].time);d+=i+'&nbsp;|&nbsp;<a href="'+h+'" target="_blank" title="'+g+'">'+g+"</a><br />"}d+="<br />"}if(a[1].length>0){var e=a[1];d+='<br /><div style="font-weight: bold;">其他网友的相关'+c+"：</div><br />";for(var f=0;f<e.length;f++){var g=e[f].title,h=e[f].url,i=Editor.getDateStr(e[f].time);d+=i+'&nbsp;|&nbsp;<a href="'+h+'" target="_blank" title="'+g+'">'+g+"</a><br/>"}d+="<br />"}Editor.pasteHTML(d)},Editor.showRelativeMini=function(){var a="";return Editor.popupRelativeMini(a),0},Editor.popupRelativeMini=function(a){hideTipInfo();var b=Editor.controls.relative_mini,c=[["height","572"],["width","643"],["center","yes"]],d={win:window,controler:b,keywords:a};return Dom.showModalDialog("/editor/support/relative_mini.html",d,c),0},Editor.addRelativeMini=function(a,b){var c="",d=[];a[0].length>0?d=a[0]:a[1].length>0&&(d=a[1]),c+='<br /><div style="margin:10px 100px;padding:10px;border:1px solid;"><div style="margin:10px;font-weight:bold;">以下内容来自搜狐微博</div>';for(var e=0;e<d.length;e++)d[e].content&&(c+=d[e].content);c+='<div style="clear:both"></div></div>',Editor.pasteHTML(c)},Editor.cancelRelativeMiniCall=function(){Editor.setState(null,0,"relative_mini")},Editor.getDateStr=function(a){var b=new Date(parseInt(a)),c=b.getMonth()+1;c=(c>9?"":"0")+c;var d=(b.getDate()>9?"":"0")+b.getDate(),e=b.getFullYear()+"-"+c+"-"+d;return e},Editor.focusContent=function(){try{Editor.editorWin.focus()}catch(a){}},Editor.cacheRange=function(){Editor.selection=Editor.editorWin.document.selection,Editor.rangeCache=Editor.selection.createRange()},Editor.checkRange=function(){Editor.rangeCache&&(Editor.editorWin.focus(),Editor.rangeCache.select(),Editor.rangeCache=!1)},Editor.getRange=function(){var a=!1;return Browser.ie?(Editor.editorWin.focus(),Editor.selection=Editor.editorWin.document.selection,a=Editor.selection.createRange()):(Editor.selection=Editor.editorWin.getSelection(),a=Editor.editorWin.document),a},Editor._e_keyPress=function(a){if(a.keyCode!=13)return;window.setTimeout(Editor._afterKeyEnter,0)},Editor._afterKeyEnter=function(){var a=Editor.getElement();if(!!a&&a.tagName)switch(a.tagName.toLowerCase()){case"br":a=a.parentNode;if(!a||!a.tagName||a.tagName.toLowerCase()!="p")return;case"p":var b=a.innerHTML;if(b.length<10){b=b.toLowerCase();if(b==""||b=="<br>"||b=="<br/>"||b=="<br />"||b=="&nbsp;"){var c=a;while(c=c.previousSibling)if(c.nodeType&&c.nodeType==1)break;var d="";if(c&&c.tagName&&c.tagName.toLowerCase()=="p"){var e=c.innerHTML,f=0,g=[];for(;;){var h="&nbsp;";if(e.indexOf(h,f)-f==0){f+=h.length,g.push(h);continue}h=" ";if(e.indexOf(h,f)-f==0){f+=h.length,g.push("&nbsp;");continue}h="　";if(e.indexOf(h,f)-f==0){f+=h.length,g.push(h);continue}break}g.length>0&&(d=g.join(""))}d.length>0&&Editor.pasteHTML(d)}}}},Editor.getElement=function(){var a,b,c;if(Browser.ie){b=Editor.editorWin.document.selection;switch(b.type.toLowerCase()){case"none":case"text":c=b.createRange(),a=c.parentElement();break;case"control":var d=b.createRange();a=d.item(0)}}else b=Editor.editorWin.getSelection(),b.rangeCount>0&&(c=b.getRangeAt(0),c.startContainer==c.endContainer?c.startContainer.nodeType!=3?a=c.startContainer.childNodes[c.startOffset]:a=c.startContainer:a=c.commonAncestorContainer),a&&a.nodeType==3&&(a=a.parentNode);return a},Editor.getSpecialElement=function(a,b){var c=null,d=Editor.getElement();if(d){typeof a=="string"&&(a=[a]);while(d&&d.tagName){for(var e=a.length-1;e>=0;e--)if(a[e]==d.tagName.toLowerCase()){c=d;break}if(c)break;d=d.parentNode}}if(b&&c)if(Browser.ie){Editor.rangeCache=!1;var f=Editor.editorWin.document.body.createTextRange();f.moveToElementText(c),f.select()}else{var g=Editor.editorWin.getSelection();if(g){var f=g.getRangeAt(0);f.selectNode(c),g.removeAllRanges(),g.addRange(f)}}return c},Editor.initCacheTool=function(){var a="",b="http://js3.pp.sohu.com.cn/ppp/blog/styles_ppp/images/cacheWriter.swf",c="callBackFun=Editor.checkCacheTool";Browser.ie?a+='<object id="cacheFlash_ob" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%" align="middle"><param name="allowScriptAccess" value="always" /><param name="movie" value="'+b+'" />'+'<param name="flashvars" value="'+c+'" />'+'<param name="quality" value="high" />'+'<param name="wmode" value="transparent" />'+'<param name="allowFullScreen" value="true" />'+'<embed id="cacheFlash_em" src="'+b+'" flashvars="'+c+'" quality="high" width="100%" height="100%" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />'+"</object>":a+='<embed id="cacheFlash_em" src="'+b+'" flashvars="'+c+'" quality="high"  width="100%" height="100%" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',Editor.ctContainer.innerHTML=a},Editor.checkCacheTool=function(){return Editor.cacheToolReady=!0,!0},Editor.getCacheTool=function(){return Browser.ie?$("cacheFlash_ob"):document.cacheFlash_em},Editor.backup=function(){Editor.setContent(),Editor.coder.value!=""&&Editor.getCacheTool().setCache("entry",Editor.coder.value)},Editor.recover=function(){var a=Editor.getCacheTool();try{var b=a.getCache("entry"),c="";Editor.coder.value==""&&b!=null&&(c=b),!c||Editor.pasteHTML(c)}catch(d){window.setTimeout(Editor.recover,100)}},Editor.delBackup=function(){Editor.getCacheTool().delCache("entry")};var Lister=Class.create();Lister.now=!1,Lister.prototype={initialize:function(a,b,c,d){this.controler=a,this.listData=b,this.colCount=c,this.containerClass=d.containerClass,this.itemClass=b.itemClass?b.itemClass:d.itemClass,this.itemOverClass=b.itemOverClass?b.itemOverClass:d.itemOverClass,this.listData.text||(this.listData.text=this.listData.value),this.clickEventObj=!1,this.visibility=!1,this.initContainer(this.containerClass)},initContainer:function(a){var b=document.createElement("div");b.className=a,b.style.display="none",this.container=b,this.initContent(),document.body.appendChild(this.container)},initContent:function(){switch(this.listData.type){case"auto":for(var a=0;a<this.listData.value.length;a++)a%this.colCount==0&&a>0&&Dom.create("div","newLine",this.container),this.initListItem(a,this.container);break;case"manual":for(var a=0;a<this.listData.value.length;a++)this.initListItem2(a,this.container);break;case"manual2":this.container.innerHTML=this.listData.content;break;case"function":this.listData.init(this.container,this.selectedCall.bind(this))}},initListItem:function(a,b){var c=this.listData.text[a],d=this.listData.value[a],e=this.listData.pattern;c=e.replace(/\$=text\$/ig,c).replace(/\$=value\$/ig,d);var f=Dom.create("div",this.itemClass,b);f.innerHTML=c;var g=this.selectedCall.bind(this,d),h=this.itemMouseOver.bind(this,f),i=this.itemMouseOut.bind(this,f);Event.observe(f,"click",g),Event.observe(f,"mouseover",h),Event.observe(f,"mouseout",i)},initListItem2:function(a,b){var c=this.listData.value[a][0],d=this.listData.value[a][1];if(c){var e=Dom.create("div",this.itemClass,b);e.innerHTML=c;var f=this.selectedCall.bind(this,d),g=this.itemMouseOver.bind(this,e),h=this.itemMouseOut.bind(this,e);Event.observe(e,"click",f),Event.observe(e,"mouseover",g),Event.observe(e,"mouseout",h)}else Dom.create("div","newLine",this.container)},itemMouseOver:function(a){a.className=this.itemOverClass},itemMouseOut:function(a){a.className=this.itemClass},selectedCall:function(a){this.hide(),this.controler.sohu.selectCall.call(Editor,a,this.controler)},cancel:function(a){if(this.visibility){var b=!0;if(typeof a!="boolean"){a=window.event||a;if(a){eventEle=Event.element(a);while(eventEle){if(this.container==eventEle){b=!1;break}eventEle=eventEle.parentElement}}}b&&(this.hide(),this.controler.sohu.cancelCall.call(this.controler))}},show:function(){if(!this.visibility){this.visibility=!0;var rect=Dom.getRect(this.controler),position={left:rect.left,top:rect.bottom};Dom.setPosition(this.container,position),this.clickEventObj=this.cancel.bind(this),Event.observe(document,"mouseup",this.clickEventObj),Event.observe(Editor.editorWin.document,"mouseup",this.clickEventObj),Dom.show(this.container),Lister.now=this,this.listData.init&&eval(this.listData.init)}},hide:function(){Lister.now=!1,this.clickEventObj&&(Event.stopObserving(document,"mouseup",this.clickEventObj),Event.stopObserving(Editor.editorWin.document,"mouseup",this.clickEventObj),this.clickEventObj=!1),this.visibility=!1,Dom.hide(this.container)}},window.Dom=Dom,window.Editor=Editor}(this,this.document),~function(){var a=Editor.Config;a.tool.data=[[[["bimg","paste","粘贴",Editor.paste,Editor.blankUpCall,Editor.blankCall,Editor.normalCancelCall]]],[[["img","cut","剪切",Editor.cut,Editor.blankUpCall,Editor.blankCall,Editor.normalCancelCall]],[["img","copy","复制",Editor.copy,Editor.blankUpCall,Editor.blankCall,Editor.normalCancelCall]]],[[["line","line"]]],[[["select","fontname","字体",Editor.showFontNameList,Editor.hideFontNameList,Editor.setFontName,Editor.cancelFontName],["select","fontsize","字号",Editor.showFontSizeList,Editor.hideFontSizeList,Editor.setFontSize,Editor.cancelFontSize]],[["img","bold","粗体",Editor.setBold,Editor.clearBold],["img","italic","斜体",Editor.setItalic],["img","underline","下划线",Editor.setUnderline],["img","forecolor","文字颜色",Editor.showForeColorList,Editor.hideForeColorList,Editor.setForeColor,Editor.cancelForeColor],["img","backcolor","背景颜色",Editor.showBackColorList,Editor.hideBackColorList,Editor.setBackColor,Editor.cancelBackColor],["img","url","插入超链接",Editor.showLink,Editor.clearLink,Editor.addLink,Editor.cancelLinkCall],["img","emot","插入表情",Editor.showBrow,Editor.hideBrow,Editor.addBrow,Editor.cancelBrowCall]]],[[["line","line"]]],[[["line","line"]]],[[["line","line"]]],[[["line","line"]]],[[["line","line"]]],[[["img","justifyleft","左对齐",Editor.setLeft,Editor.setLeft],["img","justifycenter","居中",Editor.setCenter,Editor.setCenter],["img","justifyright","右对齐",Editor.setRight,Editor.setRight]],[["img","orderlist","数字列表",Editor.setOrder,Editor.setOrder],["img","unorderlist","符号列表",Editor.setUnorder,Editor.setUnorder],["img","indent","增大缩进",Editor.setIndent],["img","outdent","减小缩进",Editor.setOutdent]]],[[["line","line"]]],[[["bimg","relative_mini","插入相关微博",Editor.showRelativeMini,Editor.showRelativeMini,Editor.addRelativeMini,Editor.cancelRelativeMiniCall]]],[[["bimg","relative_s","插入相关博文",Editor.showRelative,Editor.showRelative,Editor.addRelative,Editor.cancelRelativeCall]]],[[["bimg","simg","插入图片",Editor.showImg,Editor.showImg,Editor.addImg,Editor.cancelImgCall]]],[[["bimg","svideo","插入视频",Editor.showMv,Editor.showMv,Editor.addMv,Editor.cancelMvCall]]],[[["bimg","smusic","插入音乐",Editor.showMusic]]],[[["line","line"]]],[[["bimg","undo","撤销上一步操作",Editor.undo,Editor.undo]]]],a.tool.css={row:"tool_row",newLine:"newLine",part:"tool_part",tool:"tool_tool",toolOver:"tool_over",toolDown:"tool_down",toolDisable:"tool_disable",toolBig:"b_tool_tool",toolOverBig:"b_tool_over",toolDownBig:"b_tool_down",toolDisableBig:"b_tool_disable",editor:"editor",cache:"editor_cache",footer:"editor_footer clearfix",coder:"editor_coder2"},a.pager={},a.pager.option={coverClass:"cover",containerClass:"pager",loadingClass:"loading"},a.lister={},a.temp='<div style="width:10px;height:11px;overflow:hidden;background-color:',a.lister.option={containerClass:"lister",itemClass:"listerItem",itemOverClass:"listerItem_over"},a.lister.mapData={type:"manual2",content:'<form action="#" onsubmit="Editor.checkMapInput($(\'editorMapInput\'));return false;"><div style="background:#eee;padding:3px 5px;margin-bottom:2px;"><img src="http://img3.pp.sohu.com/ppp/blog/styles/images/editor/arr.gif" />&nbsp;插入地图</div><div style="width:120px;padding:5px;"><div style="margin-bottom:3px;">请填入地图关键词：</div><div style="margin-bottom:3px;"><input id="editorMapInput" name="editorMapInput" size=16 class="input" /></div><div style="text-align:center;"><input type="submit" value="搜索" class="button" /></div></div></form>',init:"Editor.initMapInput($('editorMapInput'))"},a.lister.fontNameData={type:"auto",pattern:'<div style="float:left;width:130px;text-align:center;font-size:12pt;"><div style="font-family:$=value$">$=text$</div></div>',text:["宋体","黑体","隶书","楷体","幼圆","Arial","Impact","Georgia","Verdana","Courier New","Times New Roman"],value:["宋体","黑体","隶书","楷体_GB2312","幼圆","Arial","Impact","Georgia","Verdana","Courier New","Times New Roman"]},a.lister.fontSizeData={type:"auto",pattern:'<div style="float:left;width:100px;text-align:center;"><div class="fontSizee$=value$" >$=text$</div></div>',text:["初号","一号","二号","三号","四号","五号","六号"],value:[7,6,5,4,3,2,1]},a.lister.colorData={type:"manual",itemClass:"colorItem",itemOverClass:"colorItem_over",value:[['<div style="overflow:hidden;color:#000000;height:15px;width:229px;border:1px solid #dbd8d1;float:left;text-align:center;font-size:13px;margin-bottom:1px;">自动颜色</div>',"#"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#003300;"></div>',"#003300"],[a.temp+'#006600;"></div>',"#006600"],[a.temp+'#009900;"></div>',"#009900"],[a.temp+'#00CC00;"></div>',"#00CC00"],[a.temp+'#00FF00;"></div>',"#00FF00"],[a.temp+'#330000;"></div>',"#330000"],[a.temp+'#333300;"></div>',"#333300"],[a.temp+'#336600;"></div>',"#336600"],[a.temp+'#339900;"></div>',"#339900"],[a.temp+'#33CC00;"></div>',"#33CC00"],[a.temp+'#33FF00;"></div>',"#33FF00"],[a.temp+'#660000;"></div>',"#660000"],[a.temp+'#663300;"></div>',"#663300"],[a.temp+'#666600;"></div>',"#666600"],[a.temp+'#669900;"></div>',"#669900"],[a.temp+'#66CC00;"></div>',"#66CC00"],[a.temp+'#66FF00;"></div>',"#66FF00"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#333333;"></div>',"#333333"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#000033;"></div>',"#000033"],[a.temp+'#003333;"></div>',"#003333"],[a.temp+'#006633;"></div>',"#006633"],[a.temp+'#009933;"></div>',"#009933"],[a.temp+'#00CC33;"></div>',"#00CC33"],[a.temp+'#00FF33;"></div>',"#00FF33"],[a.temp+'#330033;"></div>',"#330033"],[a.temp+'#333333;"></div>',"#333333"],[a.temp+'#336633;"></div>',"#336633"],[a.temp+'#339933;"></div>',"#339933"],[a.temp+'#33CC33;"></div>',"#33CC33"],[a.temp+'#33FF33;"></div>',"#33FF33"],[a.temp+'#660033;"></div>',"#660033"],[a.temp+'#663333;"></div>',"#663333"],[a.temp+'#666633;"></div>',"#666633"],[a.temp+'#669933;"></div>',"#669933"],[a.temp+'#66CC33;"></div>',"#66CC33"],[a.temp+'#66FF33;"></div>',"#66FF33"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#666666;"></div>',"#666666"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#000066;"></div>',"#000066"],[a.temp+'#003366;"></div>',"#003366"],[a.temp+'#006666;"></div>',"#006666"],[a.temp+'#009966;"></div>',"#009966"],[a.temp+'#00CC66;"></div>',"#00CC66"],[a.temp+'#00FF66;"></div>',"#00FF66"],[a.temp+'#330066;"></div>',"#330066"],[a.temp+'#333366;"></div>',"#333366"],[a.temp+'#336666;"></div>',"#336666"],[a.temp+'#339966;"></div>',"#339966"],[a.temp+'#33CC66;"></div>',"#33CC66"],[a.temp+'#33FF66;"></div>',"#33FF66"],[a.temp+'#660066;"></div>',"#660066"],[a.temp+'#663366;"></div>',"#663366"],[a.temp+'#666666;"></div>',"#666666"],[a.temp+'#669966;"></div>',"#669966"],[a.temp+'#66CC66;"></div>',"#66CC66"],[a.temp+'#66FF66;"></div>',"#66FF66"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#999999;"></div>',"#999999"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#000099;"></div>',"#000099"],[a.temp+'#003399;"></div>',"#003399"],[a.temp+'#006699;"></div>',"#006699"],[a.temp+'#009999;"></div>',"#009999"],[a.temp+'#00CC99;"></div>',"#00CC99"],[a.temp+'#00FF99;"></div>',"#00FF99"],[a.temp+'#330099;"></div>',"#330099"],[a.temp+'#333399;"></div>',"#333399"],[a.temp+'#336699;"></div>',"#336699"],[a.temp+'#339999;"></div>',"#339999"],[a.temp+'#33CC99;"></div>',"#33CC99"],[a.temp+'#33FF99;"></div>',"#33FF99"],[a.temp+'#660099;"></div>',"#660099"],[a.temp+'#663399;"></div>',"#663399"],[a.temp+'#666699;"></div>',"#666699"],[a.temp+'#669999;"></div>',"#669999"],[a.temp+'#66CC99;"></div>',"#66CC99"],[a.temp+'#66FF99;"></div>',"#66FF99"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#CCCCCC;"></div>',"#CCCCCC"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#0000CC;"></div>',"#0000CC"],[a.temp+'#0033CC;"></div>',"#0033CC"],[a.temp+'#0066CC;"></div>',"#0066CC"],[a.temp+'#0099CC;"></div>',"#0099CC"],[a.temp+'#00CCCC;"></div>',"#00CCCC"],[a.temp+'#00FFCC;"></div>',"#00FFCC"],[a.temp+'#3300CC;"></div>',"#3300CC"],[a.temp+'#3333CC;"></div>',"#3333CC"],[a.temp+'#3366CC;"></div>',"#3366CC"],[a.temp+'#3399CC;"></div>',"#3399CC"],[a.temp+'#33CCCC;"></div>',"#33CCCC"],[a.temp+'#33FFCC;"></div>',"#33FFCC"],[a.temp+'#6600CC;"></div>',"#6600CC"],[a.temp+'#6633CC;"></div>',"#6633CC"],[a.temp+'#6666CC;"></div>',"#6666CC"],[a.temp+'#6699CC;"></div>',"#6699CC"],[a.temp+'#66CCCC;"></div>',"#66CCCC"],[a.temp+'#66FFCC;"></div>',"#66FFCC"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#FFFFFF;"></div>',"#FFFFFF"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#0000FF;"></div>',"#0000FF"],[a.temp+'#0033FF;"></div>',"#0033FF"],[a.temp+'#0066FF;"></div>',"#0066FF"],[a.temp+'#0099FF;"></div>',"#0099FF"],[a.temp+'#00CCFF;"></div>',"#00CCFF"],[a.temp+'#00FFFF;"></div>',"#00FFFF"],[a.temp+'#3300FF;"></div>',"#3300FF"],[a.temp+'#3333FF;"></div>',"#3333FF"],[a.temp+'#3366FF;"></div>',"#3366FF"],[a.temp+'#3399FF;"></div>',"#3399FF"],[a.temp+'#33CCFF;"></div>',"#33CCFF"],[a.temp+'#33FFFF;"></div>',"#33FFFF"],[a.temp+'#6600FF;"></div>',"#6600FF"],[a.temp+'#6633FF;"></div>',"#6633FF"],[a.temp+'#6666FF;"></div>',"#6666FF"],[a.temp+'#6699FF;"></div>',"#6699FF"],[a.temp+'#66CCFF;"></div>',"#66CCFF"],[a.temp+'#66FFFF;"></div>',"#66FFFF"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#FF0000;"></div>',"#FF0000"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#990000;"></div>',"#990000"],[a.temp+'#993300;"></div>',"#993300"],[a.temp+'#996600;"></div>',"#996600"],[a.temp+'#999900;"></div>',"#999900"],[a.temp+'#99CC00;"></div>',"#99CC00"],[a.temp+'#99FF00;"></div>',"#99FF00"],[a.temp+'#CC0000;"></div>',"#CC0000"],[a.temp+'#CC3300;"></div>',"#CC3300"],[a.temp+'#CC6600;"></div>',"#CC6600"],[a.temp+'#CC9900;"></div>',"#CC9900"],[a.temp+'#CCCC00;"></div>',"#CCCC00"],[a.temp+'#CCFF00;"></div>',"#CCFF00"],[a.temp+'#FF0000;"></div>',"#FF0000"],[a.temp+'#FF3300;"></div>',"#FF3300"],[a.temp+'#FF6600;"></div>',"#FF6600"],[a.temp+'#FF9900;"></div>',"#FF9900"],[a.temp+'#FFCC00;"></div>',"#FFCC00"],[a.temp+'#FFFF00;"></div>',"#FFFF00"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#00FF00;"></div>',"#00FF00"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#990033;"></div>',"#990033"],[a.temp+'#993333;"></div>',"#993333"],[a.temp+'#996633;"></div>',"#996633"],[a.temp+'#999933;"></div>',"#999933"],[a.temp+'#99CC33;"></div>',"#99CC33"],[a.temp+'#99FF33;"></div>',"#99FF33"],[a.temp+'#CC0033;"></div>',"#CC0033"],[a.temp+'#CC3333;"></div>',"#CC3333"],[a.temp+'#CC6633;"></div>',"#CC6633"],[a.temp+'#CC9933;"></div>',"#CC9933"],[a.temp+'#CCCC33;"></div>',"#CCCC33"],[a.temp+'#CCFF33;"></div>',"#CCFF33"],[a.temp+'#FF0033;"></div>',"#FF0033"],[a.temp+'#FF3333;"></div>',"#FF3333"],[a.temp+'#FF6633;"></div>',"#FF6633"],[a.temp+'#FF9933;"></div>',"#FF9933"],[a.temp+'#FFCC33;"></div>',"#FFCC33"],[a.temp+'#FFFF33;"></div>',"#FFFF33"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#0000FF;"></div>',"#0000FF"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#990066;"></div>',"#990066"],[a.temp+'#993366;"></div>',"#993366"],[a.temp+'#996666;"></div>',"#996666"],[a.temp+'#999966;"></div>',"#999966"],[a.temp+'#99CC66;"></div>',"#99CC66"],[a.temp+'#99FF66;"></div>',"#99FF66"],[a.temp+'#CC0066;"></div>',"#CC0066"],[a.temp+'#CC3366;"></div>',"#CC3366"],[a.temp+'#CC6666;"></div>',"#CC6666"],[a.temp+'#CC9966;"></div>',"#CC9966"],[a.temp+'#CCCC66;"></div>',"#CCCC66"],[a.temp+'#CCFF66;"></div>',"#CCFF66"],[a.temp+'#FF0066;"></div>',"#FF0066"],[a.temp+'#FF3366;"></div>',"#FF3366"],[a.temp+'#FF6666;"></div>',"#FF6666"],[a.temp+'#FF9966;"></div>',"#FF9966"],[a.temp+'#FFCC66;"></div>',"#FFCC66"],[a.temp+'#FFFF66;"></div>',"#FFFF66"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#FFFF00;"></div>',"#FFFF00"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#990099;"></div>',"#990099"],[a.temp+'#993399;"></div>',"#993399"],[a.temp+'#996699;"></div>',"#996699"],[a.temp+'#999999;"></div>',"#999999"],[a.temp+'#99CC99;"></div>',"#99CC99"],[a.temp+'#99FF99;"></div>',"#99FF99"],[a.temp+'#CC0099;"></div>',"#CC0099"],[a.temp+'#CC3399;"></div>',"#CC3399"],[a.temp+'#CC6699;"></div>',"#CC6699"],[a.temp+'#CC9999;"></div>',"#CC9999"],[a.temp+'#CCCC99;"></div>',"#CCCC99"],[a.temp+'#CCFF99;"></div>',"#CCFF99"],[a.temp+'#FF0099;"></div>',"#FF0099"],[a.temp+'#FF3399;"></div>',"#FF3399"],[a.temp+'#FF6699;"></div>',"#FF6699"],[a.temp+'#FF9999;"></div>',"#FF9999"],[a.temp+'#FFCC99;"></div>',"#FFCC99"],[a.temp+'#FFFF99;"></div>',"#FFFF99"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#00FFFF;"></div>',"#00FFFF"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#9900CC;"></div>',"#9900CC"],[a.temp+'#9933CC;"></div>',"#9933CC"],[a.temp+'#9966CC;"></div>',"#9966CC"],[a.temp+'#9999CC;"></div>',"#9999CC"],[a.temp+'#99CCCC;"></div>',"#99CCCC"],[a.temp+'#99FFCC;"></div>',"#99FFCC"],[a.temp+'#CC00CC;"></div>',"#CC00CC"],[a.temp+'#CC33CC;"></div>',"#CC33CC"],[a.temp+'#CC66CC;"></div>',"#CC66CC"],[a.temp+'#CC99CC;"></div>',"#CC99CC"],[a.temp+'#CCCCCC;"></div>',"#CCCCCC"],[a.temp+'#CCFFCC;"></div>',"#CCFFCC"],[a.temp+'#FF00CC;"></div>',"#FF00CC"],[a.temp+'#FF33CC;"></div>',"#FF33CC"],[a.temp+'#FF66CC;"></div>',"#FF66CC"],[a.temp+'#FF99CC;"></div>',"#FF99CC"],[a.temp+'#FFCCCC;"></div>',"#FFCCCC"],[a.temp+'#FFFFCC;"></div>',"#FFFFCC"],[!1,!1],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#FF00FF;"></div>',"#FF00FF"],[a.temp+'#000000;"></div>',"#000000"],[a.temp+'#9900FF;"></div>',"#9900FF"],[a.temp+'#9933FF;"></div>',"#9933FF"],[a.temp+'#9966FF;"></div>',"#9966FF"],[a.temp+'#9999FF;"></div>',"#9999FF"],[a.temp+'#99CCFF;"></div>',"#99CCFF"],[a.temp+'#99FFFF;"></div>',"#99FFFF"],[a.temp+'#CC00FF;"></div>',"#CC00FF"],[a.temp+'#CC33FF;"></div>',"#CC33FF"],[a.temp+'#CC66FF;"></div>',"#CC66FF"],[a.temp+'#CC99FF;"></div>',"#CC99FF"],[a.temp+'#CCCCFF;"></div>',"#CCCCFF"],[a.temp+'#CCFFFF;"></div>',"#CCFFFF"],[a.temp+'#FF00FF;"></div>',"#FF00FF"],[a.temp+'#FF33FF;"></div>',"#FF33FF"],[a.temp+'#FF66FF;"></div>',"#FF66FF"],[a.temp+'#FF99FF;"></div>',"#FF99FF"],[a.temp+'#FFCCFF;"></div>',"#FFCCFF"],[a.temp+'#FFFFFF;"></div>',"#FFFFFF"],[!1,!1]]}}()