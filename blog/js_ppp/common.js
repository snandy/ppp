/**
 * Author: @snandy
 * Date: 2013-3-5 10:59:24
 */
function getUserAgent(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("opera")>=0)return"opera";if(a.indexOf("firefox")>=0)return"ff";if(a.indexOf("gecko")>=0)return"moz";if(a.indexOf("msie")){ieVer=parseFloat(a.substr(a.indexOf("msie")+5));if(ieVer>=6)return"ie6";if(ieVer>=5.5)return"ie55";if(ieVer>=5)return"ie5"}return"other"}function timeStamp(){var a=new Date;return a.getTime()}function getFullUrl(a){return a.indexOf("http://")==0||a.indexOf("https://")==0?a:a.indexOf("/")==0?location.protocol+"//"+location.host+a:a.indexOf("www")==0?"http://"+a:location.href.substr(0,location.href.lastIndexOf("/")+1)+a}function isLocalFile(a){var b=/^http:\/\/|ftp:\/\/|(https:\/\/)/;return b.test(a)?a.replace(b,"").substr(0,a.replace(b,"").indexOf("/"))==location.host?!0:!1:!0}function getTureLength(a){if(a==null)return null;var b=/^[\x00-\xff]+$/,c=/[^\x00-\xff]+/g,d=0;for(var e=0;e<a.length;e++){var f=a.charAt(e);b.test(f)?d+=1:d+=2}return d}function getUrlParam(a){var b=unescape(location.search);if(!b)return;b=b.substring(1);var c,d=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","gi");return c=d.exec(b),c?c[2]:null}function getPref(a){var b,c,d=new RegExp("(^||)"+a+"=([^|]*)(||$)","gi");if(getCookie(prefStr)){c=getCookie(prefStr),b=d.exec(c);if(b)return b[2]}return null}function setPref(a,b){var c,d,e,f=new RegExp("(^||)"+a+"=([^|]*)(||$)","gi");getCookie(prefStr)?(d=getCookie(prefStr),c=f.exec(d),c?e=d.replace(c[0],a+"="+b):e=d+"|"+a+"="+b):e=a+"="+b,setCookie(prefStr,e,"never","/","blog.sohu.com")}function getPrefCur(a){var b,c,d=new RegExp("(^||)"+a+"=([^|]*)(||$)","gi");if(getCookie(prefCurStr)){c=getCookie(prefCurStr),b=d.exec(c);if(b)return b[2]}return null}function setPrefCur(a,b){var c,d,e,f=new RegExp("(^||)"+a+"=([^|]*)(||$)","gi");getCookie(prefCurStr)?(d=getCookie(prefCurStr),c=f.exec(d),c?e=d.replace(c[0],a+"="+b):e=d+"|"+a+"="+b):e=a+"="+b,setCookie(prefCurStr,e,"","/","blog.sohu.com")}function isPPLogin(){var a;return typeof PassportSC!="undefined"&&(a=getPPP())?!0:!1}function isLogin(){if(isPPLogin()){var a;return(a=getP())&&a==getPPP()&&hasBlog()?!0:!1}return!1}function getProduct(a){return a?typeof PassportSC=="undefined"||!PassportSC?!1:((!PassportSC.cookie||!PassportSC.cookie.service)&&PassportSC.parsePassportCookie(),PassportSC.cookie.service[a]!=0?PassportSC.cookie.service[a]:!1):!1}function hasBlog(){(!BlogCookieInfo.cookie||!BlogCookieInfo.cookie.I)&&BlogCookieInfo.parseCookie();var a=BlogCookieInfo.cookie.I;return a!=null&&a!=""&&a!="null"?a:!1}function getPPP(){if(typeof PassportSC!="undefined"&&PassportSC&&PassportSC.cookieHandle){var a=PassportSC.cookieHandle();return a.indexOf("@focus.cn")>0&&(a=PassportSC.cookie.uid+"@focus.cn"),a}return""}function getP(){(!BlogCookieInfo.cookie||!BlogCookieInfo.cookie.P)&&BlogCookieInfo.parseCookie();var a=BlogCookieInfo.cookie.P,b="";if(a){try{b=b64_decodex(a),b.indexOf("@")<0&&(b="")}catch(c){}return b}return""}function getXP(){return(!BlogCookieInfo.cookie||!BlogCookieInfo.cookie.ud)&&BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.P}function getD(){return(!BlogCookieInfo.cookie||!BlogCookieInfo.cookie.ud)&&BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.ud}function isMyBlog(){return(!BlogCookieInfo.cookie||!BlogCookieInfo.cookie.I)&&BlogCookieInfo.parseCookie(),isLogin()&&hasBlog()&&typeof _ebi!="undefined"&&_ebi&&BlogCookieInfo.cookie.I==_ebi?!0:!1}function getUserType(){return(!BlogCookieInfo.cookie||!BlogCookieInfo.cookie.B_TP)&&BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.B_TP}function getUserName(){return(!BlogCookieInfo.cookie||!BlogCookieInfo.cookie.name)&&BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.name}function getUserIco(){return(!BlogCookieInfo.cookie||!BlogCookieInfo.cookie.ico)&&BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.ico}function is17173User(){return getP()&&getP().indexOf("@17173")>0}function getBlogTitle(){return $("blogTitle")?$("blogTitle").lastChild.innerHTML:null}function getBlogLink(){return $("blogTitle")?$("blogTitle").lastChild.href:null}function getBlogDesc(){return $("blogDesc")?$("blogDesc").innerHTML:null}function loginPath(){return"http://blog.sohu.com/login/logon.do?bru="+encodeURIComponent(location.href)}function addToFav(a){addToFavFrom=a;if(!(!a||a.sign!="profileWidget"&&a.sign!="entryProfile")){checkBlogPM(a);return}var b=getBlogTitle(),c=getBlogDesc(),d=getBlogLink();if(!b||!d){alert("无法获得此站点相应数据");return}ToolBar&&ToolBar.disableBtn(ToolBar.addLink),a&&(a.sign=="profileWidget"||a.sign=="entryProfile")&&Effect.Appear(a.obj,{from:1,to:.2,duration:.1,queue:{scope:"addFav",position:"end"}}),LoadBar.show("读取中...");var e="/manage/link.do",f="m=add&title="+escape(b)+"&desc="+escape(c.substr(0,64)||"")+"&link="+escape(d)+"&subscribe=1",g=new Ajax.Request(e,{method:"post",parameters:f,onComplete:doneAddToFav,data:a})}function doneAddToFav(a,b,c){location.reload()}function checkBlogPM(a){var b=jQuery,c="i-addfriendDis",d=b(a.obj);if(d.hasClass(c)){alert("您已跟随过了");return}var e="/a/app/friend/friend/add.do?",f="xpt="+window._xpt+"&appid=1001";jQuery.getJSON(e+f,function(b){b&&b.data&&(b.code==1?(a.friendId=b.data.friendId,d.addClass(c),addToFavNew(a)):alert(b.msg))})}function addToFavNew(a){var b=FavWin._instance;if(!!b)return;b=new FavWin,FavWin._instance=b;var c={friendId:a.friendId,fnOk:function(){var a=$("addFriendForm"),c=a.groups,d="",e="http://i.sohu.com/a/app/friend/update/group/mapping.do";for(var f=0;f<c.length;f++)c[f].checked&&(d+=c[f].value+",");var g="?friendId="+this.friendId+"&groupIds="+d,h={friendId:this.friendId,groupIds:d};d.length>1&&(d=d.substring(0,d.length-1)),jQuery.getJSON(e+g+"&callback=?",function(a){a.code==0?(b.hide(),doneAddToFav()):alert(a.msg)})}};b.show(c),setFriendGroups()}function setFriendGroups(){var a="/a/app/friend/group/getgroups.do";jQuery.getJSON(a,function(a){if(a&&a.code==1){var b=a.data.groups,c="";for(var d=0;d<b.length;d++)c+='<label class="chkbox"><input type="checkbox" name="groups" value="'+b[d].groupId+'">'+b[d].groupName+"</label>";$("addFrindGroupsCtner")&&$("addFrindGroupsCtner").insert(c)}})}function highLightMsg(a){if(!$(a))return;var b=$(a);b.style.borderColor="#29aba3"}function highLightErr(a){if(!$(a))return;var b=$(a);b.style.borderColor="red"}function lowLightMsg(a){if(!$(a))return;var b=$(a);b.style.borderColor="#ccc"}function flashMsg(a){if(!$(a))return;var b=$(a);setTimeout(function(){highLightMsg(b)},0),setTimeout(function(){lowLightMsg(b)},50),setTimeout(function(){highLightMsg(b)},150),setTimeout(function(){lowLightMsg(b)},200),setTimeout(function(){highLightMsg(b)},300),setTimeout(function(){lowLightMsg(b)},350),setTimeout(function(){highLightMsg(b)},450),setTimeout(function(){lowLightMsg(b)},1500)}function flashErr(a){if(!$(a))return;var b=$(a);setTimeout(function(){highLightErr(b)},0),setTimeout(function(){lowLightMsg(b)},50),setTimeout(function(){highLightErr(b)},150),setTimeout(function(){lowLightMsg(b)},200),setTimeout(function(){highLightErr(b)},300),setTimeout(function(){lowLightMsg(b)},350),setTimeout(function(){highLightErr(b)},450),setTimeout(function(){lowLightMsg(b)},1500)}function checkLogonForm(a){return $F("username").length<=0?(alert("请填写用户名"),$("username").focus(),!1):$F("passwd").length<=0?(alert("请填写密码"),$("passwd").focus(),!1):($("reme")&&$F("reme")>=1?(setCookie("username",$F("username"),"never","/","blog.sohu.com"),setCookie("domain",$F("maildomain"),"never","/","blog.sohu.com"),setCookie("rememberme","true","never","/","sohu.com")):(setCookie("username","","never","/","blog.sohu.com"),setCookie("domain","","never","/","blog.sohu.com"),setCookie("rememberme","false","never","/","sohu.com")),$("loginid").value=$F("username")+$F("maildomain"),setParm(a),a.Submit.disabled="disabled",$("submitInfo").style.visibility="visible",!0)}function setLogonForm(){$("username").value=getCookie("username")||"";for(var a=0;a<$("maildomain").options.length;a++)if($("maildomain").options[a].value==getCookie("domain")){$("maildomain").options[a].selected=!0;break}getCookie("rememberme")=="true"&&($("reme").checked=!0,$("passwd").select(),$("passwd").focus())}function getLogonForm(){var a='<form action="http://passport.sohu.com/login.jsp" method="post" target="_top" name="form_login" id="form_login" onsubmit="return checkLogonForm(this)"><input type="hidden" name="loginid" id="loginid" value="" /><table width="100%" border="0" cellspacing="2" cellpadding="0"><tr><td nowrap="nowrap"><label for="username" class="redfont">用户名</label></td><td><input name="username" type="text" class="text" id="username" value="" /> <select name="maildomain" id="maildomain" class="text"><option value="@sohu.com" selected="selected">@sohu.com</option><option value="@chinaren.com">@chinaren.com</option><option value="@vip.sohu.com">@vip.sohu.com</option><option value="@sms.sohu.com">@sms.sohu.com</option><option value="@sol.sohu.com">@sol.sohu.com</option><option value="@sogou.com">@sogou.com</option><option value="@17173.com">17173用户</option></select></td></tr><tr><td nowrap="nowrap"><label for="passwd" class="redfont">密　码</label></td><td><input name="passwd" type="password" class="text" id="passwd" value="" /></td></tr><tr><td></td><td><input name="Submit" id="Submit" type="submit" class="button-submit" value=" 登  录 " />你是新人吗？<a href="/login/reg.do">立刻申请</a><br /><span class="notice" id="submitInfo" style="visibility: hidden">正在登录，请稍候……</span></td></tr><tr><td colspan="2"><label for="save"><input name="reme" type="checkbox" id="reme" value="1" />记住我的登录状态(在公共计算机上请慎用此功能)</label></td></tr></table></form>';return a}function initHead(){new App.EditableText($("blogTitle"),{defaultValue:"搜狐博客",maxLenght:12,editStyle:"editableText",onChange:response}),new App.EditableText($("blogDesc"),{type:"area",defaultValue:"每个人都有属于自己的一片森林，迷失的人迷失了，相逢的人会再相逢。",maxLenght:100,editStyle:"editableArea",onChange:response})}function insertMngOpr(){if(!isMyBlog())return;if(getUserType()==3)return;if(!$("mngOpr"))return;var a=$("mngOpr"),b="";window.location.href.indexOf("/entry/")!=-1&&(b+='<a href="http://blog.sohu.com/manage/entry.do?m=add&t=shortcut" class="navNewEntry" onmousedown="CA.q(\'blog_nav_newEntry\');" target="_blank">撰写新日志</a>'),b+=' <a href="http://blog.sohu.com/manage/main.do?tracker=myblog" class="navSysOpt" onmousedown="CA.q(\'blog_myHome\');">进入我的搜狐</a>',a.innerHTML||(a.innerHTML=b)}function gotoBlog(){window.open("http://blog.sohu.com/manage/main.do","blogWin")}function gotoPP(){window.open("http://pp.sohu.com/passport","ppWin")}function gotoMusic(){window.open("http://mbox.sogou.com/mbox.so","musicWin")}function gotoVideo(){window.open("http://v.blog.sohu.com/passport","videoWin")}function getPageText(a,b,c,d,e,f){a=$(a);if(!a)return;e==0&&(e=1);var g=Math.ceil(c/d);g=g||1;var h="";h+="共"+g+"页",h+="&nbsp;&nbsp;|&nbsp;&nbsp;",e==b?(h+="第一页",h+="&nbsp;",h+="上一页"):(h+='<a href="javascript:void(0)" onclick="'+f+"("+b+');return false;">第一页</a>',h+="&nbsp;",h+='<a href="javascript:void(0)" onclick="'+f+"("+(e-1)+');return false;">上一页</a>'),h+="&nbsp;";for(var i=b;i<=g;i++)if(i==e)h+=i,h+="&nbsp;";else if(i>=e-5&&i<=e+5)h+='<a href="javascript:void(0)" onclick="'+f+"("+i+');return false;">['+i+"]</a>",h+="&nbsp;";else if(i==e-6||i==e+6)h+="...&nbsp;";e==g?(h+="下一页",h+="&nbsp;",h+="最末页"):(h+='<a href="javascript:void(0)" onclick="'+f+"("+(e+1)+');return false;">下一页</a>',h+="&nbsp;",h+='<a href="javascript:void(0)" onclick="'+f+"("+g+');return false;">最末页</a>'),a.innerHTML=h}function chageEntryPage(a){return curPage=a||0,getEntryList(curPage,category,tag),getPageText(pageTextContainer,startPage,totalCount,itemPerPage,curPage,chagePageAction),!1}function chageRecmdEntryPage(a){return curPage=a||0,getEntryList(curPage,category,tag,"recmd"),getPageText(pageTextContainer,startPage,totalCount,itemPerPage,curPage,chagePageAction),!1}function getEntryList(a,b,c,d){a>0&&LoadBar.show("读取中..."),d=d||"frag";var e="/action/v_"+d+"-ebi_"+escape(_ebi);a>1&&(e+="-pg_"+a),b>0&&(e+="-c_"+b),e+="/entry/";var f="";c&&(f+="tag="+escape(c)),isMyBlog()&&(f+=f?"&o=true":"o=true");if($("entryList"))var g=new Ajax.Updater("entryList",e,{method:"get",parameters:f,onComplete:entryLoaded})}function entryLoaded(){setTimeout(LoadBar.hide,500),jumpAnchor&&setTimeout(function(){location.hash="#entry"},600),jumpAnchor=!0,Entries.insertItemOpr(),Entries.insertItemReadCount(),Entries.insertItemCmtCount(jQuery("#entryList")[0])}function getConDataUrl(a){return"http://act.blog.sohu.com/blog-contri/cata/con_"+a+".js"}function showBlogStat(){function b(){if(_blog_domain){var a="http://stat.pic.sohu.com/blogcount?u="+_blog_domain+"&t=json&t="+(new Date).getTime();new Groj(a,{variable:"rctVisitCount",onSuccess:function(){$("statusCount")&&window.rctVisitCount&&($("statusCount").innerHTML="",$("statusCount").innerHTML="访问："+window.rctVisitCount)}})}else $("statusCount").innerHTML=""}var a="/action/ebi_"+_ebi+"-m_view-type_statsnocomments/widget/";new Ajax.Request(a,{method:"get",parameters:"",onComplete:function(a){if(a.status==200){var c=a.responseText;$("sideBlogStat").innerHTML=c,$("statusCount").innerHTML="访问：数据加载中",b()}}})}function getCommontList2(a){var b="http://i.sohu.com/a/app/discuss/indexBlogList.htm?_input_encode=UTF-8",c="blog_"+entryId+"_0_"+_upt,d=a||1,e=10;b+="&ids="+c,b+="&page="+d,b+="&sz="+e,jQuery.getJSON(b+"&callback=?",function(a){if(!a||!a.discusss||!a.discusss.length)return;commentListEl||(commentListEl=$("commentlist")),commentListEl.innerHTML="",Comments.list(a);var b=1,c=a.discusscount;getPageText(pageTextContainer,b,c,e,d,chagePageAction),setTimeout(Comments.insertCmtOpr.bind(Comments),10)})}function getCommontList(a,b,c,d){b>0&&LoadBar.show("读取中..."),b=b||1;var e="/action/m_list-id_"+a+"-cc_"+c+"-pg_"+b+"/comment/",f="";d&&(f="nc=true");if($("commentlist"))var g=new Ajax.Updater("commentlist",e,{method:"get",parameters:f,onComplete:commontLoaded})}function commontLoaded(){setTimeout(LoadBar.hide,500),jumpAnchor&&setTimeout(function(){location.hash="#comment"},600),jumpAnchor=!0,setTimeout(Comments.insertCmtOpr.bind(Comments),10),setTimeout(Comments.insertIconInfo.bind(Comments),10),setTimeout(Comments.initCandleMen.bind(Comments),10)}function chagePage(a){return curPage=a||0,typeof blogId=="undefined"?getCommontList(entryId,curPage,totalCount,noCache):getCommontList2(curPage),!1}function isOwnBlog(){var a=Base64.encode(PassportSC.cookieHandle());return typeof _upt!="undefined"&&_upt==a?!0:!1}function commonLogin(a,b){a=a||"";if(!jQuery.ppDialog)return;jQuery.ppDialog({appId:"1001",title:"想要发表您的观点吗，马上登录吧！",onLogin:function(){if(isOwnBlog()){location.reload();return}b&&b(),a&&(location.href.indexOf(a)<0&&(location.href=location.href+a),location.reload())}})}function setCPShow(){var a=jQuery,b=a("#commentForm")[0];isPPLogin()||(b.innerHTML='由于最近广告泛滥，暂只允许登录用户对此文评论。<a href="javascript://">登录</a>'),a("a",b).click(function(){commonLogin("#commentbox")})}function checkCForm(){var a=$F("commentContent");if(a.length==0)return alert("评论内容不能为空"),$("commentContent").focus(),!1;if(a.length>300)return alert("评论内容过多，最多为300字"),$("commentContent").focus(),!1;var b="http://i.sohu.com/a/app/discuss/save.htm?_input_encode=UTF-8",c=jQuery("[name=replytopassport]").val(),d=jQuery("[name=replytodiscussid]").val(),e={from:"oldBlog",appid:"blog",discusstype:"0",content:a,itemid:entryId};c!==""&&a.substr(0,3)=="回复@"&&(e.replytopassport=c,e.replytodiscussid=d),jQuery.getJSON(b+"&callback=?",e,function(a){if(a.code==0){chagePage();var b=$("commentContent");b&&(b.value="",b.focus())}else alert(a.msg||"评论失败，请稍后再试")})}function getFilterEmotionText(a){return a=a||"",a=a.replace(/ec\=(\"|)([^\"\s]*)(\"|)/g,"> $2 <"),a=a.replace(/\<[^\<\>]*\>/g,""),a=a.replace(/ +/g," "),a=a.replace(/\n+/g,"\n"),a=a.replace(/^\n*/gm,""),a=a.replace(/^\s*/gm,""),a=a.replace(/\n*$/gm,""),a=a.replace(/\s*$/gm,""),a}function getMessageList(a,b){a>0&&LoadBar.show("读取中..."),a=a||1;var c="/action/ebi_"+_ebi+"-pg_"+a+"-v_frag/message/",d="";b&&(d="o=true");if($("messagelist"))var e=new Ajax.Updater("messagelist",c,{method:"get",parameters:d,onComplete:messageLoaded})}function messageLoaded(){setTimeout(LoadBar.hide,500),jumpAnchor&&setTimeout(function(){location.hash="#top"},600),jumpAnchor=!0,setTimeout(Message.insertMsgOpr.bind(Message),10),setTimeout(Message.insertMsgReplyOpr.bind(Message),10),setTimeout(Comments.insertIconInfo.bind(Comments),10),setTimeout(Comments.initCandleMen.bind(Comments),10)}function chageMsgPage(a){return curPage=a||0,getMessageList(curPage,noCache),getPageText(pageTextContainer,startPage,totalCount,itemPerPage,curPage,chagePageAction),!1}function replyM(a){var b=$(Message.MSG_PREFIX+a),c=Element.getParentElementByClassName(b,"info-content"),d=document.getElementsByClassName("msgReplyForm",c)[0],e=document.getElementsByClassName("msgOpr",c)[0],f=document.getElementsByClassName("msgReply",c)[0];if(b.getAttribute("on")!="true"){b.setAttribute("on","true");var g="";f&&(divMsgReplyContent=document.getElementsByClassName("msgReplyContent",c)[0],divMsgReplyContent&&(g=getFilterEmotionText(divMsgReplyContent.innerHTML.convertHTMLToText())),Element.hide(f)),d.innerHTML=getReplyMForm(a,g,e.getAttribute("ebi")&&e.getAttribute("ebi").length>0),Element.show(d)}else b.setAttribute("on","false"),f&&Element.show(f),d.innerHTML="",Element.hide(d)}function getReplyMForm(a,b,c){b=b||"";var d="";return d+='<div class="info-title"><h3>博主回复：</h3></div>',d+='<div class="msgReplyContent">',d+='<form action="/page/message.do" method="post" onsubmit="return checkMRForm(this)">',d+='<input type="hidden" name="ebi" value="'+_ebi+'" />',d+='<input type="hidden" name="replyId" value="'+a+'" />',d+='<input type="hidden" name="m" value="reply" />',d+='<textarea name="messageContent" rows="8" class="text" style="width:95%">'+b+"</textarea>",c&&(d+='<br /><input type="checkbox" name="notify" id="notifyEle" checked="checked" value="true" />同时回复到对方留言板<br />'),d+='<input type="submit" name="submit" value="回 复" class="button-submit" /> <input type="button" name="cls" value="取 消" class="button" onclick="replyM('+a+')" />',d+="<form>",d+="</div>",d}function checkMRForm(a){var b=Form.getElements(a).find(function(a){return a.name=="messageContent"});if($F(b).length==0)return alert("回复内容不能为空"),b.focus(),!1;if($F(b).length>1e3)return alert("回复内容过多（"+$F("messageContent").length+"字），最多为1000字"),b.focus(),!1}function getPPSelect(){if(typeof ppuserid=="undefined"||!ppuserid)return"";var a="";a+='<select name="ppSource" id="ppSource" onchange="setPPSource()">',a+='<option value="http://pp.sohu.com/photolist-list-4-'+ppuserid+'-1.html" selected="selected">全部</option>';for(var b=0;b<photosets.length;b++){var c=photosets[b];if(!c.id)continue;a+='<option value="http://pp.sohu.com/set-view-'+c.id+"-"+ppuserid+'-4-1.html">'+c.name+"</option>"}return a+="</select>",a}function getPPLabel(){if(typeof ppuserid=="undefined"||!ppuserid)return"";var a="";return a+='<a href="http://pp.sohu.com/setlist.jhtml?method=list&userId='+ppuserid+'" target="_blank" class="contentLabel" onfocus="this.blur();">转到图片公园</a>',a}function getPPBigFlash(a){if(typeof ppuserid=="undefined"||!ppuserid){$(a).innerHTML="暂时无法获取数据，请稍后再试";return}if(ppuserid<0){$(a).innerHTML="还未开通相册";return}if(!$(a))return;var b="";b+='<object id="myFlash" width=720 height=550 classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0">',b+='<param name="movie" value="http://js4.pp.sohu.com.cn/ppp/blog/flash/show20060525.swf">',b+='<param name="wmode" value="opaque">',b+='<param name="quality" value="autohigh">',b+='<param id="flashvars" name="flashvars" value="urlA=http://pp.sohu.com/photolist-list-4-'+ppuserid+'-1.html"/>',b+='<embed width="720" height="550" src="http://js4.pp.sohu.com.cn/ppp/blog/flash/show20060525.swf?urlA=http://pp.sohu.com/photolist-list-4-'+ppuserid+'-1.html" quality="autohigh" wmode="opaque" type="application/x-shockwave-flash" plugspace="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" name="myFlash" swLiveConnect="true"> </embed>',b+="</object>",$(a).innerHTML=b}function getMusicSelect(a){if(!a||a.responseText=="")return"没有获得音乐盒数据";if(!a.responseXML||!a.responseXML.documentElement)return"分析音乐盒数据失败";var b=a.responseXML,c=b.getElementsByTagName("musiclist"),d="";d+='<select name="musicSource" id="musicSource" onchange="setMusicSource()">';for(var e=0;e<c.length;e++){var f=c[e];if(!f.getAttribute("sogouurl"))continue;d+='<option value="'+f.getAttribute("sogouurl").replace("&amp;","&")+'">'+f.getAttribute("name")+"</option>"}return d+="</select>",d}function setCmtEmoEvent(){for(var a=0;a<$("emotionBox").childNodes.length;a++){var b=$("emotionBox").childNodes[a];b.onclick=function(){Emotion.insert2frm(this.getAttribute("ec"),$("commentContent"))}}}function getIntervalTime(a){var b=new Date,c=b.getTime()-a,d=Math.floor(c/6e4),e=Math.floor(d/60),f=Math.floor(e/24),g="";return f>=1&&(g+=f,g+="天"),e<48&&e>0&&e%24>0&&(g+=e%24,g+="小时"),e==0&&d%60<=2?"刚刚":(e<24&&d>0&&(g+=d%60,g+="分钟"),g+="前",g)}function getNavIco(a,b){if(!a||a=="")a=58;var c="";return a!=0&&(c+='<img class="pageIcon" src="http://js5.pp.sohu.com.cn/ppp/blog/styles_ppp/images/custom/icons/'+icoLib[a]+'" title="'+b+'" />'),c}var Browser={};Browser.ua=getUserAgent();var prefStr="Pref",prefCurStr="PrefCur",BlogCookieInfo={cookie:{},parseCookie:function(){if(!getCookie("bloginfo"))return!1;var a=getCookie("bloginfo").split("|");a[0]&&(this.cookie.P=a[0]),a[1]&&(this.cookie.I=a[1]),a[2]&&(this.cookie.ud=a[2]),a[3]&&(this.cookie.B_TP=a[3]),a[4]&&(this.cookie.name=unescape(a[4])),a[5]&&(this.cookie.ico=a[5])},clear:function(){this.cookie={}}},addToFavFrom=null,FavWin=Class.create({initialize:function(){this.box=new Element("div"),this.box.setStyle({display:"none",position:"absolute",zIndex:"2000"}),this.box.innerHTML='<table class="mwinnew mwin3" id="addFriendWin">\t\t\t<thead><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></thead>\t\t\t<tfoot><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></tfoot>\t\t\t<tbody><tr><td class="bx"></td>\t\t\t\t\t<td class="by">\t\t\t\t\t\t<div class="mwt">\t\t\t\t\t\t\t<div class="ttl"><span>添加关注</span><a href="javascript:void(0);" class="mw_close" title="关闭"><b>关闭</b></a></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="mw">\t\t\t\t\t\t\t<div class="mwc">\t\t\t\t\t\t\t\t<form action="" method="post" name="addFriendForm" id="addFriendForm">\t\t\t\t\t\t\t\t<div class="repost">\t\t\t\t\t\t\t\t\t\t<div class="mwc2" >\t\t\t\t\t\t\t\t\t\t\t<p>选择分组</p>\t\t\t\t\t\t\t\t\t\t\t<div class="frmc" id="addFrindGroupsCtner"></div>\t\t\t\t\t\t\t\t\t\t\t<form ><div class="mwc21" style="height:30px;">\t\t\t\t\t\t\t\t\t\t\t\t或 <a style="line-height:30px;color:#017AD7" href="#" onclick="$(\'newGroupCtn\').toggle();return false;">新建分组</a><span id="newGroupCtn" style="display:none"><input type="text" name="gname" class="txt">\t\t\t\t\t\t\t\t\t\t\t\t<p><a href="#" class="fgyes"><b>确定</b></a><a href="#" onclick="$(\'newGroupCtn\').toggle();return false;" class="fgno"><b>取消</b></a></p></span>\t\t\t\t\t\t\t\t\t\t\t</div></form>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="post">\t\t\t\t\t\t\t\t\t<p class="btns2"><span class="opt"></span><a class="btn" href="javascript:void(0);"><b>确 定</b></a><a class="btn btn_dis" href="javascript:void(0);"><b>取 消</b></a></p>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</form>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div></td>\t\t\t\t\t<td class="bz"></td>\t\t\t\t</tr>\t\t\t</tbody>\t\t</table>',this.closeBtn=this.box.down("a.mw_close"),this.cancelBtnCtner=this.box.down("a.btn_dis"),this.okBtn=this.box.down("a.btn"),this.cancelBtn=this.box.down("a.btn",1),this.titleDiv=this.box.down("span"),this.noticeDiv=this.box.down("div.repost_c"),document.body.appendChild(this.box),this.cancelBtn.observe("click",this.hide.bind(this)),this.closeBtn.observe("click",this.hide.bind(this));var a=this.box.down(".fgyes");Event.observe(a,"click",this.addGroup.bindAsEventListener(this))},show:function(a){a=Object.extend({type:"alert",title:"",notice:"",fnOk:function(){}},a||{}),this.okBtn.observe("click",function(){a.fnOk()}),this.cancelBtnCtner.show();var b=Dom.getCenterPos(this.box);this.box.setStyle({top:b.top+"px",left:b.left+"px"}),this.box.show(),this.okBtn.focus()},hide:function(){this.box.remove(),this.reset(),FavWin._instance=null},reset:function(){this.okBtn.stopObserving("click")},addGroup:function(event){var srcEle=Event.element(event);Event.stop(event);var form=srcEle.up("form"),gname=form.gname.value.trim();if(gname==""){alert("请输入分组名称");return}var pars="gname="+encodeURIComponent(gname),addGroupUrl="/a/app/friend/group/add.do";new Ajax.Request(addGroupUrl,{method:"post",parameters:pars,onComplete:function(response){if(response.status!=200){alert("服务器返回异常，请稍后重试");return}eval("var json="+response.responseText);if(json){if(json.code!=1){alert(json.statusText);return}form.gname.value="";var str='<label class="chkbox"><input type="checkbox" name="groups" checked value="'+json.data.gid+'">'+json.data.gname+"</label>";$("addFrindGroupsCtner").insert(str),$("newGroupCtn").hide()}}.bind(this)})}});flashMsg("message"),flashErr("errormsg");var Starter={funs:[],add:function(a){this.funs||(this.funss=[]),this.funs.push(a)},start:function(){if(!this.funs||this.funs.length<=0)return;$A(this.funs).each(function(a){a()})}},LoadBar={show:function(a,b){clearTimeout(this.timeout),a=a||(typeof App!="undefined"&&App.Lang&&App.Lang.loading?App.Lang.loading:"loading..."),this.build(a),b=="ok"?Element.addClassName(this.element,"okBar"):Element.removeClassName(this.element,"okBar"),Element.show(this.element),this.element.style.right="0px",this.element.style.top=document.documentElement.scrollTop+30+"px",this.showStatusBar(a)},hide:function(a){LoadBar.element&&(LoadBar.timeout=setTimeout(function(){LoadBar.element&&Element.hide(LoadBar.element),LoadBar.hideStatusBar()},a&&!isNaN(a)?a:0))},destroy:function(){this.element&&(Element.remove(this.element),this.element=null)},build:function(a){if(this.element){this.element.firstChild.firstChild.alt=a,this.element.firstChild.childNodes[1].nodeValue=a;return}this.element=document.createElement("div"),Element.addClassName(this.element,"loadBar"),this.element.style.zIndex=1e3,this.element.style.position="absolute",Element.hide(this.element);var b=document.createElement("div"),c=typeof App!="undefined"&&App.Actions&&App.Actions.imgPath?App.Actions.imgPath+"loading.gif":"http://js2.pp.sohu.com.cn/ppp/blog/styles_ppp/images/loading.gif";b.innerHTML='<img src="'+c+'" alt="text" />'+a,this.element.appendChild(b),document.body.appendChild(this.element)},showStatusBar:function(a){setTimeout(function(){window.status=a},10)},hideStatusBar:function(){setTimeout(function(){window.status=""},10)},loadPage:function(){this.show("请稍候，正在下载...")}};Starter.add(LoadBar.hide),$("_preLoadText")&&(Element.hide($("_preLoadText")),LoadBar.loadPage()),Starter.add(insertMngOpr);var Entries={ITEM_PREFIX:"itemId_",ITEMCMTCOUNT_PREFIX:"itemCmtCount_",ITEMREADCOUNT_PREFIX:"itemReadCount_",itemReadCountUrl:"http://ana.blog.sohu.com/blogcount",entries:[],insertItemOpr:function(a){if(!isMyBlog())return;var b=[];b=document.getElementsByClassName("itemOpr");if(b.length<=0)return;$A(b).each(function(b,c){if(b&&b.id&&b.id.indexOf(this.ITEM_PREFIX)==0){var d=b.id.substr(this.ITEM_PREFIX.length),e="";e+='<a href="http://blog.sohu.com/manage/entry.do?m=edit&id='+d+'&t=shortcut" target="_blank">',e+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_edit.gif" alt="修改" />',e+="</a>",e+='<a href="http://blog.sohu.com/manage/entry.do?m=delete&id='+d,typeof a!="undefined"&&a!=""&&(e+="&from="+a),e+='" onclick="return confirm(\'确认要删除吗？\')">',e+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_del.gif" alt="删除" />',e+="</a>",b.innerHTML||(b.innerHTML=e)}}.bind(this))},insertItemCmtCount:function(a){var b=jQuery,c=b(".itemCmtCount",a),d=b("input",a),e=b(".item-label",a).map(function(a){return b("[id]",this).attr("id").replace("itemId","blog")}).get().join(","),f="http://cc.i.sohu.com/a/app/mblog/getCounts.htm?_input_encode=UTF-8&callback=?";b.getJSON(f,{ids:e,callback:"?"},function(a){c.each(function(b,c){var d=(c.getAttribute("id")||"").replace("itemCmtCount_","");d&&(c.innerHTML=a[d].commentcount)})})},entriesReadCount:{},insertItemReadCount:function(from){var itemIds=[];$A(document.getElementsByClassName("itemReadCount")).each(function(a,b){if(a&&a.id&&a.id.indexOf(this.ITEMREADCOUNT_PREFIX)==0){var c=a.id.substr(this.ITEMREADCOUNT_PREFIX.length),d=this.entriesReadCount[c];if(typeof d!="undefined"&&d!=null&&!isNaN(d)){if(!a.innerHTML||a.innerHTML=="?")a.innerHTML=d}else c&&itemIds.push(c)}}.bind(this));if(itemIds.length>0){var ts=timeStamp(),vn="Blog.ercs_"+ts;if(from=="view")var dataURL=this.itemReadCountUrl+"?e="+itemIds[0]+"&vn="+ts;else var dataURL=this.itemReadCountUrl+"?l="+itemIds.join(",")+"&vn="+ts;new LinkFile(dataURL,{type:"script",noCache:!0,callBack:{variable:vn,onLoad:function(){this.entriesReadCount=Object.extend(this.entriesReadCount,eval(vn)||{}),this.insertItemReadCount(from)}.bind(this)}})}},clearReadCount:function(a){a?this.entriesReadCount[a]=null:(this.entriesReadCount=null,this.entriesReadCount={})},getConEntrySubMenuData:function(a){var b=document.createElement("div");b.className="menuInnerSub-div clearfix";var c=[];return c.push('<form method="post" onsubmit="return false;">'),c.push('<table cellpadding="2" cellspacing="5">'),c.push("<tr><td>"),c.push('<div class="infoBox">您可以在发表日志的同时，投稿给我们。<br />如果该日志被录用，将会被展示在相应频道栏目中。同时管理员会以留言方式通知您。<br /><br />提示：每篇日志只能投稿一次，欢迎原创，谢绝转载</div>'),c.push("</td></tr>"),c.push("<tr><td>"),c.push("请选择投稿栏目:"),c.push('<input type="hidden" name="id" value="'+a+'" />'),c.push('<input type="hidden" name="contrChId" value="" />'),c.push('<input type="hidden" name="contrCataId" value="" />'),c.push("</td></tr>"),c.push("<tr><td>"),c.push("</td></tr>"),c.push("<tr><td>"),c.push('<input type="submit" value=" 投 稿 " class="button-submit" />'),c.push(' <input type="button" value="取消" class="button" />'),c.push('<span style="display:none;">loading...</span>'),c.push("</td></tr>"),c.push("</table>"),c.push("</form>"),b.innerHTML=c.join(""),this.entries[a].conForm=b.firstChild,this.entries[a].conChIpt=b.firstChild.firstChild.rows[1].cells[0].childNodes[1],this.entries[a].conCataIpt=b.firstChild.firstChild.rows[1].cells[0].childNodes[2],this.entries[a].conSelBox=b.firstChild.firstChild.rows[2].cells[0],this.entries[a].conSubBtn=b.firstChild.firstChild.rows[3].cells[0].firstChild,this.entries[a].conCanBtn=b.firstChild.firstChild.rows[3].cells[0].getElementsByTagName("input")[1],this.entries[a].conSubLoadText=b.firstChild.firstChild.rows[3].cells[0].lastChild,Event.observe(this.entries[a].conForm,"submit",this.conSubmit.bind(this,a)),Event.observe(this.entries[a].conCanBtn,"click",function(){this.entries[a].conEntryMenu.hide()}.bind(this)),setTimeout(this.setConSelecter.bind(this,a),10),b},setConSelecter:function(a){this.entries[a].conSelecterMenu=new SelecterMenu(this.entries[a].conSelBox,getConDataUrl,{startId:conStartId,variablePrefix:"con_",selectPerfix:"con_level_"})},conSubmit:function(a){var b=this.entries[a],c=b.conSelecterMenu.getValues();if(!c[c.length-1]||c[c.length-1]==""||c[c.length-1]=="56_allGame"){alert("请选择投稿栏目");try{b.conSelecterMenu.levels[b.conSelecterMenu.levels.length-1].elm_sel.focus()}catch(d){b.conSelecterMenu.levels[b.conSelecterMenu.levels.length-2].elm_sel.focus()}return!1}b.conSubBtn.disabled=!0,b.conCanBtn.disabled=!0,Element.show(b.conSubLoadText);var e="/manage/entry.do";if(is17173User())var f="m=contribute&id="+a+"&contrChId="+conStartId+"&contrCataId="+c[c.length-1];else var f="m=contribute&id="+a+"&contrChId="+c[0]+"&contrCataId="+c[c.length-1];var g=new Ajax.Request(e,{method:"get",parameters:f,onComplete:this.okConSubmit.bind(this),data:a})},okConSubmit:function(a,b,c){if(!a||!a.responseText||a.responseText.indexOf("<")!==0||!a.responseXML){this.errorConSubmit(a);return}var d=a.responseXML,e=Element.getChildValueByTagName(d,"code")[0],f=Element.getChildValueByTagName(d,"message")[0].trim();if(typeof e=="undefined"||typeof f=="undefined")return this.errorConSubmit(a);e=="200"?alert(Info.htmlInfo(unescape(f),0," ")):alert(Info.htmlInfo(unescape(f),1," ")),this.endConSubmit(c)},errorConSubmit:function(a){alert("Error: The resource file is not well-formed.\n"+a.responseText)},endConSubmit:function(a){var b=this.entries[a];b.conSubBtn.disabled=!1,b.conCanBtn.disabled=!1,Element.hide(b.conSubLoadText),b.conEntryMenu.hide()}};if(is17173User())var conStartId=56;else var conStartId=0;var PTags={getTags:function(a,b){if(!a)return;typeof b.max!="number"&&(b.max=-1),a.innerHTML="正在加载...";var c="http://ptag.blog.sohu.com/btags/"+_ebi+"/all/";new LinkFile(c,{type:"script",noCache:isMyBlog(),callBack:{variable:"BlogPtags.tags_abc",onLoad:this.showAbc.bind(this,a,b),onFailure:this.noData.bind(this,a,b)}})},showAbc:function(a,b){if(!BlogPtags.tags_abc||BlogPtags.tags_abc.length<=0){a.innerHTML="暂无标签";return}var c="";c+='<ul class="ptags">';var d=0,e=b.max,f=this.getItemStr;this.getLevels(BlogPtags.tags_abc).each(function(a){if(e!=-1&&d++>=e)throw $break;c+=f(a)}),c+="</ul>",e!=-1&&d>=e&&(c+='<div style="cursor:pointer;float:right;">查看全部标签</div>'),a.innerHTML=c,e!=-1&&d>=20&&Event.observe(a.lastChild,"click",this.showAllAbc.bind(this,a)),b&&b.onOkShow&&b.onOkShow()},showAllAbc:function(a){var b="";b+='<ul class="ptags">';var c=this.getItemStr;this.getLevels(BlogPtags.tags_abc).each(function(a){b+=c(a)}),b+="</ul>",a.innerHTML=b},getItemStr:function(a){var b='<li class="ptag_'+a.level+'">';return b+='<a href="'+_blog_base_url+"tag/"+a.encode+'/" title="'+a.count+'篇">',b+=a.tag,b+="</a>",b+="</li>",b},noData:function(a,b){a.innerHTML="暂时无法获取数据，请稍后再试",b&&b.onErrorShow&&b.onErrorShow()},getLevels:function(a){var b=a.max(function(a){return parseInt(a.count)}),c=a.min(function(a){return parseInt(a.count)}),d=[];return d[0]=Math.floor((b-c)*.9)+c,d[1]=Math.floor((b-c)*.7)+c,d[2]=Math.floor((b-c)*.4)+c,a.map(function(a){return a.level=a.count>d[0]?4:a.count>d[1]?3:a.count>d[2]?2:1,a})}};setTimeout(function(){function b(){var b={sign:"entryProfile",obj:a[0]};addToFav(b)}if(!window.jQuery)return;var a=jQuery("a.i-addfriend");if(!a[0])return;a.click(function(){CA.q("blog_entry_profile_addFriend"),isPPLogin()?b():commonLogin("",b)})},1500);var commentListEl,Comments={CMT_PREFIX:"cmtId_",CMTICO_PREFIX:"icoId_",CMTICOIMG:"http://js1.pp.sohu.com.cn/ppp/blog/images/common/nobody.gif",insertCmtOpr:function(){if(!isMyBlog())return;var a=[];a=document.getElementsByClassName("cmtOpr");if(a.length<1)return;for(var b=0;b<a.length;b++){var c=' |<a href="javascript://" action="delete">';c+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_del.gif" title="删除" align="absbottom">',c+="</a>",a[b].innerHTML||(a[b].innerHTML=c)}},insertIconInfo:function(){if(!isLogin()||!hasBlog())return;var a=[];a=document.getElementsByClassName("cmtIco");if(a.length<=0)return;for(var b=0;b<a.length;b++)if(a[b]&&a[b].id&&a[b].id.indexOf(this.CMTICO_PREFIX)==0){var c=a[b].id.substr(this.CMTICO_PREFIX.length),d=a[b].getElementsByTagName("img")[0];if(c==hasBlog()&&d&&d.src==this.CMTICOIMG){var e="";e+='<a href="http://blog.sohu.com/manage/profile.do" target="_blank" title="上传我的头像">',e+='<img src="'+this.CMTICOIMG+'" />',e+="<span>上传头像</span></a>",a[b].innerHTML=e}}},initCandleMen:function(){SohuIM.setCandleMenParam();try{typeof sohuim!=undefined&&sohuim&&sohuim.candleArmy&&sohuim.candleArmy.RenderAll&&sohuim.candleArmy.RenderAll(webim_config.cm_container,webim_config.product)}catch(a){}},buildOne:function(a){var b=[],c=this.parseContent(a.content);return b.push('<div class="info-content" cid="'+a.id+'">'),b.push('<div style="margin-bottom: 10px;">'+c+"</div>"),b.push('<div class="cmtIco">'),b.push('<a title="'+a.unick+'" target="_blank" href="'+a.ulink+'">'),b.push('<img src="'+a.uavatar+'"></a></div>'),b.push('<div class="info-title">'),b.push('<h3>发布者 <a target="_blank" href="'+a.ulink+'">'+a.unick+"</a>"),b.push('<a href="javascript:void(0)" param="'+a.passport+";"+a.unick+'" rel="'+a.ulink+";"+a.unick+'" name="onlineIcon" '+'_webim_ppid="'+a.ulink+'">'),b.push('<img src="http://images.sohu.com/cs/sohuim/em/user_off_0.gif" height="12px" border="0"></a>'),b.push("("+a.ulink+")<br>"+timeUtil.get_timeago(a.createtime)+"</h3>"),b.push('<div style="margin-top:16px;" class="item-label">'),b.push('<a href="javascript://" action="reply">回复</a><span class="cmtOpr"></span></div></div>'),b.push('<div class="clear"></div></div>'),b.push("<hr>"),b.join("")},parseContent:function(a){if(typeof a!="string")return;var b=this.parseEmote(a),c=b.indexOf("@"),d=b.indexOf("：");if(c==-1||d==-1)return b;var e=b.substring(c,d),f=e.substring(1),g='<a target="_blank" href="http://i.sohu.com/nick/'+f+'">'+e+"</a>";return b.replace(RegExp(e),g)},parseEmote:function(a){var b=/(\[[^\[\]]+\])/g,c=a.match(b);if(!c)return a;var d="";for(var e=0,f=c.length;e<f;e++){var g=c[e],h,i,j="";g in emoteData.base?(h=emoteData.base[g],i=emoteBaseUrl):g in emoteData.fox?(h=emoteData.fox[g],i=emoteFoxUrl):g in emoteData.pafu&&(h=emoteData.pafu[g],i=emotePafuUrl);if(!h)return a;j='<img src="'+i+h[0]+'" title="'+h[1]+'">',d?d=d.replace(g,j):d=a.replace(g,j)}return d},one:function(a){commentListEl||(commentListEl=$("commentlist")),str=Comments.buildOne(a),jQuery(commentListEl).append(str)},list:function(a){a.discusscount&&($("discusscount").innerHTML=a.discusscount);for(var b=0,c=a.discusss.length;b<c;b++)this.one(a.discusss[b])},addEvent:function(){if(typeof jQuery=="undefined")return;var a=jQuery;$commentlist=a("#commentlist"),$commentlist.delegate("[action=reply]","click",function(b){var c=$("commentContent");if(!isLogin()){commonLogin("#commentbox");return}c||alert("抱歉，由于博主的设置，您暂时无法评论");var d=a(b.target).closest(".info-content"),e=d.children()[0],f=getFilterEmotionText(e.innerHTML),g=a(b.target).closest(".info-content").find(".info-title").find("h3").find("a"),h=g.first().html();c.value="",c.value+="回复@"+h+"：",c.focus();try{var i=c.createTextRange();i.moveStart("character",c.value.length),i.collapse(!0),i.select()}catch(b){}var j=g.last().attr("param").split(";")[0];a("[name=replytopassport]").val(j),a("[name=replytodiscussid]").val(d.attr("cid"))}),$commentlist.delegate("[action=delete]","click",function(b){var c=a(b.target).closest(".info-content"),d=c.attr("cid"),e="http://i.sohu.com/a/app/discuss/delete.htm?_input_encode=UTF-8";e+="&ids="+d+"_"+_upt,confirm("确认要删除吗？")&&a.getJSON(e+"&callback=?",function(a){a.code==0&&(c.next().remove(),c.remove())})})}};setTimeout(function(){Comments.addEvent()},1500);var ArticleContent={playEmbed:function(a,b){if(!$(a))return;var c="";c+="<embed "+b.replace(/'/,'"')+"></embed>",Element.replace($(a),c)}},timeUtil={serverTime:(new Date).getTime(),timeOffset:0,setServerTime:function(a){a?(this.serverTime=a,this.timeOffset=(new Date).getTime()-a):this.serverTime=(new Date).getTime()-this.timeOffset},get_timeago:function(a){this.setServerTime();var b="",c=1e3,d=c*60,e=d*60,f=this.serverTime,g=new Date(f),h=g.getFullYear(),i=g.getMonth(),j=g.getDate(),k=new Date(h,i,j),l=k.getTime(),m=f-a;if(m<0)b="";else if(m<d*5)b="刚刚";else if(m<e){var n=Math.floor(m/d);b=n+"分钟前"}else if(m<f-l){var o=new Date(a),p=o.getHours(),q=o.getMinutes();p<10&&(p="0"+p),q<10&&(q="0"+q),b="今日 "+p+":"+q}else{var o=new Date(a),r=o.getMonth()+1,s=o.getDate(),p=o.getHours(),q=o.getMinutes();r<10&&(r="0"+r),s<10&&(s="0"+s),p<10&&(p="0"+p),q<10&&(q="0"+q),b=r+"月"+s+"日 "+p+":"+q}return b}},Message={MSG_PREFIX:"msgId_",MSGREPLY_PREFIX:"msgReplyId_",insertMsgOpr:function(){if(!isMyBlog())return;var a=[];a=document.getElementsByClassName("msgOpr");if(a.length<=0)return;for(var b=0;b<a.length;b++)if(a[b]&&a[b].id&&a[b].id.indexOf(this.MSG_PREFIX)==0){var c=a[b].id.substr(this.MSG_PREFIX.length),d="";d+='<a href="javascript:void(0)" onclick="replyM('+c+',this.parentNode)">回复</a> ',d+='|<a href="/manage/message.do?m=delete&id='+c+'" onclick="return confirm(\'确认要删除吗？\')">',d+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_del.gif" alt="删除" align="absbottom" />',d+="</a>",a[b].innerHTML||(a[b].innerHTML=d)}},insertMsgReplyOpr:function(){if(!isMyBlog())return;var a=[];a=document.getElementsByClassName("msgReplyOpr");if(a.length<=0)return;for(var b=0;b<a.length;b++)if(a[b]&&a[b].id&&a[b].id.indexOf(this.MSGREPLY_PREFIX)==0){var c=a[b].id.substr(this.MSGREPLY_PREFIX.length),d="";d+='<a href="/manage/message.do?m=delete&id='+c+'" onclick="return confirm(\'确认要删除吗？\')">',d+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_del.gif" alt="删除" align="absbottom" />',d+="</a>",a[b].innerHTML||(a[b].innerHTML=d)}}},Emotion={iconPath:"http://js3.pp.sohu.com.cn/ppp/images/emotion/",lib:[["[:)]","0.gif","微笑"],["[#_#]","1.gif","谄媚"],["[8*)]","2.gif","偷笑"],["[:D]","3.gif","大笑"],["[:-)]","4.gif","害羞"],["[:P]","5.gif","调皮"],["[B_)]","6.gif","得意"],["[B_I]","7.gif","耍酷"],["[^_*]","8.gif","讽刺"],["[:$]","9.gif","委屈"],["[:|]","10.gif","郁闷"],["[:(]","11.gif","难过"],["[:.(]","12.gif","流泪"],["[:_(]","13.gif","大哭"],["[):(]","14.gif","发火"],["[:V]","15.gif","咒骂"],["[*_*]","16.gif","发呆"],["[:^]","17.gif","不惑"],["[:?]","18.gif","疑惑"],["[:!]","19.gif","吃惊"],["[=:|]","20.gif","流汗"],["[:%]","21.gif","尴尬"],["[:O]","22.gif","惊恐"],["[:X]","23.gif","闭嘴"],["[|-)]","24.gif","犯困"],["[:Z]","25.gif","睡觉"],["[:9]","26.gif","馋"],["[:T]","27.gif","吐"],["[:-*]","28.gif","耳语"],["[*_/]","29.gif","海盗"],["[:#|]","30.gif","重伤"],["[:69]","31.gif","拥抱"],["[//shuang]","32.gif","爽"],["[//qiang]","33.gif","强"],["[//ku]","34.gif","酷"],["[//zan]","35.gif","赞"],["[//heart]","36.gif","红心"],["[//break]","37.gif","心碎"],["[//F]","38.gif","花开"],["[//W]","39.gif","花谢"],["[//mail]","40.gif","邮件"],["[//strong]","41.gif","手势-棒"],["[//weak]","42.gif","手势-逊"],["[//share]","43.gif","握手"],["[//phone]","44.gif","电话"],["[//mobile]","45.gif","手机"],["[//kiss]","46.gif","嘴唇"],["[//V]","47.gif","V"],["[//sun]","48.gif","太阳"],["[//moon]","49.gif","月亮"],["[//star]","50.gif","星星"],["[(!)]","51.gif","灯泡"],["[//TV]","52.gif","电视"],["[//clock]","53.gif","闹钟"],["[//gift]","54.gif","礼物"],["[//cash]","55.gif","现金"],["[//coffee]","56.gif","咖啡"],["[//rice]","57.gif","饭"],["[//watermelon]","58.gif","西瓜"],["[//tomato]","59.gif","番茄"],["[//pill]","60.gif","药丸"],["[//pig]","61.gif","猪头"],["[//football]","62.gif","足球"],["[//shit]","63.gif","便便"]],getEmotion:function(a){for(var b=0;b<this.lib.length;b++){var c=this.lib[b];if(c[0]==a)return c}return null},getEmotionIcons:function(){var a="";for(var b=0;b<this.lib.length;b++){var c=this.lib[b];a+='<img src="'+this.iconPath+c[1]+'" alt="'+c[0]+'" ec="'+c[0]+'" />'}return a},insert2frm:function(a,b){a=" "+a+" ";if(b.createTextRange&&b.caretPos){var c=b.caretPos;c.text=c.text.charAt(c.text.length-1)==" "?a+" ":a,b.focus()}else b.value+=a,b.focus()}},CorEntry={getEntries:function(a,b,c,d,e){this.element=a;if(!b||c<=0||d<=0){e=="system"?this.noEntriesBySys():this.noEntriesByPsn();return}b=b.split(/,|，| |　/);if(b.length==0){e=="system"?this.noEntriesBySys():this.noEntriesByPsn();return}var f=b.splice(0,c);e=="system"?this.getDataBySys(f,d):this.getDataByPsn(f,d)},getDataBySys:function(a,b){var c="http://tag.blog.sohu.com/"+encodeURIComponent(escape(a.join(" ")))+"/json/";new LinkFile(c,{type:"script",noCache:isMyBlog(),callBack:{variable:"blogTag.posts",onLoad:this.showEntriesBySys.bind(this,b),onFailure:this.noEntriesBySys.bind(this)}})},showEntriesBySys:function(a){if(!blogTag||!blogTag.posts||blogTag.posts.length==0){this.noEntriesBySys();return}try{var b="";b+='<div class="item-title">',b+="<h3>其他博客也发表了类似文章（"+getIntervalTime(blogTag.posts[0].pub)+"）</h3>",b+='<div class="clear"></div>',b+="</div>",b+="<div>";var c=0,d="http://"+_blog_domain+".blog.sohu.com/";blogTag.posts.each(function(e){if(e.blog_link.indexOf(d)>=0)throw $continue;c++;if(c>a)throw $break;b+='<div class="tagEntry">',b+='<div class="tagEntry_authorPic"><a href="'+e.blog_link+'" target="_blank"><img src="'+e.blog_icon+'" alt="'+e.blog_name+'" /></a></div>',b+='<h5><a href="'+e.blog_link+'" target="_blank" class="tagEntry_authorName">'+e.blog_name+'</a>：<a href="'+e.permlink+'" target="_blank" class="tagEntyr_title">'+e.title+'</a><span class="tagEntry_pubTime">'+getIntervalTime(e.pub)+"</span></h5>",b+='<div class="tagEntry_content">'+e.excerpt+"...</div>",b+="</div>"});if(!(c>0)){errorLoadTagList();return}$("tagsBox")&&(b+='<div class="tagListMore">查看更多：'+$("tagsBox").innerHTML+"</div>"),b+="</div>",this.element.innerHTML=b,Element.show(this.element)}catch(e){this.noEntriesBySys()}},noEntriesBySys:function(){this.getSysRecTags(this.element)},getSysRecTags:function(a){var b="/inc/home/tag_index.inc";if($(a)){var c=document.createElement("div");c.id="rec",c.className="clearfix";var d=new Ajax.Updater(c,b,{method:"get"});a.appendChild(c),Element.show(a)}},getDataByPsn:function(a,b){this.inTagsByPsn=a,this.useInTagIndexByPsn=0,this.outEntriesByPsn=[],this.outNumByPsn=b,this.getOneDataByPsn()},getOneDataByPsn:function(){if(this.inTagsByPsn.length>0&&this.useInTagIndexByPsn<this.inTagsByPsn.length&&this.outEntriesByPsn.length<this.outNumByPsn){var ts=timeStamp(),dataURL="http://ptag.blog.sohu.com/ptags/"+_ebi+"/"+encodeURI(escape(this.inTagsByPsn[this.useInTagIndexByPsn]))+"/"+ts+"/";new LinkFile(dataURL,{type:"script",noCache:isMyBlog(),callBack:{variable:"BlogPtags.entries_"+ts,onLoad:function(){this.outEntriesByPsn=this.getTureEntriesByPerson(this.outEntriesByPsn.concat(eval("BlogPtags.entries_"+ts+".entries"))),this.useInTagIndexByPsn++,this.getOneDataByPsn()}.bind(this),onFailure:this.noEntriesByPsn.bind(this)}})}else this.showEntriesByPsn()},showEntriesByPsn:function(){try{if(this.outEntriesByPsn.length>0){var a="";a+='<div class="item-title clearfix">',a+="<h3>相关文章</h3>",a+="<span>(根据该日志的标签，发现博主还有如下日志与本文相关)</span>",a+="</div>",a+='<ul class="corEntry">',this.outEntriesByPsn.each(function(b,c){if(c>=this.outNumByPsn)throw $break;a+="<li>",a+='<a href="'+b.permanLink+'" target="_blank" title="'+b.title+" ---- "+getIntervalTime(b.timestamp)+'">',a+=b.title,a+="</a>",a+="</li>"}.bind(this)),a+="</ul>",this.element.innerHTML=a,Element.show(this.element)}else this.noEntriesByPsn()}catch(b){this.noEntriesByPsn()}},noEntriesByPsn:function(){var a=document.createElement("div");a.id="rec",a.className="clearfix",PTags.getTags(a,{onOkShow:function(){this.element.appendChild(a),Element.show(this.element)}.bind(this)})},getTureEntriesByPerson:function(a){var b=[];return a.each(function(a){if(b.any(function(b){return b.entryId==a.entryId}))throw $continue;if(a.entryId==entryId)throw $continue;b.push(a)}),b}},icoLib=["none.gif","anchor.gif","attach.gif","basket.gif","bomb.gif","book.gif","book_addresses.gif","book_open.gif","brick.gif","briefcase.gif","bug.gif","cake.gif","calendar_view_day.gif","calendar_view_month.gif","camera.gif","car.gif","cd.gif","chart_bar.gif","chart_curve.gif","chart_organisation.gif","chart_pie.gif","clock.gif","clock_red.gif","cog.gif","coins.gif","color_swatch.gif","comment.gif","computer.gif","connect.gif","creditcards.gif","door.gif","door_open.gif","drink.gif","drink_empty.gif","email.gif","email_open.gif","email_open_image.gif","emoticon_evilgrin.gif","emoticon_grin.gif","emoticon_happy.gif","emoticon_smile.gif","emoticon_surprised.gif","emoticon_tongue.gif","emoticon_unhappy.gif","emoticon_waii.gif","emoticon_wink.gif","exclamation.gif","eye.gif","feed.gif","flag_blue.gif","flag_green.gif","flag_orange.gif","flag_pink.gif","flag_purple.gif","flag_red.gif","flag_yellow.gif","folder.gif","heart.gif","house.gif","image.gif","information.gif","ipod.gif","keyboard.gif","layout.gif","lightbulb.gif","lightbulb_off.gif","lock.gif","lock_open.gif","lorry.gif","lorry_flatbed.gif","magnifier.gif","money.gif","money_dollar.gif","money_euro.gif","money_pound.gif","money_yen.gif","monitor.gif","mouse.gif","music.gif","new.gif","note.gif","page.gif","page_copy.gif","page_white.gif","page_white_acrobat.gif","page_white_code.gif","page_white_compressed.gif","page_white_excel.gif","page_white_flash.gif","page_white_php.gif","page_white_picture.gif","page_white_powerpoint.gif","page_white_text.gif","page_white_word.gif","page_white_world.gif","palette.gif","paste_plain.gif","pencil.gif","phone.gif","photo.gif","picture.gif","printer.gif","printer_empty.gif","rainbow.gif","rosette.gif","server.gif","shield.gif","sport_8ball.gif","sport_basketball.gif","sport_football.gif","sport_golf.gif","sport_raquet.gif","sport_shuttlecock.gif","sport_soccer.gif","sport_tennis.gif","star.gif","stop.gif","tag_blue.gif","tag_green.gif","tag_orange.gif","tag_pink.gif","tag_purple.gif","tag_red.gif","tag_yellow.gif","telephone.gif","television.gif","thumb_down.gif","thumb_up.gif","trash.gif","tux.gif","user.gif","user_female.gif","user_gray.gif","user_green.gif","user_orange.gif","user_red.gif","user_suit.gif","vcard.gif","weather_clouds.gif","weather_cloudy.gif","weather_lightning.gif","weather_rain.gif","weather_snow.gif","weather_sun.gif","world.gif","zoom.gif","chinaren.gif","olympic.gif"],emoteBaseUrl="http://js3.pp.sohu.com.cn/ppp/images/emotion/base/",emoteFoxUrl="http://js3.pp.sohu.com.cn/ppp/images/emotion/s/",emotePafuUrl="http://js3.pp.sohu.com.cn/ppp/images/emotion/b/",emoteData={base:{"[:)]":["smile.gif","微笑"],"[#_#]":["flatter.gif","谄媚"],"[8*)]":["titter.gif","偷笑"],"[:D]":["spit.gif","大笑"],"[:-)]":["shame.gif","害羞"],"[:P]":["naughty.gif","调皮"],"[B_)]":["complacent.gif","得意"],"[B_I]":["cool.gif","耍酷"],"[^_*]":["lash.gif","讽刺"],"[:$]":["complaint.gif","委屈"],"[:|]":["gloomy.gif","郁闷"],"[:(]":["sorry.gif","难过"],"[:.(]":["weep.gif","泪奔"],"[:_(]":["cry.gif","大哭"],"[):(]":["detonate.gif","发火"],"[:V]":["curse.gif","咒骂"],"[*_*]":["muzzy.gif","发呆"],"[:^]":["misunderstand.gif","不懂"],"[:?]":["haze.gif","疑惑"],"[:!]":["surprise.gif","吃惊"],"[=:|]":["perspire.gif","流汗"],"[:%]":["embarrassed.gif","尴尬"],"[:O]":["fright.gif","惊恐"],"[:X]":["stopper.gif","闭嘴"],"[|-)]":["yawn.gif","犯困"],"[:Z]":["sleep.gif","睡觉"],"[:9]":["greedy.gif","馋"],"[:T]":["puke.gif","吐"],"[:-*]":["whisper.gif","耳语"],"[*_/]":["pirate.gif","海盗"],"[:#|]":["bandage.gif","重伤"],"[:69]":["hug.gif","拥抱"],"[//shuang]":["comfortably.gif","爽"],"[//qiang]":["strong.gif","强"],"[//ku]":["cool2.gif","酷"],"[//zan]":["good.gif","赞"],"[//heart]":["heart.gif","红心"],"[//break]":["hearted.gif","心碎"],"[//F]":["blow.gif","花开"],"[//W]":["fade.gif","花谢"],"[//mail]":["mail.gif","邮件"],"[//strong]":["fine.gif","手势-棒"],"[//weak]":["bad.gif","手势-逊"],"[//share]":["share.gif","握手"],"[//phone]":["phone.gif","电话"],"[//mobile]":["mobile.gif","手机"],"[//kiss]":["lip.gif","嘴唇"],"[//V]":["victory.gif","V"],"[//sun]":["sun.gif","太阳"],"[//moon]":["moon.gif","月亮"],"[//star]":["star.gif","星星"],"[(!)]":["bulb.gif","灯泡"],"[//TV]":["tv.gif","电视"],"[//clock]":["clock.gif","闹钟"],"[//gift]":["gift.gif","礼物"],"[//cash]":["cash.gif","现金"],"[//coffee]":["coffee.gif","咖啡"],"[//rice]":["dining.gif","饭"],"[//watermelon]":["watermelon.gif","西瓜"],"[//tomato]":["tomato.gif","番茄"],"[//pill]":["pill.gif","药丸"],"[//pig]":["pig.gif","猪头"],"[//football]":["football.gif","足球"],"[//shit]":["shit.gif","便便"]},fox:{"[{s}//pig]":["pig.gif","猪头"],"[{s}//heart]":["heart.gif","红心"],"[{s}B_I]":["cool.gif","耍酷"],"[{s}snt]":["snot.gif","鼻涕"],"[{s}=:|]":["perspire.gif","流汗"],"[{s}8*)]":["titter.gif","偷笑"],"[{s}elv]":["elvis.gif","猫王"],"[{s}nob]":["nostbleed.gif","鼻血"],"[{s}:D]":["spit.gif","大笑"],"[{s}lny]":["loney.gif","坏笑"],"[{s}:_(]":["cry.gif","大哭"],"[{s}rdf]":["redflag.gif","红旗"],"[{s}:9]":["greedy.gif","馋"],"[{s}:|]":["gloomy.gif","郁闷"],"[{s}//shit]":["shit.gif","便便"],"[{s}ctm]":["contemn.gif","蔑视"],"[{s}plg]":["plunger.gif","搋子"],"[{s}:Z]":["sleep.gif","睡觉"],"[{s}:#|]":["bandage.gif","重伤"],"[{s}:?]":["haze.gif","疑惑"],"[{s}ft]":["faint.gif","晕"],"[{s}//zan]":["good.gif","赞"],"[{s}epd]":["explode.gif","爆炸"],"[{s}//share]":["share.gif","握手"],"[{s}:$]":["complaint.gif","委屈"],"[{s}drk]":["drink.gif","饮料"],"[{s}brs]":["brushing.gif","刷牙"],"[{s}//rice]":["dining.gif","饭"],"[{s}bra]":["bra.gif","胸罩"],"[{s}spk]":["speaker.gif","喇叭"],"[{s}//clock]":["clock.gif","闹钟"],"[{s}xms]":["xmas.gif","圣诞"],"[{s}bsk]":["basketball.gif","篮球"],"[{s}flw]":["floweret.gif","小花"],"[{s}ber]":["beer.gif","啤酒"],"[{s}cak]":["cake.gif","蛋糕"],"[{s}chr]":["cheer.gif","加油"],"[{s}oly]":["olympic.gif","奥运"],"[{s}tor]":["torch.gif","火炬"],"[{s}up]":["up.gif","顶"]},pafu:{"[{b}hi]":["hi.gif","HI"],"[{b}ok]":["ok.gif","OK"],"[{b}fco]":["faceoff.gif","变脸"],"[{b}:T]":["puke.gif","吐"],"[{b}:D]":["spit.gif","大笑"],"[{b}):(]":["detonate.gif","发火"],"[{b}:!]":["surprise.gif","吃惊"],"[{b}bet]":["beat.gif","扁人"],"[{b}ft]":["faint.gif","晕"],"[{b}gdn]":["goodnight.gif","晚安"],"[{b}#_#]":["flatter.gif","谄媚"],"[{b}=:|]":["perspire.gif","流汗"],"[{b}sof]":["sofa.gif","沙发"],"[{b}:.(]":["weep.gif","泪奔"],"[{b}nob]":["nostbleed.gif","鼻血"],"[{b}glw]":["gallow.gif","我吓死你"],"[{b}thd]":["thunder.gif","被雷到了"],"[{b}pas]":["pass.gif","路过"],"[{b}:?]":["haze.gif","疑惑"],"[{b}mop]":["mop.gif","鬼脸"],"[{b}b4]":["b4.gif","鄙视"],"[{b}^_*]":["lash.gif","讽刺"],"[{b}:(]":["sorry.gif","难过"],"[{b}up]":["up.gif","顶"],"[{b}agi]":["agitation.gif","咱聊聊啊"],"[{b}soy]":["soysauce.gif","打酱油"],"[{b}stg]":["struggle.gif","努力"],"[{b}bj]":["beijing.gif","北京欢迎您"],"[{b}cmp]":["champion.gif","冠军"],"[{b}bdn]":["birdnest.gif","鸟巢"],"[{b}fbi]":["feibi.gif","加油哦"],"[{b}skt]":["skate.gif","滑冰"],"[{b}wuy]":["wuying.gif","无影手"],"[{b}olc]":["olymcheer.gif","奥运加油"]}},LinkFile=Class.create();LinkFile.prototype={initialize:function(a,b){this.options=Object.extend({type:"script",charset:"",noCache:!1,callBack:null},b||{}),this.options.callBack=Object.extend({variable:null,onLoad:null,timeout:2e4,timerStep:500},b.callBack||{}),this.timer=0,this.loadTimer=null,this.options.type=="script"?this.getJs(a.trim()):this.getCss(a.trim()),this.options.callBack.variable&&(this.options.callBack.vars=this.options.callBack.variable.split("."))},stop:function(){clearInterval(this.loadTimer),this.loadTimer=null,this.timer=0;return},doCallback:function(){if(this.options.type!="script"||!this.options.callBack||!this.options.callBack.vars||!this.options.callBack.onLoad){this.stop();return}this.timer+=this.options.callBack.timerStep;if($A(this.options.callBack.vars).any(function(v,i){var _v=this.options.callBack.vars.slice(0,i+1).join(".");return eval("typeof "+_v+'== "undefined"')||eval(_v+"==null")}.bind(this))&&this.timer<this.options.callBack.timeout)return;clearInterval(this.loadTimer),$A(this.options.callBack.vars).all(function(v,i){var _v=this.options.callBack.vars.slice(0,i+1).join(".");return eval("typeof "+_v+'!= "undefined"')&&eval(_v+"!=null")}.bind(this))?this.options.callBack.onLoad():this.timer>=this.options.callBack.timeout&&this.options.callBack.onFailure&&this.options.callBack.onFailure(),this.loadTimer=null,this.timer=0},getJs:function(a){var b=document.getElementsByTagName("head")[0],c=Element.getChildElementByTagName(b,"SCRIPT");$A(c).each(function(b){getFullUrl(b.getAttribute("src")||"")==getFullUrl(a)&&Element.remove(b)}),this._link=document.createElement("script"),this.options.noCache&&(a+=(a.match(/\?/)?"&":"?")+"c="+timeStamp()),this._link.src=a,this._link.type="text/javascript",this.options.charset&&(this._link.charset=this.options.charset),this.options.callBack&&(this.loadTimer=setInterval(function(){this.doCallback()}.bind(this),this.options.callBack.timerStep)),b.appendChild(this._link)},getCss:function(a){var b=document.getElementsByTagName("head")[0],c=Element.getChildElementByTagName(b,"LINK");$A(c).each(function(b){getFullUrl(b.getAttribute("href")||"")==getFullUrl(a)&&Element.remove(b)}),this._link=document.createElement("link"),this.options.noCache&&(a+=(a.match(/\?/)?"&":"?")+"c="+timeStamp()),this._link.href=a,this._link.type="text/css",this._link.rel="stylesheet",this.options.charset&&(this._link.charset=this.options.charset),b.appendChild(this._link)}};var WinMenus={wMenus:[],register:function(a){this.wMenus.push(a)},unregister:function(a){this.wMenus=this.wMenus.reject(function(b){return b==a})}},SelecterMenu=Class.create();SelecterMenu.prototype={initialize:function(a,b,c){this.element=$(a),this.levels=[],this.dataUrl=b,this.options=Object.extend({startId:0,variablePrefix:"sel_",selectPerfix:"sel_level_",defaultActive:[]},c||{}),this.buildLevelOne(0,this.options.startId)},getLevelBySelId:function(a){return this.levels.find(function(b){return b.sel==a})},destroyLevelFollow:function(a){var b=this.levels.length;for(var c=b-1;c>=a;c--)this.destroyLevelOne(c)},destroyLevelOne:function(a){if(!this.levels[a])return;Element.remove(this.levels[a].element),this.levels=this.levels.reject(function(b,c){return c==a})},buildLevelOne:function(a,b){if(!this.levels[a]){var c=document.createElement("span");this.levels[a]={element:c},this.element.appendChild(c)}this.levels[a].selId=b,this.levels[a].element.innerHTML="loading...",this.loadDataOne(a,b)},loadDataOne:function(level,id){this.loadDataHandle&&this.loadDataHandle.stop();var url="";this.dataUrl.constructor==String?(url+=this.dataUrl,url.indexOf("?")>0?url+="&id="+id:url+="?id="+id):this.dataUrl.constructor==Function&&(url=this.dataUrl(id)),eval("typeof "+this.options.variablePrefix+id+' == "undefined"')?this.loadDataHandle=new LinkFile(url,{type:"script",callBack:{variable:this.options.variablePrefix+id,onLoad:this.buildSelOne.bind(this,level),onFailure:this.destroyLevelFollow.bind(this,level)}}):this.buildSelOne(level)},buildSelOne:function(level){var obj_level=this.levels[level];if(!obj_level)return;obj_level.data=eval(this.options.variablePrefix+obj_level.selId);if(!obj_level.data)return;var elm_sel=document.createElement("select");this.levels[level].elm_sel=elm_sel,elm_sel.name=this.options.selectPerfix+level;var i=0;elm_sel.options[i++]=new Option("----","");var cat="";$A(obj_level.data).each(function(a){a.cat&&a.cat!=cat&&(cat=a.cat,elm_sel.options[i++]=new Option("---- == "+a.cat+" == ----","")),elm_sel.options[i++]=new Option(a.name,a.id)}),Event.observe(elm_sel,"change",function(){this.changeOpt(level,elm_sel.value)}.bindAsEventListener(this)),obj_level.element.innerHTML="",obj_level.element.appendChild(elm_sel);try{elm_sel.focus()}catch(e){}},changeOpt:function(a,b){var c=this.levels[a];if(!c)return;this.destroyLevelFollow(a+1);if(!b)return;var d=$A(c.data).find(function(a){return a.id==b});if(!d)return;d.hasC=="1"&&this.buildLevelOne(a+1,b)},getValues:function(){return this.levels.map(function(a){return a.elm_sel?a.elm_sel.value:null})}};var Info={messages:{"blog.name":"博客名称","blog.domain":"个性域名","blog.desc":"博客描述","blog.detailDesc":"主人档案","comment.author.name":"称呼","comment.author.site":"网站链接","comment.author.email":"邮箱","comment.content":"评论内容","comment.vcode":"验证码","message.author.name":"称呼","message.author.site":"网站链接","message.author.email":"邮箱","message.content":"评论内容","message.vcode":"验证码","entry.title":"日志标题","entry.content":"日志内容","entry.excerpt":"日志摘要","entry.keywords":"关键字","category.name":"分类名称","category.desc":"分类描述","mobile.code":"手机号","mobile.vcode":"验证码","module.title":"模块标题","module.data":"模块参数","module.type":"模块类型","link.title":"友情连接名称","link.desc":"友情连接描述","link.url":"友情连接地址","errors.required":"{0}不能为空.","errors.minlength":"{0}不能少于 {1} 个字符","errors.maxlength":"{0}不能大于 {1} 个字符","errors.range":"{0}必须在{1}个字符和{2}个字符之间","errors.email":"{0}不是一个有效的邮件地址","errors.invalid":"{0}无效.","errors.comment.authorname":" 用户名不能为空.","errors.comment.commentcontent":"评论内容不能为空.","errors.comment.maxcommentlength":"评论内容过多，最多为1000字.","errors.comment.maxauthorName":"称呼过长","errors.comment.maxauthorSite":"网站链接过长","errors.comment.maxcommentContent":"评论内容过长","errors.comment.publish.forbidden":"作者不允许对此文进行评论","errors.comment.publish.needlogin":'作者只允许登录用户才可对此文评论。<a href="http://blog.sohu.com/login/logon.do">登录</a>',"errors.message.authorname":" 用户名不能为空.","errors.message.commentcontent":"留言内容不能为空.","errors.message.maxcommentlength":"留言内容过多，最多为1000字.","errors.message.maxauthorName":"称呼过长","errors.message.maxauthorSite":"网站链接过长","errors.message.maxcommentContent":"留言内容过长","errors.message.publish.forbidden":"作者不允许对留言","errors.message.publish.needlogin":'作者只允许登录用户才可留言。<a href="http://blog.sohu.com/login/logon.do">登录</a>',"errors.message.vcode":" 验证码不能为空.","errors.entry.entrytitle":"请填写日志标题.","errors.entry.maxentrytitle":"日志标题过长.","errors.entry.entrycontent":"请填写日志内容.","errors.entry.maxentryexcerpt":"摘要长度过长","errors.entry.maxentrykeywords":"关键字过长","errors.link.unexist":"该好友不存在","errors.link.reach.limit":"您的好友数量已经达到系统上限","errors.module.reach.limit":"您的模块已经达到系统上限","errors.module.attempt.delete.entry":"不能删除日志模块","errors.general":"操作失败","errors.operate.failure":"数据操作失败","errors.rpc":"操作失败，该页暂时不可用","errors.npe":"系统内部错误","errors.forbidden":"操作失败，请检查是否有相应的权限","errors.param":"参数错误","errors.vcode":"验证码错误，请检查您的输入是否与图片中显示的字母一致","errors.domain.format":"个性域名必须是英文和数字","errors.domain.exist":"个性域名已被占用","errors.number.formate":"参数格式错误","errors.blog.unexis":"博客不存在","errors.login.user.unexist":"用户不存在","errors.login.auth":'认证错误。<ul style="margin:0px;padding:0px;"><li>请检查用户名和密码是否正确。</li><li>请检查您的域名是否正确。提示：如果是17173用户，请注意选择“17173用户”项。',"errors.passport.invalid":"非法的用户名","errors.login":"系统内部错误，请稍后重试","errors.activation":'激活失败，请<a href="/login/activation.do">重试</a>',"errors.auto.activation":'自动激活失败，请<a href="/passport">重试</a>',"errors.blog.unexist":"博客不存在","errors.you.have.not.blog":'您还没有自己的博客,<a href="/login/reg.do">现在就去申请</a>',"errors.entry.unexist":"该日志不存在","errors.entry.private":"该日志已被隐藏","errors.archive.unexist":"该归档不存在","errors.category.unexist":"该分类不存在","errors.mobile.invalidvcode":"您输入的验证码不正确！","errors.mobile.mobilecode":"手机号不能为空","errors.mobile.binding":"该手机号{0}已被绑定","errors.keyword.rewrite":"您发表的内容包含敏感关键字！请重新填写。","errors.entry.contribute.duplicate":"对不起,您已经投过稿了,换一篇试试吧","errors.not.ppp":'您还没有升级到玩弄版,无法进行下一步操作, 现在就<a href="http://blog.sohu.com/manage/upgrade.do">升级</a>?',"messages.general":"操作成功","messages.setting.saved":"修改成功","messages.theme.saved":'主题修改成功，您可以<a href="{0}" target="_blank">点击这里</a>查看修改后的结果',"messages.flash.saved":'Flash特效修改成功，您可以<a href="{0}" target="_blank">点击这里</a>查看修改后的结果',"messages.layout.saved":'页面布局修改成功，您可以<a href="{0}" target="_blank">点击这里</a>查看修改后的结果',"messages.entry.saved":'<div class="noticeInfo"><h3>日志保存成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/entry.do?m=edit&id={0}">继续编辑</a></li><li><a href="/manage/entry.do?m=list&t=draft">转到草稿列表页面</a></li><li><a href="/manage/entry.do?m=add">撰写另一篇新日志</a></li></ul></div>',"messages.entry.published":'<div class="noticeInfo"><h3>日志发布成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/entry.do">转到日志列表页面</a></li><li><a href="{0}">查看您刚发表的日志</a></li><li><a href="/manage/entry.do?m=add">撰写另一篇新日志</a></li></ul></div>',"messages.entry.shortcutpublished":'<div class="noticeInfo"><h3>日志发布成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="javascript:closeWin();">关闭本页</a></li><li><a href="{1}">查看我的博客首页</a></li><li><a href="{0}">查看您刚发表的日志</a></li><li><a href="/manage/entry.do?m=add&t=shortcut">撰写另一篇新日志</a></li></ul></div>',"messages.entry.shortcutsaved":'<div class="noticeInfo"><h3>日志保存成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/entry.do?m=edit&id={0}&t=shortcut">继续编辑</a></li><li><a href="/manage/entry.do?m=list&t=draft">转到草稿列表页面</a></li><li><a href="/manage/entry.do?m=add&t=shortcut">撰写另一篇新日志</a></li></ul></div>',"messages.entry.updated":'<div class="noticeInfo"><h3>日志修改成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="{0}">查看您刚修改的日志</a></li><li><a href="/manage/entry.do">转到日志列表页面</a></li></ul></div>',"messages.entry.shortcutupdated":'<div class="noticeInfo"><h3>日志修改成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="javascript:closeWin();">关闭本页</a></li><li><a href="{0}">查看您刚修改的日志</a></li><li><a href="{1}">查看我的博客</a></li></ul></div>',"messages.blog.upgraded":'<div class="noticeInfo"><h3>恭喜您，升级成功！</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="{0}">查看我的博客</a></li><li><a href="javascript:closeWin();">关闭本页</a></li></ul></div>',"messages.blog.down":'<div class="noticeInfo"><h3>降级成功，感谢您的试用</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="{0}">查看我的博客</a></li><li><a href="javascript:closeWin();">关闭本页</a></li></ul></div>',"messages.entry.private":"该日志已被隐藏,只有您自己才能看到","messages.entry.deleted":"日志删除成功","messages.comment.published":'评论发表成功&nbsp;&nbsp;&nbsp;<a href=" http://blog.sohu.com/manage/main.do " target=”_blank” style="color: #069;" onmousedown="CA.a(\'entry_commemt_success\');">查看其他好友的最新日志</a>',"messages.comment.deleted":"评论删除成功","messages.message.published":"留言发表成功","messages.message.deleted":"留言删除成功","messages.category.saved":'<div class="noticeInfo"><h3>分类"{0}"保存成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/category.do">返回列表</a></li><li><a href="manage/category.do?m=add">创建新分类</a></li></ul></div>',"messages.category.updated":'<div class="noticeInfo"><h3>分类"{0}"更新成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/category.do">返回列表</a></li><li><a href="manage/category.do?m=add">创建新分类</a></li></ul></div>',"messages.category.deleted":'分类"{0}"删除成功',"messages.category.added":'<div class="noticeInfo"><h3>分类"{0}"添加成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/category.do">返回列表</a></li><li><a href="manage/category.do?m=add">创建新分类</a></li></ul></div>',"messages.profile.saved":"档案修改成功","messages.entry.contributed":"投稿成功。\n如果该日志被录用，将会被展示在相应频道栏目中。同时管理员会以留言方式通知您。","messages.mobile.setsuccess":'设置成功！您可以通过彩信发表博客日记了<br /><a href="/manage/mobile.do">返回</a>',"messages.mobile.cancelsuccess":'您的手机博客服务已经取消!<br /><a href="/manage/mobile.do">返回</a>'},getCookie:function(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)","gi");return(b=c.exec(unescape(document.cookie)))?b[2]:null},setCookie:function(a,b,c,d,e){var f=a+"="+escape(b);if(c){c=="never"&&(c=5256e4);var g=new Date;g.setTime(g.getTime()+c*60*1e3),f+="; expires="+g.toGMTString()}d&&(f+="; path="+d),e&&(f+="; domain="+e),document.cookie=f},getInfo:function(a){var b=Info.messages[a];return b?b:a},formatMsg:function(a,b){var c=Info.getInfo(a);if(c&&b)for(var d=0;d<b.length;++d)c=c.replace("{"+d+"}",Info.getInfo(b[d]));return c},formatMsgs:function(a,b,c){var d="";for(var e in a){if(b==0){if(e.indexOf("messages")!=0)continue}else if(b==1&&e.indexOf("errors")!=0)continue;var f=a[e];if(f.constructor==Array){var g=Info.formatMsg(e,a[e]);g&&(d+=g,typeof c=="undefined"||c==""?d+="<br />":d+=c)}}return d},readInfo:function(a,b){var c=Info.getCookie("msg");if(c==""||c=="none")return"";var d=Info.htmlInfo(c,a,b);return d&&d.length>0&&Info.setCookie("msg","none","","/","blog.sohu.com"),d},htmlInfo:function(a,b,c){var d=JSON.parse(a);return d?Info.formatMsgs(d,b,c):a},displayMsg:function(){document.write(Info.readInfo(0))},displayErr:function(){document.write(Info.readInfo(1))}},imgSvrAllot={type:{local:"blog.do",avatar:"blogo.do",toolbar:"blog/tbUpload.do",customTheme:"blogbkUpload.do"},getUrl:function(a){var b="http://upload.pp.sohu.com/"+imgSvrAllot.type[a];return b}};setTimeout(function(){var a=jQuery,b="http://i.sohu.com/a/advertise/",c="?cb=?&_input_encode=UTF-8&_output_encode=UTF-8",d=b+"get.htm"+c,e=b+"updesc.htm"+c,f=a(".blog-article-ad-wrapper"),g,h,i,j;$blog_config=window.$blog_config||{};if(!$blog_config.showAd)return;a.ajax({url:d,cache:!0,dataType:"jsonp",jsonpCallback:"callback",data:{xpt:window._upt},success:function(a){f.html(a.data),g=f.find(".title"),h=g.find(".tt-bt"),i=g.find(".tt-bj"),j=g.find("input"),isOwnBlog()&&i.show()}}),f.delegate(".tt-bj","click",function(){h.hide(),j.show()[0].focus(),j.val(h.text())}).delegate("input","blur",function(){var b=j.val();if(b==="")return;if(b.length>20){alert("标题不能超过20个字符");return}a.getJSON(e,{desc:b},function(c){c.status==0?(h.html(b).show(),j.hide()):a.inform({icon:"icon-error",delay:2e3,easyClose:!0,content:"保存失败，稍后再试"})})}),setTimeout(function(){a(".blog-article-insertad").delegate(".img, .info h4 a, .btn-qkk a","click",function(){mysohu.put_log("blog_ad_in")}),a(".blog-article-ad",f).delegate("li a","click",function(a){mysohu.put_log("blog_ad_out")})},2e3)},1e3),~function(){function a(a){return jQuery.browser.msie?document.getElementById(a):document[a]}(function b(){setTimeout(function(){try{var c=document.getElementById("main-content"),d=c.getElementsByTagName("object")[0].id;movie=a(d),movie.musicPlay()}catch(e){b()}},2500)})()}()