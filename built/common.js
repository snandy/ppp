/*! SohuBlog @snandy 2013-06-03 14:51:26 */
function getUserAgent(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("opera")>=0)return"opera";if(e.indexOf("firefox")>=0)return"ff";if(e.indexOf("gecko")>=0)return"moz";if(e.indexOf("msie")){if(ieVer=parseFloat(e.substr(e.indexOf("msie")+5)),ieVer>=6)return"ie6";if(ieVer>=5.5)return"ie55";if(ieVer>=5)return"ie5"}return"other"}function timeStamp(){var e=new Date;return e.getTime()}function getFullUrl(e){return 0==e.indexOf("http://")||0==e.indexOf("https://")?e:0==e.indexOf("/")?location.protocol+"//"+location.host+e:0==e.indexOf("www")?"http://"+e:location.href.substr(0,location.href.lastIndexOf("/")+1)+e}function isLocalFile(e){var t=/^http:\/\/|ftp:\/\/|(https:\/\/)/;return t.test(e)?e.replace(t,"").substr(0,e.replace(t,"").indexOf("/"))==location.host?!0:!1:!0}function getTureLength(e){if(null==e)return null;for(var t=/^[\x00-\xff]+$/,i=0,o=0;e.length>o;o++){var n=e.charAt(o);i+=t.test(n)?1:2}return i}function getUrlParam(e){var t=unescape(location.search);if(t){t=t.substring(1);var i,o=RegExp("(^|&)"+e+"=([^&]*)(&|$)","gi");return i=o.exec(t),i?i[2]:null}}function getPref(e){var t,i,o=RegExp("(^||)"+e+"=([^|]*)(||$)","gi");return getCookie(prefStr)&&(i=getCookie(prefStr),t=o.exec(i))?t[2]:null}function setPref(e,t){var i,o,n,s=RegExp("(^||)"+e+"=([^|]*)(||$)","gi");getCookie(prefStr)?(o=getCookie(prefStr),i=s.exec(o),n=i?o.replace(i[0],e+"="+t):o+"|"+e+"="+t):n=e+"="+t,setCookie(prefStr,n,"never","/","blog.sohu.com")}function getPrefCur(e){var t,i,o=RegExp("(^||)"+e+"=([^|]*)(||$)","gi");return getCookie(prefCurStr)&&(i=getCookie(prefCurStr),t=o.exec(i))?t[2]:null}function setPrefCur(e,t){var i,o,n,s=RegExp("(^||)"+e+"=([^|]*)(||$)","gi");getCookie(prefCurStr)?(o=getCookie(prefCurStr),i=s.exec(o),n=i?o.replace(i[0],e+"="+t):o+"|"+e+"="+t):n=e+"="+t,setCookie(prefCurStr,n,"","/","blog.sohu.com")}function isPPLogin(){var e;return"undefined"!=typeof PassportSC&&(e=getPPP())?!0:!1}function isLogin(){if(isPPLogin()){var e;return(e=getP())&&e==getPPP()&&hasBlog()?!0:!1}return!1}function getProduct(e){return e?"undefined"!=typeof PassportSC&&PassportSC?(PassportSC.cookie&&PassportSC.cookie.service||PassportSC.parsePassportCookie(),0!=PassportSC.cookie.service[e]?PassportSC.cookie.service[e]:!1):!1:!1}function hasBlog(){BlogCookieInfo.cookie&&BlogCookieInfo.cookie.I||BlogCookieInfo.parseCookie();var e=BlogCookieInfo.cookie.I;return null!=e&&""!=e&&"null"!=e?e:!1}function getPPP(){if("undefined"!=typeof PassportSC&&PassportSC&&PassportSC.cookieHandle){var e=PassportSC.cookieHandle();return e.indexOf("@focus.cn")>0&&(e=PassportSC.cookie.uid+"@focus.cn"),e}return""}function getP(){BlogCookieInfo.cookie&&BlogCookieInfo.cookie.P||BlogCookieInfo.parseCookie();var e=BlogCookieInfo.cookie.P,t="";if(e){try{t=b64_decodex(e),0>t.indexOf("@")&&(t="")}catch(i){}return t}return""}function getXP(){return BlogCookieInfo.cookie&&BlogCookieInfo.cookie.ud||BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.P}function getD(){return BlogCookieInfo.cookie&&BlogCookieInfo.cookie.ud||BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.ud}function isMyBlog(){return BlogCookieInfo.cookie&&BlogCookieInfo.cookie.I||BlogCookieInfo.parseCookie(),isLogin()&&hasBlog()&&"undefined"!=typeof _ebi&&_ebi&&BlogCookieInfo.cookie.I==_ebi?!0:!1}function getUserType(){return BlogCookieInfo.cookie&&BlogCookieInfo.cookie.B_TP||BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.B_TP}function getUserName(){return BlogCookieInfo.cookie&&BlogCookieInfo.cookie.name||BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.name}function getUserIco(){return BlogCookieInfo.cookie&&BlogCookieInfo.cookie.ico||BlogCookieInfo.parseCookie(),BlogCookieInfo.cookie.ico}function is17173User(){return getP()&&getP().indexOf("@17173")>0}function getBlogTitle(){return $("blogTitle")?$("blogTitle").lastChild.innerHTML:null}function getBlogLink(){return $("blogTitle")?$("blogTitle").lastChild.href:null}function getBlogDesc(){return $("blogDesc")?$("blogDesc").innerHTML:null}function loginPath(){return"http://blog.sohu.com/login/logon.do?bru="+encodeURIComponent(location.href)}function addToFav(e){if(addToFavFrom=e,e&&("profileWidget"==e.sign||"entryProfile"==e.sign))return checkBlogPM(e),void 0;var t=getBlogTitle(),i=getBlogDesc(),o=getBlogLink();if(!t||!o)return alert("无法获得此站点相应数据"),void 0;ToolBar&&ToolBar.disableBtn(ToolBar.addLink),!e||"profileWidget"!=e.sign&&"entryProfile"!=e.sign||Effect.Appear(e.obj,{from:1,to:.2,duration:.1,queue:{scope:"addFav",position:"end"}}),LoadBar.show("读取中...");var n="/manage/link.do",s="m=add&title="+escape(t)+"&desc="+escape(i.substr(0,64)||"")+"&link="+escape(o)+"&subscribe=1";new Ajax.Request(n,{method:"post",parameters:s,onComplete:doneAddToFav,data:e})}function doneAddToFav(){location.reload()}function checkBlogPM(e){var t=jQuery,i="i-addfriendDis",o=t(e.obj);if(o.hasClass(i))return alert("您已跟随过了"),void 0;var n="/a/app/friend/friend/add.do?",s="xpt="+window._xpt+"&appid=1001";jQuery.getJSON(n+s,function(t){t&&t.data&&(1==t.code?(e.friendId=t.data.friendId,o.addClass(i),addToFavNew(e)):alert(t.msg))})}function addToFavNew(e){var t=FavWin._instance;if(!t){t=new FavWin,FavWin._instance=t;var i={friendId:e.friendId,fnOk:function(){for(var e=$("addFriendForm"),i=e.groups,o="",n="http://i.sohu.com/a/app/friend/update/group/mapping.do",s=0;i.length>s;s++)i[s].checked&&(o+=i[s].value+",");var a="?friendId="+this.friendId+"&groupIds="+o;({friendId:this.friendId,groupIds:o}),o.length>1&&(o=o.substring(0,o.length-1)),jQuery.getJSON(n+a+"&callback=?",function(e){0==e.code?(t.hide(),doneAddToFav()):alert(e.msg)})}};t.show(i),setFriendGroups()}}function setFriendGroups(){var e="/a/app/friend/group/getgroups.do";jQuery.getJSON(e,function(e){if(e&&1==e.code){for(var t=e.data.groups,i="",o=0;t.length>o;o++)i+='<label class="chkbox"><input type="checkbox" name="groups" value="'+t[o].groupId+'">'+t[o].groupName+"</label>";$("addFrindGroupsCtner")&&$("addFrindGroupsCtner").insert(i)}})}function highLightMsg(e){if($(e)){var t=$(e);t.style.borderColor="#29aba3"}}function highLightErr(e){if($(e)){var t=$(e);t.style.borderColor="red"}}function lowLightMsg(e){if($(e)){var t=$(e);t.style.borderColor="#ccc"}}function flashMsg(e){if($(e)){var t=$(e);setTimeout(function(){highLightMsg(t)},0),setTimeout(function(){lowLightMsg(t)},50),setTimeout(function(){highLightMsg(t)},150),setTimeout(function(){lowLightMsg(t)},200),setTimeout(function(){highLightMsg(t)},300),setTimeout(function(){lowLightMsg(t)},350),setTimeout(function(){highLightMsg(t)},450),setTimeout(function(){lowLightMsg(t)},1500)}}function flashErr(e){if($(e)){var t=$(e);setTimeout(function(){highLightErr(t)},0),setTimeout(function(){lowLightMsg(t)},50),setTimeout(function(){highLightErr(t)},150),setTimeout(function(){lowLightMsg(t)},200),setTimeout(function(){highLightErr(t)},300),setTimeout(function(){lowLightMsg(t)},350),setTimeout(function(){highLightErr(t)},450),setTimeout(function(){lowLightMsg(t)},1500)}}function checkLogonForm(e){return 0>=$F("username").length?(alert("请填写用户名"),$("username").focus(),!1):0>=$F("passwd").length?(alert("请填写密码"),$("passwd").focus(),!1):($("reme")&&$F("reme")>=1?(setCookie("username",$F("username"),"never","/","blog.sohu.com"),setCookie("domain",$F("maildomain"),"never","/","blog.sohu.com"),setCookie("rememberme","true","never","/","sohu.com")):(setCookie("username","","never","/","blog.sohu.com"),setCookie("domain","","never","/","blog.sohu.com"),setCookie("rememberme","false","never","/","sohu.com")),$("loginid").value=$F("username")+$F("maildomain"),setParm(e),e.Submit.disabled="disabled",$("submitInfo").style.visibility="visible",!0)}function setLogonForm(){$("username").value=getCookie("username")||"";for(var e=0;$("maildomain").options.length>e;e++)if($("maildomain").options[e].value==getCookie("domain")){$("maildomain").options[e].selected=!0;break}"true"==getCookie("rememberme")&&($("reme").checked=!0,$("passwd").select(),$("passwd").focus())}function getLogonForm(){var e='<form action="http://passport.sohu.com/login.jsp" method="post" target="_top" name="form_login" id="form_login" onsubmit="return checkLogonForm(this)"><input type="hidden" name="loginid" id="loginid" value="" /><table width="100%" border="0" cellspacing="2" cellpadding="0"><tr><td nowrap="nowrap"><label for="username" class="redfont">用户名</label></td><td><input name="username" type="text" class="text" id="username" value="" /> <select name="maildomain" id="maildomain" class="text"><option value="@sohu.com" selected="selected">@sohu.com</option><option value="@chinaren.com">@chinaren.com</option><option value="@vip.sohu.com">@vip.sohu.com</option><option value="@sms.sohu.com">@sms.sohu.com</option><option value="@sol.sohu.com">@sol.sohu.com</option><option value="@sogou.com">@sogou.com</option><option value="@17173.com">17173用户</option></select></td></tr><tr><td nowrap="nowrap"><label for="passwd" class="redfont">密　码</label></td><td><input name="passwd" type="password" class="text" id="passwd" value="" /></td></tr><tr><td></td><td><input name="Submit" id="Submit" type="submit" class="button-submit" value=" 登  录 " />你是新人吗？<a href="/login/reg.do">立刻申请</a><br /><span class="notice" id="submitInfo" style="visibility: hidden">正在登录，请稍候……</span></td></tr><tr><td colspan="2"><label for="save"><input name="reme" type="checkbox" id="reme" value="1" />记住我的登录状态(在公共计算机上请慎用此功能)</label></td></tr></table></form>';return e}function initHead(){new App.EditableText($("blogTitle"),{defaultValue:"搜狐博客",maxLenght:12,editStyle:"editableText",onChange:response}),new App.EditableText($("blogDesc"),{type:"area",defaultValue:"每个人都有属于自己的一片森林，迷失的人迷失了，相逢的人会再相逢。",maxLenght:100,editStyle:"editableArea",onChange:response})}function insertMngOpr(){if(isMyBlog()&&3!=getUserType()&&$("mngOpr")){var e=$("mngOpr"),t="";-1!=window.location.href.indexOf("/entry/")&&(t+='<a href="http://blog.sohu.com/manage/entry.do?m=add&t=shortcut" class="navNewEntry" onmousedown="CA.q(\'blog_nav_newEntry\');" target="_blank">撰写新日志</a>'),t+=' <a href="http://blog.sohu.com/manage/main.do?tracker=myblog" class="navSysOpt" onmousedown="CA.q(\'blog_myHome\');">进入我的搜狐</a>',e.innerHTML||(e.innerHTML=t)}}function gotoBlog(){window.open("http://blog.sohu.com/manage/main.do","blogWin")}function gotoPP(){window.open("http://pp.sohu.com/passport","ppWin")}function gotoMusic(){window.open("http://mbox.sogou.com/mbox.so","musicWin")}function gotoVideo(){window.open("http://v.blog.sohu.com/passport","videoWin")}function getPageText(e,t,i,o,n,s){if(e=$(e)){0==n&&(n=1);var a=Math.ceil(i/o);a=a||1;var r="";r+="共"+a+"页",r+="&nbsp;&nbsp;|&nbsp;&nbsp;",n==t?(r+="第一页",r+="&nbsp;",r+="上一页"):(r+='<a href="javascript:void(0)" onclick="'+s+"("+t+');return false;">第一页</a>',r+="&nbsp;",r+='<a href="javascript:void(0)" onclick="'+s+"("+(n-1)+');return false;">上一页</a>'),r+="&nbsp;";for(var l=t;a>=l;l++)l==n?(r+=l,r+="&nbsp;"):l>=n-5&&n+5>=l?(r+='<a href="javascript:void(0)" onclick="'+s+"("+l+');return false;">['+l+"]</a>",r+="&nbsp;"):(l==n-6||l==n+6)&&(r+="...&nbsp;");n==a?(r+="下一页",r+="&nbsp;",r+="最末页"):(r+='<a href="javascript:void(0)" onclick="'+s+"("+(n+1)+');return false;">下一页</a>',r+="&nbsp;",r+='<a href="javascript:void(0)" onclick="'+s+"("+a+');return false;">最末页</a>'),e.innerHTML=r}}function chageEntryPage(e){return curPage=e||0,getEntryList(curPage,category,tag),getPageText(pageTextContainer,startPage,totalCount,itemPerPage,curPage,chagePageAction),!1}function chageRecmdEntryPage(e){return curPage=e||0,getEntryList(curPage,category,tag,"recmd"),getPageText(pageTextContainer,startPage,totalCount,itemPerPage,curPage,chagePageAction),!1}function getEntryList(e,t,i,o){e>0&&LoadBar.show("读取中..."),o=o||"frag";var n="/action/v_"+o+"-ebi_"+escape(_ebi);e>1&&(n+="-pg_"+e),t>0&&(n+="-c_"+t),n+="/entry/";var s="";i&&(s+="tag="+escape(i)),isMyBlog()&&(s+=s?"&o=true":"o=true"),$("entryList")&&new Ajax.Updater("entryList",n,{method:"get",parameters:s,onComplete:entryLoaded})}function entryLoaded(){setTimeout(LoadBar.hide,500),jumpAnchor&&setTimeout(function(){location.hash="#entry"},600),jumpAnchor=!0,Entries.insertItemOpr(),Entries.insertItemReadCount(),Entries.insertItemCmtCount(jQuery("#entryList")[0])}function getConDataUrl(e){return"http://act.blog.sohu.com/blog-contri/cata/con_"+e+".js"}function showBlogStat(){function e(){if(_blog_domain){var e="http://stat.pic.sohu.com/blogcount?u="+_blog_domain+"&t=json&t="+(new Date).getTime();new Groj(e,{variable:"rctVisitCount",onSuccess:function(){$("statusCount")&&window.rctVisitCount&&($("statusCount").innerHTML="",$("statusCount").innerHTML="访问："+window.rctVisitCount)}})}else $("statusCount").innerHTML=""}var t="/action/ebi_"+_ebi+"-m_view-type_statsnocomments/widget/";new Ajax.Request(t,{method:"get",parameters:"",onComplete:function(t){if(200==t.status){var i=t.responseText;$("sideBlogStat").innerHTML=i,$("statusCount").innerHTML="访问：数据加载中",e()}}})}function getCommontList2(e){var t="http://i.sohu.com/a/app/discuss/indexBlogList.htm?_input_encode=UTF-8",i="blog_"+entryId+"_0_"+_upt,o=e||1,n=10;t+="&ids="+i,t+="&page="+o,t+="&sz="+n,jQuery.getJSON(t+"&callback=?",function(e){if(e&&e.discusss&&e.discusss.length){commentListEl||(commentListEl=$("commentlist")),commentListEl.innerHTML="",Comments.list(e);var t=1,i=e.discusscount;getPageText(pageTextContainer,t,i,n,o,chagePageAction),setTimeout(Comments.insertCmtOpr.bind(Comments),10)}})}function getCommontList(e,t,i,o){t>0&&LoadBar.show("读取中..."),t=t||1;var n="/action/m_list-id_"+e+"-cc_"+i+"-pg_"+t+"/comment/",s="";o&&(s="nc=true"),$("commentlist")&&new Ajax.Updater("commentlist",n,{method:"get",parameters:s,onComplete:commontLoaded})}function commontLoaded(){setTimeout(LoadBar.hide,500),jumpAnchor&&setTimeout(function(){location.hash="#comment"},600),jumpAnchor=!0,setTimeout(Comments.insertCmtOpr.bind(Comments),10),setTimeout(Comments.insertIconInfo.bind(Comments),10),setTimeout(Comments.initCandleMen.bind(Comments),10)}function chagePage(e){return curPage=e||0,"undefined"==typeof blogId?getCommontList(entryId,curPage,totalCount,noCache):getCommontList2(curPage),!1}function isOwnBlog(){var e=Base64.encode(PassportSC.cookieHandle());return"undefined"!=typeof _upt&&_upt==e?!0:!1}function commonLogin(e,t){e=e||"",jQuery.ppDialog&&jQuery.ppDialog({appId:"1001",title:"想要发表您的观点吗，马上登录吧！",onLogin:function(){return isOwnBlog()?(location.reload(),void 0):(t&&t(),e&&(0>location.href.indexOf(e)&&(location.href=location.href+e),location.reload()),void 0)}})}function parseTitle(e){if(e){var t="",i=/@{[^{]*}/g;return t=e.replace(i,function(e){var t=e.replace("@","");try{var i=jQuery.parseJSON(t)}catch(o){return e}return"@"+i.snick})}}function setCPShow(){var e=jQuery,t=e("#commentForm")[0];isPPLogin()||(t.innerHTML='由于最近广告泛滥，暂只允许登录用户对此文评论。<a href="javascript://">登录</a>'),e("a",t).click(function(){commonLogin("#commentbox")})}function checkCForm(){function e(e){if(0==e.code){chagePage();var t=$("commentContent");t&&(t.value="",t.focus())}else alert(e.msg||"评论失败，请稍后再试")}var t=$F("commentContent");if(0==t.length)return alert("评论内容不能为空"),$("commentContent").focus(),!1;if(t.length>300)return alert("评论内容过多，最多为300字"),$("commentContent").focus(),!1;var i="/a/app/discuss/save.htm?_input_encode=UTF-8",o=jQuery("[name=replytopassport]").val(),n=jQuery("[name=replytodiscussid]").val(),s={from:"oldBlog",appid:"blog",discusstype:"0",content:t,itemid:entryId};""!==o&&"回复@"==t.substr(0,3)&&(s.replytopassport=o,s.replytodiscussid=n),jQuery.ajax({type:"POST",url:i,data:s,success:e,dataType:"json"})}function getFilterEmotionText(e){return e=e||"",e=e.replace(/ec\=(\"|)([^\"\s]*)(\"|)/g,"> $2 <"),e=e.replace(/\<[^\<\>]*\>/g,""),e=e.replace(/ +/g," "),e=e.replace(/\n+/g,"\n"),e=e.replace(/^\n*/gm,""),e=e.replace(/^\s*/gm,""),e=e.replace(/\n*$/gm,""),e=e.replace(/\s*$/gm,"")}function getMessageList(e,t){e>0&&LoadBar.show("读取中..."),e=e||1;var i="/action/ebi_"+_ebi+"-pg_"+e+"-v_frag/message/",o="";t&&(o="o=true"),$("messagelist")&&new Ajax.Updater("messagelist",i,{method:"get",parameters:o,onComplete:messageLoaded})}function messageLoaded(){setTimeout(LoadBar.hide,500),jumpAnchor&&setTimeout(function(){location.hash="#top"},600),jumpAnchor=!0,setTimeout(Message.insertMsgOpr.bind(Message),10),setTimeout(Message.insertMsgReplyOpr.bind(Message),10),setTimeout(Comments.insertIconInfo.bind(Comments),10),setTimeout(Comments.initCandleMen.bind(Comments),10)}function chageMsgPage(e){return curPage=e||0,getMessageList(curPage,noCache),getPageText(pageTextContainer,startPage,totalCount,itemPerPage,curPage,chagePageAction),!1}function replyM(e){var t=$(Message.MSG_PREFIX+e),i=Element.getParentElementByClassName(t,"info-content"),o=document.getElementsByClassName("msgReplyForm",i)[0],n=document.getElementsByClassName("msgOpr",i)[0],s=document.getElementsByClassName("msgReply",i)[0];if("true"!=t.getAttribute("on")){t.setAttribute("on","true");var a="";s&&(divMsgReplyContent=document.getElementsByClassName("msgReplyContent",i)[0],divMsgReplyContent&&(a=getFilterEmotionText(divMsgReplyContent.innerHTML.convertHTMLToText())),Element.hide(s)),o.innerHTML=getReplyMForm(e,a,n.getAttribute("ebi")&&n.getAttribute("ebi").length>0),Element.show(o)}else t.setAttribute("on","false"),s&&Element.show(s),o.innerHTML="",Element.hide(o)}function getReplyMForm(e,t,i){t=t||"";var o="";return o+='<div class="info-title"><h3>博主回复：</h3></div>',o+='<div class="msgReplyContent">',o+='<form action="/page/message.do" method="post" onsubmit="return checkMRForm(this)">',o+='<input type="hidden" name="ebi" value="'+_ebi+'" />',o+='<input type="hidden" name="replyId" value="'+e+'" />',o+='<input type="hidden" name="m" value="reply" />',o+='<textarea name="messageContent" rows="8" class="text" style="width:95%">'+t+"</textarea>",i&&(o+='<br /><input type="checkbox" name="notify" id="notifyEle" checked="checked" value="true" />同时回复到对方留言板<br />'),o+='<input type="submit" name="submit" value="回 复" class="button-submit" /> <input type="button" name="cls" value="取 消" class="button" onclick="replyM('+e+')" />',o+="<form>",o+="</div>"}function checkMRForm(e){var t=Form.getElements(e).find(function(e){return"messageContent"==e.name});return 0==$F(t).length?(alert("回复内容不能为空"),t.focus(),!1):$F(t).length>1e3?(alert("回复内容过多（"+$F("messageContent").length+"字），最多为1000字"),t.focus(),!1):void 0}function getPPSelect(){if("undefined"==typeof ppuserid||!ppuserid)return"";var e="";e+='<select name="ppSource" id="ppSource" onchange="setPPSource()">',e+='<option value="http://pp.sohu.com/photolist-list-4-'+ppuserid+'-1.html" selected="selected">全部</option>';for(var t=0;photosets.length>t;t++){var i=photosets[t];i.id&&(e+='<option value="http://pp.sohu.com/set-view-'+i.id+"-"+ppuserid+'-4-1.html">'+i.name+"</option>")}return e+="</select>"}function getPPLabel(){if("undefined"==typeof ppuserid||!ppuserid)return"";var e="";return e+='<a href="http://pp.sohu.com/setlist.jhtml?method=list&userId='+ppuserid+'" target="_blank" class="contentLabel" onfocus="this.blur();">转到图片公园</a>'}function getPPBigFlash(e){if("undefined"==typeof ppuserid||!ppuserid)return $(e).innerHTML="暂时无法获取数据，请稍后再试",void 0;if(0>ppuserid)return $(e).innerHTML="还未开通相册",void 0;if($(e)){var t="";t+='<object id="myFlash" width=720 height=550 classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0">',t+='<param name="movie" value="http://js4.pp.sohu.com.cn/ppp/blog/flash/show20060525.swf">',t+='<param name="wmode" value="opaque">',t+='<param name="quality" value="autohigh">',t+='<param id="flashvars" name="flashvars" value="urlA=http://pp.sohu.com/photolist-list-4-'+ppuserid+'-1.html"/>',t+='<embed width="720" height="550" src="http://js4.pp.sohu.com.cn/ppp/blog/flash/show20060525.swf?urlA=http://pp.sohu.com/photolist-list-4-'+ppuserid+'-1.html" quality="autohigh" wmode="opaque" type="application/x-shockwave-flash" plugspace="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" name="myFlash" swLiveConnect="true"> </embed>',t+="</object>",$(e).innerHTML=t}}function getMusicSelect(e){if(!e||""==e.responseText)return"没有获得音乐盒数据";if(!e.responseXML||!e.responseXML.documentElement)return"分析音乐盒数据失败";var t=e.responseXML,i=t.getElementsByTagName("musiclist"),o="";o+='<select name="musicSource" id="musicSource" onchange="setMusicSource()">';for(var n=0;i.length>n;n++){var s=i[n];s.getAttribute("sogouurl")&&(o+='<option value="'+s.getAttribute("sogouurl").replace("&amp;","&")+'">'+s.getAttribute("name")+"</option>")}return o+="</select>"}function setCmtEmoEvent(){for(var e=0;$("emotionBox").childNodes.length>e;e++){var t=$("emotionBox").childNodes[e];t.onclick=function(){Emotion.insert2frm(this.getAttribute("ec"),$("commentContent"))}}}function getIntervalTime(e){var t=new Date,i=t.getTime()-e,o=Math.floor(i/6e4),n=Math.floor(o/60),s=Math.floor(n/24),a="";return s>=1&&(a+=s,a+="天"),48>n&&n>0&&n%24>0&&(a+=n%24,a+="小时"),0==n&&2>=o%60?"刚刚":(24>n&&o>0&&(a+=o%60,a+="分钟"),a+="前")}function getNavIco(e,t){e&&""!=e||(e=58);var i="";return 0!=e&&(i+='<img class="pageIcon" src="http://js5.pp.sohu.com.cn/ppp/blog/styles_ppp/images/custom/icons/'+icoLib[e]+'" title="'+t+'" />'),i}var Browser={};Browser.ua=getUserAgent();var prefStr="Pref",prefCurStr="PrefCur",BlogCookieInfo={cookie:{},parseCookie:function(){if(!getCookie("bloginfo"))return!1;var e=getCookie("bloginfo").split("|");e[0]&&(this.cookie.P=e[0]),e[1]&&(this.cookie.I=e[1]),e[2]&&(this.cookie.ud=e[2]),e[3]&&(this.cookie.B_TP=e[3]),e[4]&&(this.cookie.name=unescape(e[4])),e[5]&&(this.cookie.ico=e[5])},clear:function(){this.cookie={}}},addToFavFrom=null,FavWin=Class.create({initialize:function(){this.box=new Element("div"),this.box.setStyle({display:"none",position:"absolute",zIndex:"2000"}),this.box.innerHTML='<table class="mwinnew mwin3" id="addFriendWin">			<thead><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></thead>			<tfoot><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></tfoot>			<tbody><tr><td class="bx"></td>					<td class="by">						<div class="mwt">							<div class="ttl"><span>添加关注</span><a href="javascript:void(0);" class="mw_close" title="关闭"><b>关闭</b></a></div>						</div>						<div class="mw">							<div class="mwc">								<form action="" method="post" name="addFriendForm" id="addFriendForm">								<div class="repost">										<div class="mwc2" >											<p>选择分组</p>											<div class="frmc" id="addFrindGroupsCtner"></div>											<form ><div class="mwc21" style="height:30px;">												或 <a style="line-height:30px;color:#017AD7" href="#" onclick="$(\'newGroupCtn\').toggle();return false;">新建分组</a><span id="newGroupCtn" style="display:none"><input type="text" name="gname" class="txt">												<p><a href="#" class="fgyes"><b>确定</b></a><a href="#" onclick="$(\'newGroupCtn\').toggle();return false;" class="fgno"><b>取消</b></a></p></span>											</div></form>										</div>								</div>								<div class="post">									<p class="btns2"><span class="opt"></span><a class="btn" href="javascript:void(0);"><b>确 定</b></a><a class="btn btn_dis" href="javascript:void(0);"><b>取 消</b></a></p>								</div>								</form>							</div>						</div></td>					<td class="bz"></td>				</tr>			</tbody>		</table>',this.closeBtn=this.box.down("a.mw_close"),this.cancelBtnCtner=this.box.down("a.btn_dis"),this.okBtn=this.box.down("a.btn"),this.cancelBtn=this.box.down("a.btn",1),this.titleDiv=this.box.down("span"),this.noticeDiv=this.box.down("div.repost_c"),document.body.appendChild(this.box),this.cancelBtn.observe("click",this.hide.bind(this)),this.closeBtn.observe("click",this.hide.bind(this));var e=this.box.down(".fgyes");Event.observe(e,"click",this.addGroup.bindAsEventListener(this))},show:function(e){e=Object.extend({type:"alert",title:"",notice:"",fnOk:function(){}},e||{}),this.okBtn.observe("click",function(){e.fnOk()}),this.cancelBtnCtner.show();var t=Dom.getCenterPos(this.box);this.box.setStyle({top:t.top+"px",left:t.left+"px"}),this.box.show(),this.okBtn.focus()},hide:function(){this.box.remove(),this.reset(),FavWin._instance=null},reset:function(){this.okBtn.stopObserving("click")},addGroup:function(event){var srcEle=Event.element(event);Event.stop(event);var form=srcEle.up("form"),gname=form.gname.value.trim();if(""==gname)return alert("请输入分组名称"),void 0;var pars="gname="+encodeURIComponent(gname),addGroupUrl="/a/app/friend/group/add.do";new Ajax.Request(addGroupUrl,{method:"post",parameters:pars,onComplete:function(response){if(200!=response.status)return alert("服务器返回异常，请稍后重试"),void 0;if(eval("var json="+response.responseText),json){if(1!=json.code)return alert(json.statusText),void 0;form.gname.value="";var str='<label class="chkbox"><input type="checkbox" name="groups" checked value="'+json.data.gid+'">'+json.data.gname+"</label>";$("addFrindGroupsCtner").insert(str),$("newGroupCtn").hide()}}.bind(this)})}});flashMsg("message"),flashErr("errormsg");var Starter={funs:[],add:function(e){this.funs||(this.funss=[]),this.funs.push(e)},start:function(){!this.funs||0>=this.funs.length||$A(this.funs).each(function(e){e()})}},LoadBar={show:function(e,t){clearTimeout(this.timeout),e=e||("undefined"!=typeof App&&App.Lang&&App.Lang.loading?App.Lang.loading:"loading..."),this.build(e),"ok"==t?Element.addClassName(this.element,"okBar"):Element.removeClassName(this.element,"okBar"),Element.show(this.element),this.element.style.right="0px",this.element.style.top=document.documentElement.scrollTop+30+"px",this.showStatusBar(e)},hide:function(e){LoadBar.element&&(LoadBar.timeout=setTimeout(function(){LoadBar.element&&Element.hide(LoadBar.element),LoadBar.hideStatusBar()},e&&!isNaN(e)?e:0))},destroy:function(){this.element&&(Element.remove(this.element),this.element=null)},build:function(e){if(this.element)return this.element.firstChild.firstChild.alt=e,this.element.firstChild.childNodes[1].nodeValue=e,void 0;this.element=document.createElement("div"),Element.addClassName(this.element,"loadBar"),this.element.style.zIndex=1e3,this.element.style.position="absolute",Element.hide(this.element);var t=document.createElement("div"),i="undefined"!=typeof App&&App.Actions&&App.Actions.imgPath?App.Actions.imgPath+"loading.gif":"http://js2.pp.sohu.com.cn/ppp/blog/styles_ppp/images/loading.gif";t.innerHTML='<img src="'+i+'" alt="text" />'+e,this.element.appendChild(t),document.body.appendChild(this.element)},showStatusBar:function(e){setTimeout(function(){window.status=e},10)},hideStatusBar:function(){setTimeout(function(){window.status=""},10)},loadPage:function(){this.show("请稍候，正在下载...")}};Starter.add(LoadBar.hide),$("_preLoadText")&&(Element.hide($("_preLoadText")),LoadBar.loadPage()),Starter.add(insertMngOpr);var Entries={ITEM_PREFIX:"itemId_",ITEMCMTCOUNT_PREFIX:"itemCmtCount_",ITEMREADCOUNT_PREFIX:"itemReadCount_",itemReadCountUrl:"http://ana.blog.sohu.com/blogcount",entries:[],insertItemOpr:function(e){if(isMyBlog()){var t=[];t=document.getElementsByClassName("itemOpr"),0>=t.length||$A(t).each(function(t){if(t&&t.id&&0==t.id.indexOf(this.ITEM_PREFIX)){var i=t.id.substr(this.ITEM_PREFIX.length),o="";o+='<a href="http://blog.sohu.com/manage/entry.do?m=edit&id='+i+'&t=shortcut" target="_blank">',o+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_edit.gif" title="修改" />',o+="</a>",o+='<a href="http://blog.sohu.com/manage/entry.do?m=delete&id='+i,e!==void 0&&""!=e&&(o+="&from="+e),o+='" onclick="return confirm("确认要删除吗？")">',o+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_del.gif" title="删除" />',o+="</a>",t.innerHTML||(t.innerHTML=o)}}.bind(this))}},insertItemCmtCount:function(e){var t=jQuery,i=t(".itemCmtCount",e);t("input",e);var o=t(".item-label",e).map(function(){return t("[id]",this).attr("id").replace("itemId","blog")}).get().join(","),n="http://cc.i.sohu.com/a/app/mblog/getCounts.htm?_input_encode=UTF-8&callback=?";t.getJSON(n,{ids:o,callback:"?"},function(e){i.each(function(t,i){var o=(i.getAttribute("id")||"").replace("itemCmtCount_","");o&&(i.innerHTML=e[o].commentcount)})})},entriesReadCount:{},insertItemReadCount:function(from){var itemIds=[];if($A(document.getElementsByClassName("itemReadCount")).each(function(e){if(e&&e.id&&0==e.id.indexOf(this.ITEMREADCOUNT_PREFIX)){var t=e.id.substr(this.ITEMREADCOUNT_PREFIX.length),i=this.entriesReadCount[t];void 0===i||null==i||isNaN(i)?t&&itemIds.push(t):e.innerHTML&&"?"!=e.innerHTML||(e.innerHTML=i)}}.bind(this)),itemIds.length>0){var ts=timeStamp(),vn="Blog.ercs_"+ts;if("view"==from)var dataURL=this.itemReadCountUrl+"?e="+itemIds[0]+"&vn="+ts;else var dataURL=this.itemReadCountUrl+"?l="+itemIds.join(",")+"&vn="+ts;new LinkFile(dataURL,{type:"script",noCache:!0,callBack:{variable:vn,onLoad:function(){this.entriesReadCount=Object.extend(this.entriesReadCount,eval(vn)||{}),this.insertItemReadCount(from)}.bind(this)}})}},clearReadCount:function(e){e?this.entriesReadCount[e]=null:(this.entriesReadCount=null,this.entriesReadCount={})},getConEntrySubMenuData:function(e){var t=document.createElement("div");t.className="menuInnerSub-div clearfix";var i=[];return i.push('<form method="post" onsubmit="return false;">'),i.push('<table cellpadding="2" cellspacing="5">'),i.push("<tr><td>"),i.push('<div class="infoBox">您可以在发表日志的同时，投稿给我们。<br />如果该日志被录用，将会被展示在相应频道栏目中。同时管理员会以留言方式通知您。<br /><br />提示：每篇日志只能投稿一次，欢迎原创，谢绝转载</div>'),i.push("</td></tr>"),i.push("<tr><td>"),i.push("请选择投稿栏目:"),i.push('<input type="hidden" name="id" value="'+e+'" />'),i.push('<input type="hidden" name="contrChId" value="" />'),i.push('<input type="hidden" name="contrCataId" value="" />'),i.push("</td></tr>"),i.push("<tr><td>"),i.push("</td></tr>"),i.push("<tr><td>"),i.push('<input type="submit" value=" 投 稿 " class="button-submit" />'),i.push(' <input type="button" value="取消" class="button" />'),i.push('<span style="display:none;">loading...</span>'),i.push("</td></tr>"),i.push("</table>"),i.push("</form>"),t.innerHTML=i.join(""),this.entries[e].conForm=t.firstChild,this.entries[e].conChIpt=t.firstChild.firstChild.rows[1].cells[0].childNodes[1],this.entries[e].conCataIpt=t.firstChild.firstChild.rows[1].cells[0].childNodes[2],this.entries[e].conSelBox=t.firstChild.firstChild.rows[2].cells[0],this.entries[e].conSubBtn=t.firstChild.firstChild.rows[3].cells[0].firstChild,this.entries[e].conCanBtn=t.firstChild.firstChild.rows[3].cells[0].getElementsByTagName("input")[1],this.entries[e].conSubLoadText=t.firstChild.firstChild.rows[3].cells[0].lastChild,Event.observe(this.entries[e].conForm,"submit",this.conSubmit.bind(this,e)),Event.observe(this.entries[e].conCanBtn,"click",function(){this.entries[e].conEntryMenu.hide()}.bind(this)),setTimeout(this.setConSelecter.bind(this,e),10),t},setConSelecter:function(e){this.entries[e].conSelecterMenu=new SelecterMenu(this.entries[e].conSelBox,getConDataUrl,{startId:conStartId,variablePrefix:"con_",selectPerfix:"con_level_"})},conSubmit:function(e){var t=this.entries[e],i=t.conSelecterMenu.getValues();if(!i[i.length-1]||""==i[i.length-1]||"56_allGame"==i[i.length-1]){alert("请选择投稿栏目");try{t.conSelecterMenu.levels[t.conSelecterMenu.levels.length-1].elm_sel.focus()}catch(o){t.conSelecterMenu.levels[t.conSelecterMenu.levels.length-2].elm_sel.focus()}return!1}t.conSubBtn.disabled=!0,t.conCanBtn.disabled=!0,Element.show(t.conSubLoadText);var n="/manage/entry.do";if(is17173User())var s="m=contribute&id="+e+"&contrChId="+conStartId+"&contrCataId="+i[i.length-1];else var s="m=contribute&id="+e+"&contrChId="+i[0]+"&contrCataId="+i[i.length-1];new Ajax.Request(n,{method:"get",parameters:s,onComplete:this.okConSubmit.bind(this),data:e})},okConSubmit:function(e,t,i){if(!e||!e.responseText||0!==e.responseText.indexOf("<")||!e.responseXML)return this.errorConSubmit(e),void 0;var o=e.responseXML,n=Element.getChildValueByTagName(o,"code")[0],s=Element.getChildValueByTagName(o,"message")[0].trim();return n===void 0||s===void 0?this.errorConSubmit(e):("200"==n?alert(Info.htmlInfo(unescape(s),0," ")):alert(Info.htmlInfo(unescape(s),1," ")),this.endConSubmit(i),void 0)
},errorConSubmit:function(e){alert("Error: The resource file is not well-formed.\n"+e.responseText)},endConSubmit:function(e){var t=this.entries[e];t.conSubBtn.disabled=!1,t.conCanBtn.disabled=!1,Element.hide(t.conSubLoadText),t.conEntryMenu.hide()}};if(is17173User())var conStartId=56;else var conStartId=0;var PTags={getTags:function(e,t){if(e){"number"!=typeof t.max&&(t.max=-1),e.innerHTML="正在加载...";var i="http://ptag.blog.sohu.com/btags/"+_ebi+"/all/";new LinkFile(i,{type:"script",noCache:isMyBlog(),callBack:{variable:"BlogPtags.tags_abc",onLoad:this.showAbc.bind(this,e,t),onFailure:this.noData.bind(this,e,t)}})}},showAbc:function(e,t){if(!BlogPtags.tags_abc||0>=BlogPtags.tags_abc.length)return e.innerHTML="暂无标签",void 0;var i="";i+='<ul class="ptags">';var o=0,n=t.max,s=this.getItemStr;this.getLevels(BlogPtags.tags_abc).each(function(e){if(-1!=n&&o++>=n)throw $break;i+=s(e)}),i+="</ul>",-1!=n&&o>=n&&(i+='<div style="cursor:pointer;float:right;">查看全部标签</div>'),e.innerHTML=i,-1!=n&&o>=20&&Event.observe(e.lastChild,"click",this.showAllAbc.bind(this,e)),t&&t.onOkShow&&t.onOkShow()},showAllAbc:function(e){var t="";t+='<ul class="ptags">';var i=this.getItemStr;this.getLevels(BlogPtags.tags_abc).each(function(e){t+=i(e)}),t+="</ul>",e.innerHTML=t},getItemStr:function(e){var t='<li class="ptag_'+e.level+'">';return t+='<a href="'+_blog_base_url+"tag/"+e.encode+'/" title="'+e.count+'篇">',t+=e.tag,t+="</a>",t+="</li>"},noData:function(e,t){e.innerHTML="暂时无法获取数据，请稍后再试",t&&t.onErrorShow&&t.onErrorShow()},getLevels:function(e){var t=e.max(function(e){return parseInt(e.count)}),i=e.min(function(e){return parseInt(e.count)}),o=[];return o[0]=Math.floor(.9*(t-i))+i,o[1]=Math.floor(.7*(t-i))+i,o[2]=Math.floor(.4*(t-i))+i,e.map(function(e){return e.level=e.count>o[0]?4:e.count>o[1]?3:e.count>o[2]?2:1,e})}};setTimeout(function(){function e(){var e={sign:"entryProfile",obj:t[0]};addToFav(e)}if(window.jQuery){var t=jQuery("a.i-addfriend");t[0]&&t.click(function(){CA.q("blog_entry_profile_addFriend"),isPPLogin()?e():commonLogin("",e)})}},1500);var commentListEl,Comments={CMT_PREFIX:"cmtId_",CMTICO_PREFIX:"icoId_",CMTICOIMG:"http://js1.pp.sohu.com.cn/ppp/blog/images/common/nobody.gif",insertCmtOpr:function(){if(isMyBlog()){var e=[];if(e=document.getElementsByClassName("cmtOpr"),!(1>e.length))for(var t=0;e.length>t;t++){var i=' |<a href="javascript://" action="delete">';i+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_del.gif" title="删除" align="absbottom">',i+="</a>",e[t].innerHTML||(e[t].innerHTML=i)}}},insertIconInfo:function(){if(isLogin()&&hasBlog()){var e=[];if(e=document.getElementsByClassName("cmtIco"),!(0>=e.length))for(var t=0;e.length>t;t++)if(e[t]&&e[t].id&&0==e[t].id.indexOf(this.CMTICO_PREFIX)){var i=e[t].id.substr(this.CMTICO_PREFIX.length),o=e[t].getElementsByTagName("img")[0];if(i==hasBlog()&&o&&o.src==this.CMTICOIMG){var n="";n+='<a href="http://blog.sohu.com/manage/profile.do" target="_blank" title="上传我的头像">',n+='<img src="'+this.CMTICOIMG+'" />',n+="<span>上传头像</span></a>",e[t].innerHTML=n}}}},initCandleMen:function(){SohuIM.setCandleMenParam();try{void 0!=typeof sohuim&&sohuim&&sohuim.candleArmy&&sohuim.candleArmy.RenderAll&&sohuim.candleArmy.RenderAll(webim_config.cm_container,webim_config.product)}catch(e){}},buildOne:function(e){var t=[],i=this.parseContent(e.content);return t.push('<div class="info-content" cid="'+e.id+'">'),t.push('<div style="margin-bottom: 10px;">'+i+"</div>"),t.push('<div class="cmtIco">'),t.push('<a title="'+e.unick+'" target="_blank" href="'+e.ulink+'">'),t.push('<img src="'+e.uavatar+'"></a></div>'),t.push('<div class="info-title">'),t.push('<h3>发布者 <a target="_blank" href="'+e.ulink+'">'+e.unick+"</a>"),t.push('<a href="javascript:void(0)" param="'+e.passport+";"+e.unick+'" rel="'+e.ulink+";"+e.unick+'" name="onlineIcon" '+'_webim_ppid="'+e.ulink+'">'),t.push('<img src="http://images.sohu.com/cs/sohuim/em/user_off_0.gif" height="12px" border="0"></a>'),t.push("("+e.ulink+")<br>"+timeUtil.get_timeago(e.createtime)+"</h3>"),t.push('<div style="margin-top:16px;" class="item-label">'),t.push('<a href="javascript://" action="reply">回复</a><span class="cmtOpr"></span></div></div>'),t.push('<div class="clear"></div></div>'),t.push("<hr>"),t.join("")},parseContent:function(e){if("string"==typeof e){var t=this.parseEmote(e);t=parseTitle(t);var i=t.indexOf("@"),o=t.indexOf("：");if(-1==i||-1==o)return t;var n=t.substring(i,o),s=n.substring(1),a='<a target="_blank" href="http://i.sohu.com/nick/'+s+'">'+n+"</a>";return t.replace(RegExp(n),a)}},parseEmote:function(e){var t=/(\[[^\[\]]+\])/g,i=e.match(t);if(!i)return e;for(var o="",n=0,s=i.length;s>n;n++){var a,r,l=i[n],c="";if(l in emoteData.base?(a=emoteData.base[l],r=emoteBaseUrl):l in emoteData.fox?(a=emoteData.fox[l],r=emoteFoxUrl):l in emoteData.pafu&&(a=emoteData.pafu[l],r=emotePafuUrl),!a)return e;c='<img src="'+r+a[0]+'" title="'+a[1]+'">',o=o?o.replace(l,c):e.replace(l,c)}return o},one:function(e){commentListEl||(commentListEl=$("commentlist")),str=Comments.buildOne(e),jQuery(commentListEl).append(str)},list:function(e){e.discusscount&&($("discusscount").innerHTML=e.discusscount);for(var t=0,i=e.discusss.length;i>t;t++)this.one(e.discusss[t])},addEvent:function(){if("undefined"!=typeof jQuery){var e=jQuery;$commentlist=e("#commentlist"),$commentlist.delegate("[action=reply]","click",function(t){var i=$("commentContent");if(!isLogin())return commonLogin("#commentbox"),void 0;i||alert("抱歉，由于博主的设置，您暂时无法评论");var o=e(t.target).closest(".info-content"),n=o.children()[0];getFilterEmotionText(n.innerHTML);var s=e(t.target).closest(".info-content").find(".info-title").find("h3").find("a"),a=s.first().html();i.value="",i.value+="回复@"+a+"：",i.focus();try{var r=i.createTextRange();r.moveStart("character",i.value.length),r.collapse(!0),r.select()}catch(t){}var l=s.last().attr("param").split(";")[0];e("[name=replytopassport]").val(l),e("[name=replytodiscussid]").val(o.attr("cid"))}),$commentlist.delegate("[action=delete]","click",function(t){var i=e(t.target).closest(".info-content"),o=i.attr("cid"),n="http://i.sohu.com/a/app/discuss/delete.htm?_input_encode=UTF-8";n+="&ids="+o+"_"+_upt,confirm("确认要删除吗？")&&e.getJSON(n+"&callback=?",function(e){0==e.code&&(i.next().remove(),i.remove())})})}}};setTimeout(function(){Comments.addEvent()},1500);var ArticleContent={playEmbed:function(e,t){if($(e)){var i="";i+="<embed "+t.replace(/'/,'"')+"></embed>",Element.replace($(e),i)}}},timeUtil={serverTime:(new Date).getTime(),timeOffset:0,setServerTime:function(e){e?(this.serverTime=e,this.timeOffset=(new Date).getTime()-e):this.serverTime=(new Date).getTime()-this.timeOffset},get_timeago:function(e){this.setServerTime();var t="",i=1e3,o=60*i,n=60*o,s=this.serverTime,a=new Date(s),r=a.getFullYear(),l=a.getMonth(),c=a.getDate(),g=new Date(r,l,c),u=g.getTime(),d=s-e;if(0>d)t="";else if(5*o>d)t="刚刚";else if(n>d){var f=Math.floor(d/o);t=f+"分钟前"}else if(s-u>d){var m=new Date(e),h=m.getHours(),p=m.getMinutes();10>h&&(h="0"+h),10>p&&(p="0"+p),t="今日 "+h+":"+p}else{var m=new Date(e),v=m.getMonth()+1,b=m.getDate(),h=m.getHours(),p=m.getMinutes();10>v&&(v="0"+v),10>b&&(b="0"+b),10>h&&(h="0"+h),10>p&&(p="0"+p),t=v+"月"+b+"日 "+h+":"+p}return t}},Message={MSG_PREFIX:"msgId_",MSGREPLY_PREFIX:"msgReplyId_",insertMsgOpr:function(){if(isMyBlog()){var e=[];if(e=document.getElementsByClassName("msgOpr"),!(0>=e.length))for(var t=0;e.length>t;t++)if(e[t]&&e[t].id&&0==e[t].id.indexOf(this.MSG_PREFIX)){var i=e[t].id.substr(this.MSG_PREFIX.length),o="";o+='<a href="javascript:void(0)" onclick="replyM('+i+',this.parentNode)">回复</a> ',o+='|<a href="/manage/message.do?m=delete&id='+i+'" onclick="return confirm("确认要删除吗？")">',o+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_del.gif" alt="删除" align="absbottom" />',o+="</a>",e[t].innerHTML||(e[t].innerHTML=o)}}},insertMsgReplyOpr:function(){if(isMyBlog()){var e=[];if(e=document.getElementsByClassName("msgReplyOpr"),!(0>=e.length))for(var t=0;e.length>t;t++)if(e[t]&&e[t].id&&0==e[t].id.indexOf(this.MSGREPLY_PREFIX)){var i=e[t].id.substr(this.MSGREPLY_PREFIX.length),o="";o+='<a href="/manage/message.do?m=delete&id='+i+'" onclick="return confirm("确认要删除吗？")">',o+='<img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_del.gif" alt="删除" align="absbottom" />',o+="</a>",e[t].innerHTML||(e[t].innerHTML=o)}}}},Emotion={iconPath:"http://js3.pp.sohu.com.cn/ppp/images/emotion/",lib:[["[:)]","0.gif","微笑"],["[#_#]","1.gif","谄媚"],["[8*)]","2.gif","偷笑"],["[:D]","3.gif","大笑"],["[:-)]","4.gif","害羞"],["[:P]","5.gif","调皮"],["[B_)]","6.gif","得意"],["[B_I]","7.gif","耍酷"],["[^_*]","8.gif","讽刺"],["[:$]","9.gif","委屈"],["[:|]","10.gif","郁闷"],["[:(]","11.gif","难过"],["[:.(]","12.gif","流泪"],["[:_(]","13.gif","大哭"],["[):(]","14.gif","发火"],["[:V]","15.gif","咒骂"],["[*_*]","16.gif","发呆"],["[:^]","17.gif","不惑"],["[:?]","18.gif","疑惑"],["[:!]","19.gif","吃惊"],["[=:|]","20.gif","流汗"],["[:%]","21.gif","尴尬"],["[:O]","22.gif","惊恐"],["[:X]","23.gif","闭嘴"],["[|-)]","24.gif","犯困"],["[:Z]","25.gif","睡觉"],["[:9]","26.gif","馋"],["[:T]","27.gif","吐"],["[:-*]","28.gif","耳语"],["[*_/]","29.gif","海盗"],["[:#|]","30.gif","重伤"],["[:69]","31.gif","拥抱"],["[//shuang]","32.gif","爽"],["[//qiang]","33.gif","强"],["[//ku]","34.gif","酷"],["[//zan]","35.gif","赞"],["[//heart]","36.gif","红心"],["[//break]","37.gif","心碎"],["[//F]","38.gif","花开"],["[//W]","39.gif","花谢"],["[//mail]","40.gif","邮件"],["[//strong]","41.gif","手势-棒"],["[//weak]","42.gif","手势-逊"],["[//share]","43.gif","握手"],["[//phone]","44.gif","电话"],["[//mobile]","45.gif","手机"],["[//kiss]","46.gif","嘴唇"],["[//V]","47.gif","V"],["[//sun]","48.gif","太阳"],["[//moon]","49.gif","月亮"],["[//star]","50.gif","星星"],["[(!)]","51.gif","灯泡"],["[//TV]","52.gif","电视"],["[//clock]","53.gif","闹钟"],["[//gift]","54.gif","礼物"],["[//cash]","55.gif","现金"],["[//coffee]","56.gif","咖啡"],["[//rice]","57.gif","饭"],["[//watermelon]","58.gif","西瓜"],["[//tomato]","59.gif","番茄"],["[//pill]","60.gif","药丸"],["[//pig]","61.gif","猪头"],["[//football]","62.gif","足球"],["[//shit]","63.gif","便便"]],getEmotion:function(e){for(var t=0;this.lib.length>t;t++){var i=this.lib[t];if(i[0]==e)return i}return null},getEmotionIcons:function(){for(var e="",t=0;this.lib.length>t;t++){var i=this.lib[t];e+='<img src="'+this.iconPath+i[1]+'" alt="'+i[0]+'" ec="'+i[0]+'" />'}return e},insert2frm:function(e,t){if(e=" "+e+" ",t.createTextRange&&t.caretPos){var i=t.caretPos;i.text=" "==i.text.charAt(i.text.length-1)?e+" ":e,t.focus()}else t.value+=e,t.focus()}},CorEntry={getEntries:function(e,t,i,o,n){if(this.element=e,!t||0>=i||0>=o)return"system"==n?this.noEntriesBySys():this.noEntriesByPsn(),void 0;if(t=t.split(/,|，| |　/),0==t.length)return"system"==n?this.noEntriesBySys():this.noEntriesByPsn(),void 0;var s=t.splice(0,i);"system"==n?this.getDataBySys(s,o):this.getDataByPsn(s,o)},getDataBySys:function(e,t){var i="http://tag.blog.sohu.com/"+encodeURIComponent(escape(e.join(" ")))+"/json/";new LinkFile(i,{type:"script",noCache:isMyBlog(),callBack:{variable:"blogTag.posts",onLoad:this.showEntriesBySys.bind(this,t),onFailure:this.noEntriesBySys.bind(this)}})},showEntriesBySys:function(e){if(!blogTag||!blogTag.posts||0==blogTag.posts.length)return this.noEntriesBySys(),void 0;try{var t="";t+='<div class="item-title">',t+="<h3>其他博客也发表了类似文章（"+getIntervalTime(blogTag.posts[0].pub)+"）</h3>",t+='<div class="clear"></div>',t+="</div>",t+="<div>";var i=0,o="http://"+_blog_domain+".blog.sohu.com/";if(blogTag.posts.each(function(n){if(n.blog_link.indexOf(o)>=0)throw $continue;if(i++,i>e)throw $break;t+='<div class="tagEntry">',t+='<div class="tagEntry_authorPic"><a href="'+n.blog_link+'" target="_blank"><img src="'+n.blog_icon+'" alt="'+n.blog_name+'" /></a></div>',t+='<h5><a href="'+n.blog_link+'" target="_blank" class="tagEntry_authorName">'+n.blog_name+'</a>：<a href="'+n.permlink+'" target="_blank" class="tagEntyr_title">'+n.title+'</a><span class="tagEntry_pubTime">'+getIntervalTime(n.pub)+"</span></h5>",t+='<div class="tagEntry_content">'+n.excerpt+"...</div>",t+="</div>"}),!(i>0))return errorLoadTagList(),void 0;$("tagsBox")&&(t+='<div class="tagListMore">查看更多：'+$("tagsBox").innerHTML+"</div>"),t+="</div>",this.element.innerHTML=t,Element.show(this.element)}catch(n){this.noEntriesBySys()}},noEntriesBySys:function(){this.getSysRecTags(this.element)},getSysRecTags:function(e){var t="/inc/home/tag_index.inc";if($(e)){var i=document.createElement("div");i.id="rec",i.className="clearfix",new Ajax.Updater(i,t,{method:"get"}),e.appendChild(i),Element.show(e)}},getDataByPsn:function(e,t){this.inTagsByPsn=e,this.useInTagIndexByPsn=0,this.outEntriesByPsn=[],this.outNumByPsn=t,this.getOneDataByPsn()},getOneDataByPsn:function(){if(this.inTagsByPsn.length>0&&this.useInTagIndexByPsn<this.inTagsByPsn.length&&this.outEntriesByPsn.length<this.outNumByPsn){var ts=timeStamp(),dataURL="http://ptag.blog.sohu.com/ptags/"+_ebi+"/"+encodeURI(escape(this.inTagsByPsn[this.useInTagIndexByPsn]))+"/"+ts+"/";new LinkFile(dataURL,{type:"script",noCache:isMyBlog(),callBack:{variable:"BlogPtags.entries_"+ts,onLoad:function(){this.outEntriesByPsn=this.getTureEntriesByPerson(this.outEntriesByPsn.concat(eval("BlogPtags.entries_"+ts+".entries"))),this.useInTagIndexByPsn++,this.getOneDataByPsn()}.bind(this),onFailure:this.noEntriesByPsn.bind(this)}})}else this.showEntriesByPsn()},showEntriesByPsn:function(){try{if(this.outEntriesByPsn.length>0){var e="";e+='<div class="item-title clearfix">',e+="<h3>相关文章</h3>",e+="<span>(根据该日志的标签，发现博主还有如下日志与本文相关)</span>",e+="</div>",e+='<ul class="corEntry">',this.outEntriesByPsn.each(function(t,i){if(i>=this.outNumByPsn)throw $break;e+="<li>",e+='<a href="'+t.permanLink+'" target="_blank" title="'+t.title+" ---- "+getIntervalTime(t.timestamp)+'">',e+=t.title,e+="</a>",e+="</li>"}.bind(this)),e+="</ul>",this.element.innerHTML=e,Element.show(this.element)}else this.noEntriesByPsn()}catch(t){this.noEntriesByPsn()}},noEntriesByPsn:function(){var e=document.createElement("div");e.id="rec",e.className="clearfix",PTags.getTags(e,{onOkShow:function(){this.element.appendChild(e),Element.show(this.element)}.bind(this)})},getTureEntriesByPerson:function(e){var t=[];return e.each(function(e){if(t.any(function(t){return t.entryId==e.entryId}))throw $continue;if(e.entryId==entryId)throw $continue;t.push(e)}),t}},icoLib=["none.gif","anchor.gif","attach.gif","basket.gif","bomb.gif","book.gif","book_addresses.gif","book_open.gif","brick.gif","briefcase.gif","bug.gif","cake.gif","calendar_view_day.gif","calendar_view_month.gif","camera.gif","car.gif","cd.gif","chart_bar.gif","chart_curve.gif","chart_organisation.gif","chart_pie.gif","clock.gif","clock_red.gif","cog.gif","coins.gif","color_swatch.gif","comment.gif","computer.gif","connect.gif","creditcards.gif","door.gif","door_open.gif","drink.gif","drink_empty.gif","email.gif","email_open.gif","email_open_image.gif","emoticon_evilgrin.gif","emoticon_grin.gif","emoticon_happy.gif","emoticon_smile.gif","emoticon_surprised.gif","emoticon_tongue.gif","emoticon_unhappy.gif","emoticon_waii.gif","emoticon_wink.gif","exclamation.gif","eye.gif","feed.gif","flag_blue.gif","flag_green.gif","flag_orange.gif","flag_pink.gif","flag_purple.gif","flag_red.gif","flag_yellow.gif","folder.gif","heart.gif","house.gif","image.gif","information.gif","ipod.gif","keyboard.gif","layout.gif","lightbulb.gif","lightbulb_off.gif","lock.gif","lock_open.gif","lorry.gif","lorry_flatbed.gif","magnifier.gif","money.gif","money_dollar.gif","money_euro.gif","money_pound.gif","money_yen.gif","monitor.gif","mouse.gif","music.gif","new.gif","note.gif","page.gif","page_copy.gif","page_white.gif","page_white_acrobat.gif","page_white_code.gif","page_white_compressed.gif","page_white_excel.gif","page_white_flash.gif","page_white_php.gif","page_white_picture.gif","page_white_powerpoint.gif","page_white_text.gif","page_white_word.gif","page_white_world.gif","palette.gif","paste_plain.gif","pencil.gif","phone.gif","photo.gif","picture.gif","printer.gif","printer_empty.gif","rainbow.gif","rosette.gif","server.gif","shield.gif","sport_8ball.gif","sport_basketball.gif","sport_football.gif","sport_golf.gif","sport_raquet.gif","sport_shuttlecock.gif","sport_soccer.gif","sport_tennis.gif","star.gif","stop.gif","tag_blue.gif","tag_green.gif","tag_orange.gif","tag_pink.gif","tag_purple.gif","tag_red.gif","tag_yellow.gif","telephone.gif","television.gif","thumb_down.gif","thumb_up.gif","trash.gif","tux.gif","user.gif","user_female.gif","user_gray.gif","user_green.gif","user_orange.gif","user_red.gif","user_suit.gif","vcard.gif","weather_clouds.gif","weather_cloudy.gif","weather_lightning.gif","weather_rain.gif","weather_snow.gif","weather_sun.gif","world.gif","zoom.gif","chinaren.gif","olympic.gif"],emoteBaseUrl="http://js3.pp.sohu.com.cn/ppp/images/emotion/base/",emoteFoxUrl="http://js3.pp.sohu.com.cn/ppp/images/emotion/s/",emotePafuUrl="http://js3.pp.sohu.com.cn/ppp/images/emotion/b/",emoteData={base:{"[:)]":["smile.gif","微笑"],"[#_#]":["flatter.gif","谄媚"],"[8*)]":["titter.gif","偷笑"],"[:D]":["spit.gif","大笑"],"[:-)]":["shame.gif","害羞"],"[:P]":["naughty.gif","调皮"],"[B_)]":["complacent.gif","得意"],"[B_I]":["cool.gif","耍酷"],"[^_*]":["lash.gif","讽刺"],"[:$]":["complaint.gif","委屈"],"[:|]":["gloomy.gif","郁闷"],"[:(]":["sorry.gif","难过"],"[:.(]":["weep.gif","泪奔"],"[:_(]":["cry.gif","大哭"],"[):(]":["detonate.gif","发火"],"[:V]":["curse.gif","咒骂"],"[*_*]":["muzzy.gif","发呆"],"[:^]":["misunderstand.gif","不懂"],"[:?]":["haze.gif","疑惑"],"[:!]":["surprise.gif","吃惊"],"[=:|]":["perspire.gif","流汗"],"[:%]":["embarrassed.gif","尴尬"],"[:O]":["fright.gif","惊恐"],"[:X]":["stopper.gif","闭嘴"],"[|-)]":["yawn.gif","犯困"],"[:Z]":["sleep.gif","睡觉"],"[:9]":["greedy.gif","馋"],"[:T]":["puke.gif","吐"],"[:-*]":["whisper.gif","耳语"],"[*_/]":["pirate.gif","海盗"],"[:#|]":["bandage.gif","重伤"],"[:69]":["hug.gif","拥抱"],"[//shuang]":["comfortably.gif","爽"],"[//qiang]":["strong.gif","强"],"[//ku]":["cool2.gif","酷"],"[//zan]":["good.gif","赞"],"[//heart]":["heart.gif","红心"],"[//break]":["hearted.gif","心碎"],"[//F]":["blow.gif","花开"],"[//W]":["fade.gif","花谢"],"[//mail]":["mail.gif","邮件"],"[//strong]":["fine.gif","手势-棒"],"[//weak]":["bad.gif","手势-逊"],"[//share]":["share.gif","握手"],"[//phone]":["phone.gif","电话"],"[//mobile]":["mobile.gif","手机"],"[//kiss]":["lip.gif","嘴唇"],"[//V]":["victory.gif","V"],"[//sun]":["sun.gif","太阳"],"[//moon]":["moon.gif","月亮"],"[//star]":["star.gif","星星"],"[(!)]":["bulb.gif","灯泡"],"[//TV]":["tv.gif","电视"],"[//clock]":["clock.gif","闹钟"],"[//gift]":["gift.gif","礼物"],"[//cash]":["cash.gif","现金"],"[//coffee]":["coffee.gif","咖啡"],"[//rice]":["dining.gif","饭"],"[//watermelon]":["watermelon.gif","西瓜"],"[//tomato]":["tomato.gif","番茄"],"[//pill]":["pill.gif","药丸"],"[//pig]":["pig.gif","猪头"],"[//football]":["football.gif","足球"],"[//shit]":["shit.gif","便便"]},fox:{"[{s}//pig]":["pig.gif","猪头"],"[{s}//heart]":["heart.gif","红心"],"[{s}B_I]":["cool.gif","耍酷"],"[{s}snt]":["snot.gif","鼻涕"],"[{s}=:|]":["perspire.gif","流汗"],"[{s}8*)]":["titter.gif","偷笑"],"[{s}elv]":["elvis.gif","猫王"],"[{s}nob]":["nostbleed.gif","鼻血"],"[{s}:D]":["spit.gif","大笑"],"[{s}lny]":["loney.gif","坏笑"],"[{s}:_(]":["cry.gif","大哭"],"[{s}rdf]":["redflag.gif","红旗"],"[{s}:9]":["greedy.gif","馋"],"[{s}:|]":["gloomy.gif","郁闷"],"[{s}//shit]":["shit.gif","便便"],"[{s}ctm]":["contemn.gif","蔑视"],"[{s}plg]":["plunger.gif","搋子"],"[{s}:Z]":["sleep.gif","睡觉"],"[{s}:#|]":["bandage.gif","重伤"],"[{s}:?]":["haze.gif","疑惑"],"[{s}ft]":["faint.gif","晕"],"[{s}//zan]":["good.gif","赞"],"[{s}epd]":["explode.gif","爆炸"],"[{s}//share]":["share.gif","握手"],"[{s}:$]":["complaint.gif","委屈"],"[{s}drk]":["drink.gif","饮料"],"[{s}brs]":["brushing.gif","刷牙"],"[{s}//rice]":["dining.gif","饭"],"[{s}bra]":["bra.gif","胸罩"],"[{s}spk]":["speaker.gif","喇叭"],"[{s}//clock]":["clock.gif","闹钟"],"[{s}xms]":["xmas.gif","圣诞"],"[{s}bsk]":["basketball.gif","篮球"],"[{s}flw]":["floweret.gif","小花"],"[{s}ber]":["beer.gif","啤酒"],"[{s}cak]":["cake.gif","蛋糕"],"[{s}chr]":["cheer.gif","加油"],"[{s}oly]":["olympic.gif","奥运"],"[{s}tor]":["torch.gif","火炬"],"[{s}up]":["up.gif","顶"]},pafu:{"[{b}hi]":["hi.gif","HI"],"[{b}ok]":["ok.gif","OK"],"[{b}fco]":["faceoff.gif","变脸"],"[{b}:T]":["puke.gif","吐"],"[{b}:D]":["spit.gif","大笑"],"[{b}):(]":["detonate.gif","发火"],"[{b}:!]":["surprise.gif","吃惊"],"[{b}bet]":["beat.gif","扁人"],"[{b}ft]":["faint.gif","晕"],"[{b}gdn]":["goodnight.gif","晚安"],"[{b}#_#]":["flatter.gif","谄媚"],"[{b}=:|]":["perspire.gif","流汗"],"[{b}sof]":["sofa.gif","沙发"],"[{b}:.(]":["weep.gif","泪奔"],"[{b}nob]":["nostbleed.gif","鼻血"],"[{b}glw]":["gallow.gif","我吓死你"],"[{b}thd]":["thunder.gif","被雷到了"],"[{b}pas]":["pass.gif","路过"],"[{b}:?]":["haze.gif","疑惑"],"[{b}mop]":["mop.gif","鬼脸"],"[{b}b4]":["b4.gif","鄙视"],"[{b}^_*]":["lash.gif","讽刺"],"[{b}:(]":["sorry.gif","难过"],"[{b}up]":["up.gif","顶"],"[{b}agi]":["agitation.gif","咱聊聊啊"],"[{b}soy]":["soysauce.gif","打酱油"],"[{b}stg]":["struggle.gif","努力"],"[{b}bj]":["beijing.gif","北京欢迎您"],"[{b}cmp]":["champion.gif","冠军"],"[{b}bdn]":["birdnest.gif","鸟巢"],"[{b}fbi]":["feibi.gif","加油哦"],"[{b}skt]":["skate.gif","滑冰"],"[{b}wuy]":["wuying.gif","无影手"],"[{b}olc]":["olymcheer.gif","奥运加油"]}},LinkFile=Class.create();LinkFile.prototype={initialize:function(e,t){this.options=Object.extend({type:"script",charset:"",noCache:!1,callBack:null},t||{}),this.options.callBack=Object.extend({variable:null,onLoad:null,timeout:2e4,timerStep:500},t.callBack||{}),this.timer=0,this.loadTimer=null,"script"==this.options.type?this.getJs(e.trim()):this.getCss(e.trim()),this.options.callBack.variable&&(this.options.callBack.vars=this.options.callBack.variable.split("."))},stop:function(){clearInterval(this.loadTimer),this.loadTimer=null,this.timer=0},doCallback:function(){return"script"==this.options.type&&this.options.callBack&&this.options.callBack.vars&&this.options.callBack.onLoad?(this.timer+=this.options.callBack.timerStep,$A(this.options.callBack.vars).any(function(v,i){var _v=this.options.callBack.vars.slice(0,i+1).join(".");return eval("typeof "+_v+'== "undefined"')||eval(_v+"==null")}.bind(this))&&this.timer<this.options.callBack.timeout||(clearInterval(this.loadTimer),$A(this.options.callBack.vars).all(function(v,i){var _v=this.options.callBack.vars.slice(0,i+1).join(".");return eval("typeof "+_v+'!= "undefined"')&&eval(_v+"!=null")}.bind(this))?this.options.callBack.onLoad():this.timer>=this.options.callBack.timeout&&this.options.callBack.onFailure&&this.options.callBack.onFailure(),this.loadTimer=null,this.timer=0),void 0):(this.stop(),void 0)},getJs:function(e){var t=document.getElementsByTagName("head")[0],i=Element.getChildElementByTagName(t,"SCRIPT");$A(i).each(function(t){getFullUrl(t.getAttribute("src")||"")==getFullUrl(e)&&Element.remove(t)}),this._link=document.createElement("script"),this.options.noCache&&(e+=(e.match(/\?/)?"&":"?")+"c="+timeStamp()),this._link.type="text/javascript",this.options.charset&&(this._link.charset=this.options.charset),this._link.src=e,this.options.callBack&&(this.loadTimer=setInterval(function(){this.doCallback()}.bind(this),this.options.callBack.timerStep)),t.appendChild(this._link)},getCss:function(e){var t=document.getElementsByTagName("head")[0],i=Element.getChildElementByTagName(t,"LINK");$A(i).each(function(t){getFullUrl(t.getAttribute("href")||"")==getFullUrl(e)&&Element.remove(t)}),this._link=document.createElement("link"),this.options.noCache&&(e+=(e.match(/\?/)?"&":"?")+"c="+timeStamp()),this._link.href=e,this._link.type="text/css",this._link.rel="stylesheet",this.options.charset&&(this._link.charset=this.options.charset),t.appendChild(this._link)}};var WinMenus={wMenus:[],register:function(e){this.wMenus.push(e)},unregister:function(e){this.wMenus=this.wMenus.reject(function(t){return t==e})}},SelecterMenu=Class.create();SelecterMenu.prototype={initialize:function(e,t,i){this.element=$(e),this.levels=[],this.dataUrl=t,this.options=Object.extend({startId:0,variablePrefix:"sel_",selectPerfix:"sel_level_",defaultActive:[]},i||{}),this.buildLevelOne(0,this.options.startId)},getLevelBySelId:function(e){return this.levels.find(function(t){return t.sel==e})},destroyLevelFollow:function(e){for(var t=this.levels.length,i=t-1;i>=e;i--)this.destroyLevelOne(i)},destroyLevelOne:function(e){this.levels[e]&&(Element.remove(this.levels[e].element),this.levels=this.levels.reject(function(t,i){return i==e}))},buildLevelOne:function(e,t){if(!this.levels[e]){var i=document.createElement("span");this.levels[e]={element:i},this.element.appendChild(i)}this.levels[e].selId=t,this.levels[e].element.innerHTML="loading...",this.loadDataOne(e,t)},loadDataOne:function(level,id){this.loadDataHandle&&this.loadDataHandle.stop();var url="";this.dataUrl.constructor==String?(url+=this.dataUrl,url+=url.indexOf("?")>0?"&id="+id:"?id="+id):this.dataUrl.constructor==Function&&(url=this.dataUrl(id)),eval("typeof "+this.options.variablePrefix+id+' == "undefined"')?this.loadDataHandle=new LinkFile(url,{type:"script",callBack:{variable:this.options.variablePrefix+id,onLoad:this.buildSelOne.bind(this,level),onFailure:this.destroyLevelFollow.bind(this,level)}}):this.buildSelOne(level)},buildSelOne:function(level){var obj_level=this.levels[level];if(obj_level&&(obj_level.data=eval(this.options.variablePrefix+obj_level.selId),obj_level.data)){var elm_sel=document.createElement("select");this.levels[level].elm_sel=elm_sel,elm_sel.name=this.options.selectPerfix+level;var i=0;elm_sel.options[i++]=new Option("----","");var cat="";$A(obj_level.data).each(function(e){e.cat&&e.cat!=cat&&(cat=e.cat,elm_sel.options[i++]=new Option("---- == "+e.cat+" == ----","")),elm_sel.options[i++]=new Option(e.name,e.id)}),Event.observe(elm_sel,"change",function(){this.changeOpt(level,elm_sel.value)}.bindAsEventListener(this)),obj_level.element.innerHTML="",obj_level.element.appendChild(elm_sel);try{elm_sel.focus()}catch(e){}}},changeOpt:function(e,t){var i=this.levels[e];if(i&&(this.destroyLevelFollow(e+1),t)){var o=$A(i.data).find(function(e){return e.id==t});o&&"1"==o.hasC&&this.buildLevelOne(e+1,t)}},getValues:function(){return this.levels.map(function(e){return e.elm_sel?e.elm_sel.value:null})}};var Info={messages:{"blog.name":"博客名称","blog.domain":"个性域名","blog.desc":"博客描述","blog.detailDesc":"主人档案","comment.author.name":"称呼","comment.author.site":"网站链接","comment.author.email":"邮箱","comment.content":"评论内容","comment.vcode":"验证码","message.author.name":"称呼","message.author.site":"网站链接","message.author.email":"邮箱","message.content":"评论内容","message.vcode":"验证码","entry.title":"日志标题","entry.content":"日志内容","entry.excerpt":"日志摘要","entry.keywords":"关键字","category.name":"分类名称","category.desc":"分类描述","mobile.code":"手机号","mobile.vcode":"验证码","module.title":"模块标题","module.data":"模块参数","module.type":"模块类型","link.title":"友情连接名称","link.desc":"友情连接描述","link.url":"友情连接地址","errors.required":"{0}不能为空.","errors.minlength":"{0}不能少于 {1} 个字符","errors.maxlength":"{0}不能大于 {1} 个字符","errors.range":"{0}必须在{1}个字符和{2}个字符之间","errors.email":"{0}不是一个有效的邮件地址","errors.invalid":"{0}无效.","errors.comment.authorname":" 用户名不能为空.","errors.comment.commentcontent":"评论内容不能为空.","errors.comment.maxcommentlength":"评论内容过多，最多为1000字.","errors.comment.maxauthorName":"称呼过长","errors.comment.maxauthorSite":"网站链接过长","errors.comment.maxcommentContent":"评论内容过长","errors.comment.publish.forbidden":"作者不允许对此文进行评论","errors.comment.publish.needlogin":'作者只允许登录用户才可对此文评论。<a href="http://blog.sohu.com/login/logon.do">登录</a>',"errors.message.authorname":" 用户名不能为空.","errors.message.commentcontent":"留言内容不能为空.","errors.message.maxcommentlength":"留言内容过多，最多为1000字.","errors.message.maxauthorName":"称呼过长","errors.message.maxauthorSite":"网站链接过长","errors.message.maxcommentContent":"留言内容过长","errors.message.publish.forbidden":"作者不允许对留言","errors.message.publish.needlogin":'作者只允许登录用户才可留言。<a href="http://blog.sohu.com/login/logon.do">登录</a>',"errors.message.vcode":" 验证码不能为空.","errors.entry.entrytitle":"请填写日志标题.","errors.entry.maxentrytitle":"日志标题过长.","errors.entry.entrycontent":"请填写日志内容.","errors.entry.maxentryexcerpt":"摘要长度过长","errors.entry.maxentrykeywords":"关键字过长","errors.link.unexist":"该好友不存在","errors.link.reach.limit":"您的好友数量已经达到系统上限","errors.module.reach.limit":"您的模块已经达到系统上限","errors.module.attempt.delete.entry":"不能删除日志模块","errors.general":"操作失败","errors.operate.failure":"数据操作失败","errors.rpc":"操作失败，该页暂时不可用","errors.npe":"系统内部错误","errors.forbidden":"操作失败，请检查是否有相应的权限","errors.param":"参数错误","errors.vcode":"验证码错误，请检查您的输入是否与图片中显示的字母一致","errors.domain.format":"个性域名必须是英文和数字","errors.domain.exist":"个性域名已被占用","errors.number.formate":"参数格式错误","errors.blog.unexis":"博客不存在","errors.login.user.unexist":"用户不存在","errors.login.auth":'认证错误。<ul style="margin:0px;padding:0px;"><li>请检查用户名和密码是否正确。</li><li>请检查您的域名是否正确。提示：如果是17173用户，请注意选择“17173用户”项。',"errors.passport.invalid":"非法的用户名","errors.login":"系统内部错误，请稍后重试","errors.activation":'激活失败，请<a href="/login/activation.do">重试</a>',"errors.auto.activation":'自动激活失败，请<a href="/passport">重试</a>',"errors.blog.unexist":"博客不存在","errors.you.have.not.blog":'您还没有自己的博客,<a href="/login/reg.do">现在就去申请</a>',"errors.entry.unexist":"该日志不存在","errors.entry.private":"该日志已被隐藏","errors.archive.unexist":"该归档不存在","errors.category.unexist":"该分类不存在","errors.mobile.invalidvcode":"您输入的验证码不正确！","errors.mobile.mobilecode":"手机号不能为空","errors.mobile.binding":"该手机号{0}已被绑定","errors.keyword.rewrite":"您发表的内容包含敏感关键字！请重新填写。","errors.entry.contribute.duplicate":"对不起,您已经投过稿了,换一篇试试吧","errors.not.ppp":'您还没有升级到玩弄版,无法进行下一步操作, 现在就<a href="http://blog.sohu.com/manage/upgrade.do">升级</a>?',"messages.general":"操作成功","messages.setting.saved":"修改成功","messages.theme.saved":'主题修改成功，您可以<a href="{0}" target="_blank">点击这里</a>查看修改后的结果',"messages.flash.saved":'Flash特效修改成功，您可以<a href="{0}" target="_blank">点击这里</a>查看修改后的结果',"messages.layout.saved":'页面布局修改成功，您可以<a href="{0}" target="_blank">点击这里</a>查看修改后的结果',"messages.entry.saved":'<div class="noticeInfo"><h3>日志保存成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/entry.do?m=edit&id={0}">继续编辑</a></li><li><a href="/manage/entry.do?m=list&t=draft">转到草稿列表页面</a></li><li><a href="/manage/entry.do?m=add">撰写另一篇新日志</a></li></ul></div>',"messages.entry.published":'<div class="noticeInfo"><h3>日志发布成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/entry.do">转到日志列表页面</a></li><li><a href="{0}">查看您刚发表的日志</a></li><li><a href="/manage/entry.do?m=add">撰写另一篇新日志</a></li></ul></div>',"messages.entry.shortcutpublished":'<div class="noticeInfo"><h3>日志发布成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="javascript:closeWin();">关闭本页</a></li><li><a href="{1}">查看我的博客首页</a></li><li><a href="{0}">查看您刚发表的日志</a></li><li><a href="/manage/entry.do?m=add&t=shortcut">撰写另一篇新日志</a></li></ul></div>',"messages.entry.shortcutsaved":'<div class="noticeInfo"><h3>日志保存成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/entry.do?m=edit&id={0}&t=shortcut">继续编辑</a></li><li><a href="/manage/entry.do?m=list&t=draft">转到草稿列表页面</a></li><li><a href="/manage/entry.do?m=add&t=shortcut">撰写另一篇新日志</a></li></ul></div>',"messages.entry.updated":'<div class="noticeInfo"><h3>日志修改成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="{0}">查看您刚修改的日志</a></li><li><a href="/manage/entry.do">转到日志列表页面</a></li></ul></div>',"messages.entry.shortcutupdated":'<div class="noticeInfo"><h3>日志修改成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="javascript:closeWin();">关闭本页</a></li><li><a href="{0}">查看您刚修改的日志</a></li><li><a href="{1}">查看我的博客</a></li></ul></div>',"messages.blog.upgraded":'<div class="noticeInfo"><h3>恭喜您，升级成功！</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="{0}">查看我的博客</a></li><li><a href="javascript:closeWin();">关闭本页</a></li></ul></div>',"messages.blog.down":'<div class="noticeInfo"><h3>降级成功，感谢您的试用</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="{0}">查看我的博客</a></li><li><a href="javascript:closeWin();">关闭本页</a></li></ul></div>',"messages.entry.private":"该日志已被隐藏,只有您自己才能看到","messages.entry.deleted":"日志删除成功","messages.comment.published":'评论发表成功&nbsp;&nbsp;&nbsp;<a href=" http://blog.sohu.com/manage/main.do " target=”_blank” style="color: #069;" onmousedown="CA.a(\'entry_commemt_success\');">查看其他好友的最新日志</a>',"messages.comment.deleted":"评论删除成功","messages.message.published":"留言发表成功","messages.message.deleted":"留言删除成功","messages.category.saved":'<div class="noticeInfo"><h3>分类"{0}"保存成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/category.do">返回列表</a></li><li><a href="manage/category.do?m=add">创建新分类</a></li></ul></div>',"messages.category.updated":'<div class="noticeInfo"><h3>分类"{0}"更新成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/category.do">返回列表</a></li><li><a href="manage/category.do?m=add">创建新分类</a></li></ul></div>',"messages.category.deleted":'分类"{0}"删除成功',"messages.category.added":'<div class="noticeInfo"><h3>分类"{0}"添加成功</h3><div id="autoDir"></div></div><div class="moreInfo"><p>或者您可以：</p><ul><li id="defautAction"><a href="/manage/category.do">返回列表</a></li><li><a href="manage/category.do?m=add">创建新分类</a></li></ul></div>',"messages.profile.saved":"档案修改成功","messages.entry.contributed":"投稿成功。\n如果该日志被录用，将会被展示在相应频道栏目中。同时管理员会以留言方式通知您。","messages.mobile.setsuccess":'设置成功！您可以通过彩信发表博客日记了<br /><a href="/manage/mobile.do">返回</a>',"messages.mobile.cancelsuccess":'您的手机博客服务已经取消!<br /><a href="/manage/mobile.do">返回</a>'},getCookie:function(e){var t,i=RegExp("(^| )"+e+"=([^;]*)(;|$)","gi");
return(t=i.exec(unescape(document.cookie)))?t[2]:null},setCookie:function(e,t,i,o,n){var s=e+"="+escape(t);if(i){"never"==i&&(i=5256e4);var a=new Date;a.setTime(a.getTime()+1e3*60*i),s+="; expires="+a.toGMTString()}o&&(s+="; path="+o),n&&(s+="; domain="+n),document.cookie=s},getInfo:function(e){var t=Info.messages[e];return t?t:e},formatMsg:function(e,t){var i=Info.getInfo(e);if(i&&t)for(var o=0;t.length>o;++o)i=i.replace("{"+o+"}",Info.getInfo(t[o]));return i},formatMsgs:function(e,t,i){var o="";for(var n in e){if(0==t){if(0!=n.indexOf("messages"))continue}else if(1==t&&0!=n.indexOf("errors"))continue;var s=e[n];if(s.constructor==Array){var a=Info.formatMsg(n,e[n]);a&&(o+=a,o+=i===void 0||""==i?"<br />":i)}}return o},readInfo:function(e,t){var i=Info.getCookie("msg");if(""==i||"none"==i)return"";var o=Info.htmlInfo(i,e,t);return o&&o.length>0&&Info.setCookie("msg","none","","/","blog.sohu.com"),o},htmlInfo:function(e,t,i){var o=JSON.parse(e);return o?Info.formatMsgs(o,t,i):e},displayMsg:function(){document.write(Info.readInfo(0))},displayErr:function(){document.write(Info.readInfo(1))}},imgSvrAllot={type:{local:"blog.do",avatar:"blogo.do",toolbar:"blog/tbUpload.do",customTheme:"blogbkUpload.do"},getUrl:function(e){var t="http://upload.pp.sohu.com/"+imgSvrAllot.type[e];return t}};setTimeout(function(){var e,t,i,o,n=jQuery,s="http://i.sohu.com/a/advertise/",a="?cb=?&_input_encode=UTF-8&_output_encode=UTF-8",r=s+"get.htm"+a,l=s+"updesc.htm"+a,c=n(".blog-article-ad-wrapper");$blog_config=window.$blog_config||{},$blog_config.showAd&&(n.ajax({url:r,cache:!0,dataType:"jsonp",jsonpCallback:"callback",data:{xpt:window._upt},success:function(n){c.html(n.data),e=c.find(".title"),t=e.find(".tt-bt"),i=e.find(".tt-bj"),o=e.find("input"),isOwnBlog()&&i.show()}}),c.delegate(".tt-bj","click",function(){t.hide(),o.show()[0].focus(),o.val(t.text())}).delegate("input","blur",function(){var e=o.val();if(""!==e)return e.length>20?(alert("标题不能超过20个字符"),void 0):(n.getJSON(l,{desc:e},function(i){0==i.status?(t.html(e).show(),o.hide()):n.inform({icon:"icon-error",delay:2e3,easyClose:!0,content:"保存失败，稍后再试"})}),void 0)}),setTimeout(function(){n(".blog-article-insertad").delegate(".img, .info h4 a, .btn-qkk a","click",function(){mysohu.put_log("blog_ad_in")}),n(".blog-article-ad",c).delegate("li a","click",function(){mysohu.put_log("blog_ad_out")})},2e3))},1e3),~function(){function e(e){return jQuery.browser.msie?document.getElementById(e):document[e]}(function t(){setTimeout(function(){try{var i=document.getElementById("main-content"),o=i.getElementsByTagName("object")[0].id;movie=e(o),movie.musicPlay()}catch(n){t()}},2500)})()}();