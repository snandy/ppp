/*! SohuBlog @snandy 2013-04-09 15:58:38 */
Function.prototype.bindAsEventListener2=function(e,t){var i=this;return function(s){return i.call(e,s||window.event,t)}},~function(window,document){function Dom(){}var Browser=function(e){var t={ie:/msie/.test(e)&&!/opera/.test(e),chrome:/chrome/.test(e)};return t}(navigator.userAgent.toLowerCase());Dom.create=function(e,t,i){var s=document.createElement(e);return t&&(s.className=t),i||(i=document.body),i.appendChild(s),s},Dom.show=function(e){e.style.display="block"},Dom.hide=function(e){e.style.display="none"},Dom.getViewSize=function(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}},Dom.getOffsetRect=function(e){var t={left:0,top:0,width:0,height:0,bottom:0,right:0};return e==document?(e=document.documentElement,t.left=e.scrollLeft,t.top=e.scrollTop,Browser.ie?(t.width=e.offsetWidth,t.height=e.offsetHeight):(t.width=window.innerWidth,t.height=window.innerHeight)):(t.left=e.offsetLeft,t.top=e.offsetTop,e!=document.body||Browser.ie?(t.width=e.offsetWidth,t.height=e.offsetHeight):(e=document.documentElement,t.width=e.scrollWidth,t.height=e.scrollHeight)),t.bottom=t.top+t.height,t.right=t.left+t.width,t},Dom.getRect=function(e){for(var t=Dom.getOffsetRect(e),i=e.offsetParent;i;){var s=Dom.getOffsetRect(i);t.left+=s.left,t.top+=s.top,i=i.offsetParent}return t.bottom=t.top+t.height,t.right=t.left+t.width,t},Dom.setPosition=function(e,t){e.style.left=t.left+"px",e.style.top=t.top+"px"},Dom.showModalDialog=function(e,t,i){var s,o,n,a="";if(Browser.ie){if(i)for(var r=0;i.length>r;r++){var d=i[r][0],p=i[r][1];switch(d){case"width":d="dialogWidth",p+="px";break;case"height":d="dialogHeight",p+="px"}a+=d+":"+p+";"}s=window.showModalDialog(e,t,a)}else{if(i){for(var r=0;i.length>r;r++){var d=i[r][0],p=i[r][1];"width"===d&&(o=screen.width/2-p/2),"height"===d&&(n=screen.height/2-p/2),a+=d+"="+p+","}a+="left="+o+",",a+="top="+n}s=window.open(e,null,a+"modal=yes"),s.dialogArguments=t}return s},Dom.open=function(e,t,i,s){var o,n="";t||(t=null),i||(i=[["modal","yes"]]),s&&(i.push(["location","no"]),i.push(["menubar","no"]),i.push(["toolbar","no"]),i.push(["scrollbars","yes"]),i.push(["resizable","yes"]));for(var a=0;i.length>a;a++)n+=i[a][0]+"="+i[a][1],a!=i.length-1&&(n+=",");return window.openDialogArguments=t,o=window.open(e,null,n)};var Editor={};Editor.editorWin=!1,Editor.editorObj=!1,Editor.cache=!1,Editor.coder=!1,Editor.selection=!1,Editor.rangeCache=!1,Editor.viewState="view",Editor.Config={},Editor.Config.tool={};var editorConfig=Editor.Config;Editor.init=function(e,t){this.parent=$(e),Editor.initFrame(),Editor.menu=$("menuContainer"),Editor.coder=$("entrycontent"),Editor.coder.value=$("entryDraft").value,null==Browser.ie?(alert("您现在所使用的浏览器不支持此编辑器很多高级功能，建议您采用IE或Firefox！"),Dom.show(Editor.coder),Editor.menu.style.height="0px"):(Browser.ie&&($(t).style.display=""),Editor.container=$("editorContainer"),Editor.txtContainer=$("txtEditorContainer"),Editor.ifrContainer=$("ifrEditorContainer"),Editor.ctContainer=$("cacheToolContainer"),Editor.initElements()),Editor.initCache()},Editor.initCache=function(){Editor.initCacheTool(),Editor.recover(),window.setInterval(Editor.backup,6e4)},Editor.initFrame=function(){this.parent.innerHTML='<div id="cacheToolContainer" style="width:1px;height:1px;"></div><div class="all_container"><div id="menuContainer" class="menu_container"></div><div id="editorContainer" class="editor_container"><div id="txtEditorContainer" class="editor_coder"><textarea id="entrycontent" name="entrycontent" ></textarea></div><div id="ifrEditorContainer" class="editor"></div></div></div>'},Editor.initTools=function(){Editor.controls={};for(var e=!1,t=editorConfig.tool.data,i=editorConfig.tool.css,s=0;t.length>s;s++){for(var o=Dom.create("div",i.part,Editor.menu),n=t[s],a=0;n.length>a;a++){Dom.create("div",i.newLine,o);for(var r=Dom.create("div",i.row,o),d=n[a],p=0;d.length>p;p++){var l=d[p],h=l[0],c=l[1];if("line"==h){var m="http://js.pp.sohu.com/ppp/blog/styles_v_0909301/images/editor/"+c+".gif",g=Dom.create("div",i.tool,r),u=Dom.create("img",!1,g);u.src=m}else{var f=l[2],b=l[3],v=l[4],y=l[5],w=l[6],g=Dom.create("div","bimg"==h?i.toolBig:i.tool,r);if(Editor.controls[c]=g,g.sohu={},g.sohu.id=c,g.sohu.type=h,g.sohu.state=0,"img"==h||"bimg"==h){var m="http://js2.pp.sohu.com.cn/ppp/blog/styles_v_100314/images/editor/"+c+".gif",u=Dom.create("img",!1,g);u.src=m,u.title=f,g.sohu.tool=u}else{var C=c+"Select",E=Dom.create("div",c,g);if(Browser.ie){g.sohu.tool=[],g.sohu.tool.selectedIndex=0,g.sohu.tool[0]=Dom.create("div",C,E),g.sohu.tool[0].sohuValue=null;var _,A;"fontname"==c?(_=editorConfig.lister.fontNameData.text,A=editorConfig.lister.fontNameData.value,g.sohu.tool[0].innerHTML="字体"):(_=editorConfig.lister.fontSizeData.text,A=editorConfig.lister.fontSizeData.value,g.sohu.tool[0].innerHTML="字号");for(var s=0;_.length>s;s++){var T=Dom.create("div",C,E);T.style.display="none",T.innerHTML=_[s],T.sohuValue=""+A[s],g.sohu.tool[s+1]=T}}else e=!0,g.sohu.tool=Dom.create("div",C,E)}g.sohu.downCall=b,v?(g.sohu.upCall=v,y&&(g.sohu.selectCall=y),w&&(g.sohu.cancelCall=w)):g.sohu.upCall=b,Event.observe(g,"mouseover",Editor.toolMouseOver.bind(Editor,g)),Event.observe(g,"mouseout",Editor.toolMouseOut.bind(Editor,g)),Event.observe(g,"mousedown",Editor.toolMouseDown.bind(Editor,g)),Event.observe(g,"mouseup",Editor.toolMouseUp.bindAsEventListener2(Editor,g))}}}e&&(e=!1,s+=4)}},Editor.initElements=function(){var e=editorConfig.tool.css;Dom.show(Editor.coder),Dom.hide(Editor.txtContainer),Editor.initTools(),Editor.menu.onselectstart=function(){return!1},window.sohu={},Editor.ifrContainer.innerHTML='<div class="editor_bg"><div class="editor_bg_on"></div><div class="editor_margin_on"></div><iframe frameborder="0"></iframe><div class="editor_margin_below"></div><div class="editor_bg_down"></div></div>',Editor.editorObj=Editor.ifrContainer.firstChild.childNodes[2],Editor.editorWin=Editor.editorObj.contentWindow,Editor.editorObj.style.height="330px",Editor.coder.style.height="330px";var t=Editor.editorWin.document;t.open();var i="";i+="<html>",i+="<head>",i+='<meta http-equiv="Content-Type" content="text/html; charset=gbk" />',i+="<style> *{line-height:160%;}body{font-size:14px;line-height:130%;font-family:'宋体',Verdana,Arial,Helvetica,sans-serif;}img{border:0;}p{margin:5px 0;}</style>",i+="</head>",i+="<body>",Browser.ie||(i+=""==Editor.coder.value?"":Editor.coder.value),i+="</body>",i+="</html>",t.write(i),t.close(),Browser.ie?(Editor.iCache=Dom.create("iframe",e.cache,Editor.ifrContainer),Editor.iCacheDoc=Editor.iCache.contentWindow.document,Editor.iCacheDoc.open(),Editor.iCacheDoc.write("<html><head><style>body{font-family:'宋体';}</style></head><body></body></html>"),Editor.iCacheDoc.close(),t.body.contentEditable=!0,Event.observe(Editor.editorWin.document.body,"beforedeactivate",Editor.cacheRange),Event.observe(Editor.getDocument().body,"paste",Editor.shortcutPaste),Event.observe(Editor.editorWin.document,"selectionchange",Editor.checkAllState),Editor.pasteHTML(""==Editor.coder.value?"":Editor.coder.value)):(Editor.disableSpecialTool(),Editor.bindLoadFF()),Event.observe(window,"beforeunload",Editor.delBackup.bind(this)),Editor.cache=Dom.create("div",e.cache,document.body);var s=Dom.create("div",editorConfig.tool.css.footer,Editor.container);s.innerHTML='<span style="float:left;margin-left:10px;"><a href="javascript:void(0)"><img align="absmiddle" src="http://js1.pp.sohu.com.cn/ppp/blog/styles_v_0909301/images/editor/ico_plus.gif" title="增大窗口" /></a>&nbsp;<a href="javascript:void(0)"><img align="absmiddle" src="http://js1.pp.sohu.com.cn/ppp/blog/styles_v_0909301/images/editor/ico_minus.gif" title="减小窗口" /></a></span><label style="float:right;margin-right:10px;"><input type="checkbox"/><span style="position:relative;bottom:3px;left:3px">显示源代码</span>',Editor.wideAreaControler=s.firstChild.firstChild,Editor.narrowAreaControler=s.firstChild.lastChild,Editor.viewControler=s.lastChild.firstChild,this.setAble(Editor.narrowAreaControler,!1),this.setOpacity(Editor.narrowAreaControler.firstChild,.3),Event.observe(Editor.wideAreaControler,"click",this.setArea.bind(this,!0)),Event.observe(Editor.narrowAreaControler,"click",this.setArea.bind(this,!1)),Event.observe(Editor.viewControler,"click",this.setView.bind(this)),Event.observe(Editor.editorWin.document,"keypress",Editor._e_keyPress.bindAsEventListener2(Editor))},Editor.setArea=function(e){var t=parseInt(Editor.editorObj.style.height),i=100;e?630>t&&(Editor.editorObj.style.height=parseInt(Editor.editorObj.style.height)+i+"px",Editor.coder.style.height=parseInt(Editor.coder.style.height)+i+"px",t=parseInt(Editor.editorObj.style.height),630==t&&(this.setAble(Editor.wideAreaControler,!1),this.setOpacity(Editor.wideAreaControler.firstChild,.3))):t>330&&(Editor.editorObj.style.height=parseInt(Editor.editorObj.style.height)-i+"px",Editor.coder.style.height=parseInt(Editor.coder.style.height)-i+"px",t=parseInt(Editor.editorObj.style.height),330==t&&(this.setAble(Editor.narrowAreaControler,!1),this.setOpacity(Editor.narrowAreaControler.firstChild,.3))),t>330&&(this.setAble(Editor.narrowAreaControler,!0),this.setOpacity(Editor.narrowAreaControler.firstChild,1)),630>t&&(this.setAble(Editor.wideAreaControler,!0),this.setOpacity(Editor.wideAreaControler.firstChild,1))},Editor.setAble=function(e,t){e.disabled=t?"":"disabled"},Editor.setOpacity=function(e,t){e.style.filter="Alpha(Opacity="+100*t+")",e.style.MozOpacity=t},Editor.disableSpecialTool=function(){Editor.setState(Editor.controls.cut,-3),Editor.setState(Editor.controls.copy,-3),Editor.setState(Editor.controls.paste,-3),Editor.controls.cut.sohu.tool.title="提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + C]！",Editor.controls.copy.sohu.tool.title="提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + X]！",Editor.controls.paste.sohu.tool.title="提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + V]！"},Editor.bindLoadFF=function(){Editor.setDesignMode(!0),Event.observe(Editor.editorWin.document.body,"mouseup",Editor.checkAllState),Event.observe(Editor.editorWin.document,"keypress",Editor.checkAllState)},Editor.setContent=function(){"none"==Editor.txtContainer.style.display||"none"==Editor.coder.style.display?Editor.coder.value=Editor._bindEntryStyle():(Editor.editorWin.document.body.innerHTML=Editor.coder.value,Editor.coder.value=Editor.editorWin.document.body.innerHTML)},Editor._bindEntryStyle=function(){for(var e=Editor.editorWin.document.body.childNodes,t=null,i=0,s=e.length;s>i;i++){var o=e[i];if(o.nodeType&&1==o.nodeType){if(t){t=null;break}t=o}}var n=Editor.editorWin.document.body.innerHTML;return t&&"div"==t.tagName.toLowerCase()&&"160%"==t.style.lineHeight&&"14px"==t.style.fontSize?n:(n=['<div style="line-height:160%;font-size:14px;">',n,"</div>"],n.join(""))},Editor.preview=function(){var e=$F("entrytitle");if(""==e)return alert("请填写日志标题"),$("entrytitle").focus(),void 0;e=e.convertTextToHTML(),Editor.setContent();var t=$F(Editor.coder);if(1>t.length)return alert("请填写日志内容"),void 0;var i=[],s={win:window,title:e,content:t};Dom.open("/editor/support/preview.html",s,i,!0)},Editor.checkAllState=function(){if(!Editor.isChecking){Editor.isChecking=!0,Editor.stateArray||(Editor.stateChecking=!0,Editor.stateArray=Browser.ie?["Paste","Cut","Copy","FontName","FontSize","Bold","Italic","Underline","JustifyLeft","InsertOrderedList","InsertUnorderedList","Undo"]:["fontname","fontsize","bold","italic","underline","justifyleft","insertorderedlist","insertunorderedlist"]);try{var e=Editor.editorWin.document;if(e){var t=0;for(t=0;Editor.stateArray.length>t;t++)Editor.checkCommandState(Editor.stateArray[t],e)}}catch(i){}finally{Editor.isChecking=!1}}},Editor.checkCommandState=function(e,t){var i=!1,s=e.toLowerCase(),o=Editor.controls[s];switch("insertorderedlist"==s?o=Editor.controls.orderlist:"insertunorderedlist"==s&&(o=Editor.controls.unorderlist),s){case"cut":case"copy":case"paste":i=t.queryCommandEnabled(e),i?Editor.setState(o,0):Editor.setState(o,-3);break;case"fontname":case"fontsize":if(i=t.queryCommandValue(e),Browser.ie){var n=o.sohu.tool,a=n.selectedIndex;if(n[a].sohuValue!=i){var r=0,d=!1;if(null!=i)for(r=1;n.length>r;r++)n[r].sohuValue==i&&(d=!0,n.selectedIndex=r);d||(n.selectedIndex=0),n.selectedIndex!=a&&(n[a].style.display="none",n[n.selectedIndex].style.display="")}}else{if("fontname"==s)if(""==i)i="字体";else{i=i.replace(/'/g,"");var p=i.indexOf(",");p>0&&(i=i.substr(0,p)),p=i.indexOf("_"),p>0&&(i=i.substr(0,p))}else if(""==i)i="字号";else{var r=0,d=!1,l=editorConfig.lister.fontSizeData.value;for(r=0;l.length>r;r++)if(l[r]==i){i=editorConfig.lister.fontSizeData.text[r],d=!0;break}d||(i="字号")}o.sohu.tool.innerHTML=i}break;case"justifyleft":case"justifycenter":case"justifyright":var h=0,c=0,m=0;Browser.ie?(h=t.queryCommandState("JustifyLeft")?-2:0,c=t.queryCommandState("JustifyCenter")?-2:0,m=t.queryCommandState("JustifyRight")?-2:0):(i=t.queryCommandValue(e),"left"==i&&(h=-2),"center"==i&&(c=-2),"right"==i&&(m=-2)),Editor.setState(Editor.controls.justifyleft,h),Editor.setState(Editor.controls.justifycenter,c),Editor.setState(Editor.controls.justifyright,m);break;case"undo":i=Editor.editorWin.document.queryCommandEnabled(e),i?Editor.setState(o,0):Editor.setState(o,-3);break;default:i=t.queryCommandState(e),i?Editor.setState(o,-2):Editor.setState(o,0)}return i},Editor.command=function(e,t){var i=!1;if(Editor.isView())if(Editor.checkRange(),t&&"#"==t&&Browser.ie)Editor.removeColor(e);else try{Browser.ie||(e=e.toLowerCase()),Editor.editorWin.document.execCommand(e,!1,t),Browser.ie||Editor.editorWin.focus()}catch(s){}return i},Editor.getText=function(){var e=Editor.getRange();return e&&(html="control"==Editor.selection.type.toLowerCase()?e.item(0).innerHTML:e.text,html||(html="")),html},Editor.removeColor=function(e){var t=Editor.getText();if(t.length>0){var i=Editor.getSpecialElement("font",!0);i&&i.innerHTML==t&&("ForeColor"==e?i.color="":i.style.backgroundColor="")}else Editor.editorWin.document.execCommand(e,!1,"#")},Editor.undo=function(){return Editor.command("Undo",1),-1},Editor.setState=function(e,t,i){if(e||(e=Editor.controls[i]),e&&(e.sohu.state=t,"select"!=e.sohu.type)){var s="bimg"==e.sohu.type?"Big":"";switch(t){case 1:e.className=editorConfig.tool.css["toolOver"+s];break;case 0:e.className=editorConfig.tool.css["tool"+s];break;case-1:case-2:e.className=editorConfig.tool.css["toolDown"+s];break;case-3:e.className=editorConfig.tool.css["toolDisable"+s]}}},Editor.toolMouseOver=function(e){Editor.isView()&&0==e.sohu.state&&Editor.setState(e,1)},Editor.toolMouseOut=function(e){!Editor.isView()||1!=e.sohu.state&&-1!=e.sohu.state||Editor.setState(e,0)},Editor.toolMouseDown=function(e){Editor.isView()&&-3!=e.sohu.state&&(Lister.now&&(e.sohu.lister&&e.sohu.lister==Lister.now||Lister.now.cancel(!1)),-1!=e.sohu.state&&-2!=e.sohu.state&&Editor.setState(e,-1))},Editor.toolMouseUp=function(e,t){if(Editor.isView()&&-3!=t.sohu.state){var i=1;-1==t.sohu.state&&(i=t.sohu.downCall.call(Editor)),-2==t.sohu.state&&(i=t.sohu.upCall.call(Editor)),Editor.setState(t,i),Event.stop(e),Editor.checkAllState()}},Editor.blankUpCall=function(){return 0},Editor.blankCall=function(e){return e!==void 0?e:void 0},Editor.normalCancelCall=function(e,t){var i=0;t&&(i=t),Editor.setState(null,i,e)},Editor.showFontNameList=function(){var e=Editor.controls.fontname;return e.sohu.lister||(e.sohu.lister=new Lister(e,editorConfig.lister.fontNameData,1,editorConfig.lister.option)),e.sohu.lister.show(),-2},Editor.hideFontNameList=function(){var e=Editor.controls.fontname;return e.sohu.lister&&e.sohu.lister.cancel(!1),1},Editor.setFontName=function(e){e&&Editor.command("FontName",e),Editor.setState(null,0,"fontname")},Editor.cancelFontName=function(){Editor.setState(null,0,"fontname")},Editor.showFontName=function(e,t){var i=Editor.controls.fontname.sohu.tool,s="字体";if(e)s=e;else if(t){var o=0,n=editorConfig.lister.fontNameData;for(o=0;n.value.length>o;o++)n.value[o]==t&&(s=n.text[o])}i.innerHTML=s},Editor.showFontSizeList=function(){var e=Editor.controls.fontsize;return e.sohu.lister||(e.sohu.lister=new Lister(e,editorConfig.lister.fontSizeData,1,editorConfig.lister.option)),e.sohu.lister.show(),-2},Editor.hideFontSizeList=function(){var e=Editor.controls.fontsize;return e.sohu.lister&&e.sohu.lister.cancel(!1),1},Editor.setFontSize=function(e){e&&Editor.command("FontSize",e),Editor.setState(null,0,"fontname")},Editor.cancelFontSize=function(){Editor.setState(null,0,"fontsize")},Editor.showFontSize=function(e,t){var i=Editor.controls.fontsize.sohu.tool,s="字号";if(e)s=e;else if(t){var o=0,n=editorConfig.lister.fontSizeData;for(o=0;n.value.length>o;o++)n.value[o]==t&&(s=n.text[o])}i.innerHTML=s},Editor.showForeColorList=function(){var e=Editor.controls.forecolor;return e.sohu.lister||(e.sohu.lister=new Lister(e,editorConfig.lister.colorData,6,editorConfig.lister.option)),e.sohu.lister.show(),-2},Editor.hideForeColorList=function(){var e=Editor.controls.forecolor;return e.sohu.lister&&e.sohu.lister.cancel(!1),1},Editor.setForeColor=function(e){e&&Editor.command("ForeColor",e),Editor.setState(null,0,"forecolor")},Editor.cancelForeColor=function(){Editor.setState(null,0,"forecolor")},Editor.showBackColorList=function(){var e=Editor.controls.backcolor;return e.sohu.lister||(e.sohu.lister=new Lister(e,editorConfig.lister.colorData,6,editorConfig.lister.option)),e.sohu.lister.show(),-2},Editor.hideBackColorList=function(){var e=Editor.controls.backcolor;return e.sohu.lister&&e.sohu.lister.cancel(!1),1},Editor.setBackColor=function(e){e&&(Browser.ie?Editor.command("BackColor",e):Editor.command("hilitecolor",e)),Editor.setState(null,0,"backcolor")},Editor.cancelBackColor=function(){Editor.setState(null,0,"backcolor")},Editor.getDocument=function(){return Editor.editorWin.document},Editor.setDesignMode=function(e){Editor.getDocument().designMode=e?"On":"Off"},Editor.canEdit=function(){return"changing"!=Editor.viewState},Editor.isView=function(){return"view"==Editor.viewState},Editor.showBrow=function(){var e=Editor.controls.emot;if(!e.sohu.lister){var t={init:function(e,t){Emote.init({parent:e,output:"url",callback:function(e,i){t('<img src="'+e+'" title="'+i+'"/>')},matrix:{20:[11,6],42:[6,4]},stat:"editor"})},type:"function"};e.sohu.lister=new Lister(e,t,8,editorConfig.lister.option)}return e.sohu.lister.show(),-2},Editor.hideBrow=function(){var e=Editor.controls.emot;return e.sohu.lister&&e.sohu.lister.cancel(!1),1},Editor.addBrow=function(e){if(e){var t="&nbsp;"+e+"&nbsp;";Editor.pasteHTML(t)}Editor.setState(null,0,"emot")},Editor.cancelBrowCall=function(){Editor.setState(null,0,"emot")},Editor.fastPasteHTML=function(e){if(Browser.ie){var t=Editor.editorWin.document.selection.createRange();t&&t.pasteHTML(e)}else{var t=Editor.editorWin.document;t.execCommand("inserthtml",null,e)}},Editor.pasteHTML=function(e){var t=!1;if(Editor.isView()){var i=Editor.getRange();if(i){if(Browser.ie){var s=Editor.selection.type.toLowerCase();if("control"==s){var o=Editor.editorWin.document.body.createTextRange();o.moveToElementText(i.item(0)),i=o}i.pasteHTML(e),i.select()}else Browser.chrome?Editor.chromePasteHTML(e):Editor.command("inserthtml",e);t=!0}else alert("发生错误，请重新操作！")}return t},Editor.chromePasteHTML=function(e){var t,i,s=Editor.editorWin,o=s.document;if(s.getSelection&&(t=s.getSelection(),t.rangeCount||Editor.focusContent(),t.getRangeAt&&t.rangeCount)){i=t.getRangeAt(0),i.deleteContents();var n=o.createElement("div");n.innerHTML=e;for(var a,r,d=o.createDocumentFragment();a=n.firstChild;)r=d.appendChild(a);i.insertNode(d),r&&(i=i.cloneRange(),i.setStartAfter(r),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}},Editor.getClipboardData=function(){Editor.iCacheDoc.body.innerHTML="",Editor.iCacheDoc.body.createTextRange().execCommand("Paste");var e=Editor.iCacheDoc.body.innerHTML;return Editor.iCacheDoc.body.innerHTML="",e},Editor.clearFromWord=function(e){return e=e.replace(/<\/?SPAN[^>]*>/gi,""),e=e.replace(/<(\w[^>]*) class=([^ |>]*)([^>]*)/gi,"<$1$3"),e=e.replace(/<(\w[^>]*) style="([^"]*)"([^>]*)/gi,"<$1$3"),e=e.replace(/<(\w[^>]*) lang=([^ |>]*)([^>]*)/gi,"<$1$3"),e=e.replace(/<\\?\?xml[^>]*>/gi,""),e=e.replace(/<\/?\w+:[^>]*>/gi,""),e=e.replace(/<\/?\w+:[^>]*>/gi,""),e=e.replace(/<\/?\w+:[^>]*>/gi,"")},Editor.getSelectedHTML=function(){var e="",t=Editor.getRange();if(t)if(Browser.ie)e="control"==Editor.selection.type.toLowerCase()?t.item(0).outerHTML:t.htmlText,e||(e="");else if(Editor.selection.rangeCount>0){var i=Editor.selection.getRangeAt(0),s=i.cloneContents();Editor.cache.innerHTML="",Editor.cache.appendChild(s),e=Editor.cache.innerHTML,Editor.cache.innerHTML=""}return e},Editor.setBold=function(){var e=Editor.command("Bold")?-2:0;return e},Editor.setItalic=function(){var e=Editor.command("Italic")?-2:0;return e},Editor.setUnderline=function(){var e=Editor.command("Underline")?-2:0;return e},Editor.copy=function(){return Browser.ie?(Editor.command("Copy"),-1):(alert("提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + C]！"),0)},Editor.cut=function(){return Browser.ie?(Editor.command("Cut"),-1):(alert("提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + X]！"),0)},Editor.shortcutPaste=function(){return Editor.paste(),!1},Editor.paste=function(){if(Browser.ie){if(Editor.isView()){var e=Editor.getClipboardData();if(e&&e.length>0){var t=/<\w[^>]* class="?MsoNormal"?/gi;t.test(e)&&confirm("您现在是从word中复制，是否清除其中的格式？\r\n\r\n小提示：清除格式可以使编辑更为方便！")&&(e=Editor.clearFromWord(e)),Editor.pasteHTML(e)}}return-1}return alert("提示：您现在所使用的浏览器不支持此操作，请使用快捷键 [Ctrl + V]！"),0},Editor.setElementJustify=function(e,t){switch(t){case"left":align="FLOAT: left; MARGIN: 0px 10px 10px 0px";break;case"center":align="DISPLAY: block; MARGIN: 0px auto 10px; TEXT-ALIGN: center";break;case"right":align="FLOAT: right; MARGIN: 0px 0px 10px 10px";break;default:align="DISPLAY: block"}e.style.cssText=align},Editor.setLeft=function(){var e=Editor.getSpecialElement(["img","embed"]);return e?Editor.setElementJustify(e,"left"):Editor.command("JustifyLeft"),-1},Editor.setCenter=function(){var e=Editor.getSpecialElement(["img","embed"]);return e?Editor.setElementJustify(e,"center"):Editor.command("JustifyCenter"),-1},Editor.setRight=function(){var e=Editor.getSpecialElement(["img","embed"]);return e?Editor.setElementJustify(e,"right"):Editor.command("JustifyRight"),-1},Editor.setOrder=function(){return Editor.command("InsertOrderedList"),-1},Editor.setUnorder=function(){return Editor.command("InsertUnorderedList"),-1},Editor.setIndent=function(){return Editor.command("Indent"),-1},Editor.setOutdent=function(){return Editor.command("Outdent"),-1},Editor.showLink=function(){var e=Editor.controls.url,t=Editor.getSpecialElement("a",!0);if(!t){var i=Editor.getSelectedHTML();if(1>i.length)return alert("请选择要添加链接的内容！"),0}var s=[["height","260"],["width","560"],["center","yes"]],o={win:window,controler:e,obj:t};return Dom.showModalDialog("/editor/support/link.html",o,s),0},Editor.clearLink=function(){if(Browser.ie)Editor.command("Unlink");else{var e,t="";if(e=Browser.ie?Editor.getSpecialElement("a",!0):Editor.getSpecialElement("a",!1)){if(t=e.innerHTML,!Browser.ie){var i=Editor.editorWin.document.createRange();i.selectNode(e);var s=Editor.editorWin.getSelection();s&&(s.removeAllRanges(),s.addRange(i))}Editor.pasteHTML(t)}}},Editor.cancelLinkCall=function(){Editor.setState(null,0,"url")},Editor.addLink=function(e){if(e){var t="",i=Editor.getSpecialElement("a");t=i?i.innerHTML:Editor.getSelectedHTML(),i?(i.href=e.link,i.target=e.target):(t='<a href="'+e.link+'" target="'+e.target+'">'+t+"</a>",Editor.pasteHTML(t))}},Editor.showImg=function(){var e=Editor.controls.simg,t=Editor.getSpecialElement("img",!0),i=[["height","600"],["width","845"],["center","yes"]],s={win:window,controler:e,obj:t};return Dom.showModalDialog("/editor/support/insert_image.html",s,i),0},Editor.showMusic=function(){var e=Editor.controls.smusic,t=Editor.getSpecialElement("img",!0),i=[["height",Browser.chrome?"400":"360"],["width","405"],["center","yes"]],s={win:window,controler:e,obj:t};return Dom.showModalDialog("/editor/support/insert_music.html",s,i),0},Editor.cancelImgCall=function(){Editor.setState(null,0,"simg")},Editor.addImg=function(e){if(e){var t=Editor.getSpecialElement("img",!0),i="";if(e.align)switch(e.align){case"none":i=" ";break;case"left":i="float:left; margin:0px 10px 10px 0px";break;case"center":i="display:block; margin:0px auto 10px; text-align:center";break;case"right":i="float:right; margin:0px 0px 10px 10px"}if(t)t.src=e.data[0].url,t.style.cssText=i;else{var s=e.type,o=e.data,n="";if(""==i&&(i="display:block;margin:0px auto 10px;text-align:center;"),"imgs"==s){var a,r=o.length;for(a=0;r>a;a++){var d=o[a],p=d.url,l=d.width>640?640:d.width;n+='<img src="'+p+'" border="0" width="'+l+'" style="'+i+'"/>'}}else{if(n="<br/>",1==e.kind){n+='<div style="float:left;padding:7px;"><div style="float:left;margin:0 10px 8px 0;width:229px;"><div style="padding:0 10px;background-color:white;text-align:center"><a href="'+e.link+'" target=_blank><img style="width:200px;" src="'+e.url+'"></a>'+'<div style="font-size:12px;color:#333;text-align:left;">'+'<div style="font-weight:bold;padding-top:10px;">'+e.name+"</div>"+'<div style="padding-top:10px;">'+e.desc+"</div>"+'<div style="text-align:right;padding-top:10px;">'+e.count+"张</div>"+"</div>"+"</div>"+"</div>";var a,h=o.length;for(a=0;h>a;a++){var d=o[a];n+='<div style="float:left;margin:2px 5px;;text-align:center"><a href="'+d.link+'" target=_blank><img src="'+d.url+'"></a>'+"</div>"}n+="</div>"}else if(2==e.kind){n+='<div style="overflow:hidden;float:left;background-color:#333;padding:7px;"><div style="float:left;margin:0 10px 8px 0;width:300px;"><div style="padding:10px;background-color:white;text-align:center"><a href="'+e.link+'" target=_blank><img style="width:250px;" src="'+e.url+'"></a>'+'<div style="font-size:12px;color:#333;text-align:left";>'+'<div style="font-weight:bold;padding-top:10px;">'+e.name+"</div>"+'<div style="padding-top:10px;">'+e.desc+"</div>"+'<div style="padding-top:10px;text-align:right">'+e.count+"张</div>"+"</div>"+"</div>"+"</div>";var a,h=o.length;for(a=0;h>a;a++){var c="",d=o[a];c='<div style="float:left;margin:0 5px 1px 0;height:190px;text-align:center;"><div style="width:100%;background-color:white;"><div style="padding:7px;text-align:center;"><a href="'+d.link+'" target=_blank><img src="'+d.url+'"'+"></a>"+'<div style="font-size:12px;margin:7px 0 0;overflow:hidden;color:#333;height:28px;text-align:left;line-height:120%;">'+d.alt+"</div>"+"</div>"+"</div>"+"</div>",n+=c}n+="</div>"}n+='<div style="clear:both;"></div><br/>'}Editor.pasteHTML(n)}}},Editor.redraw=function(){Editor.editorWin.document.body.style.display="none",Editor.editorWin.document.body.style.display="block"},Editor.showImg2=function(){var e=Editor.controls.simg,t=[["height","647"],["width","800"],["center","yes"]],i={win:window,controler:e};return Dom.showModalDialog("/editor/support/insert_image2.html",i,t),0},Editor.addImg2=function(e){if(e&&e.length>0){var t,i="";for(t=e.length-1;t>=0;t--)i+='<img border="0" style="display:block;text-align:center;margin:0px auto 10px;" src="'+e[t]+'" />';Editor.pasteHTML(i)}},Editor.showMv=function(){var e=Editor.controls.svideo,t=Editor.getSpecialElement("embed",!0),i=[["height","647"],["width","760"],["center","yes"]],s={win:window,controler:e,obj:t};return Dom.showModalDialog("/editor/support/insert_media.html",s,i),0},Editor.cancelMvCall=function(){Editor.setState(null,0,"svideo")},Editor.addMv=function(e){if(e)if("net"==e.type){var t="",i=Editor.getSpecialElement("embed");switch(""+e.f_align){case"none":t="DISPLAY:block";break;case"left":t="FLOAT:left;MARGIN: 0px 10px 10px 0px";break;case"center":t="DISPLAY:block;MARGIN: 0px auto 10px;TEXT-ALIGN:center";break;case"right":t="FLOAT:right;MARGIN: 0px 0px 10px 10px"}var s=e.f_url.substring(e.f_url.lastIndexOf(".")+1).toLowerCase(),o="video";/mp3|wma|wav|mid/.test(s)&&(o="audio");var n="",a="";if(n=""==e.f_width?"audio"==o?300:480:e.f_width,a=""==e.f_height?"audio"==o?45:418:e.f_height,i)Editor.getRange(),i.src=e.f_url,i.style.cssText=t,i.width=n,i.height=a,i.autostart="true"==e.f_autostart?!0:!1,i.loop="true"==e.f_loop?!0:!1;else{var r=e.f_autostart,d=e.f_loop,p='<embed style="'+t+'" src="'+e.f_url+'&autoplay=false" width="'+n+'" height="'+a+'"  loop="'+d+'" autostart="'+r+'" />';Editor.pasteHTML(p)}}else if("lists"==e.type){for(var t="DISPLAY: block; MARGIN: 0px auto 10px; TEXT-ALIGN: center",p="",l=e.data,h=0;l.length>h;h++)p+='<embed style="'+t+'" src="'+l[h].flash+'&autoplay=false" width="480" height="418" quality="high" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',l[h].title&&(p+='<div style="DISPLAY: block; MARGIN: 0px auto 10px; TEXT-ALIGN: center;"><a href="'+l[h].url+'" target="_blank">'+l[h].title+"</a></div><br />");Editor.pasteHTML(p)}},Editor.setView=function(){if("changing"!=Editor.viewState){var e=Editor.viewState;Editor.viewState="changing";var t="view"==e?"code":"view";if(e!=t)if("code"==t)Editor.viewControler.checked=!0,Editor.coder.value=Editor.editorWin.document.body.innerHTML,Dom.hide(Editor.ifrContainer),Dom.show(Editor.txtContainer),Editor.menu.style.filter="Alpha(Opacity=30)",Editor.menu.style.MozOpacity="0.3",Editor.coder.focus();else if("view"==t){if(Editor.viewControler.checked=!1,Editor.editorWin.document.body.innerHTML=Editor.coder.value,Dom.hide(Editor.txtContainer),Dom.show(Editor.ifrContainer),Editor.menu.style.filter="Alpha(Opacity=100)",Editor.menu.style.MozOpacity="1",Browser.ie){var i=Editor.editorWin.document.body.createTextRange();i.setEndPoint("EndToStart",i),i.select()}else Editor.editorWin.document.designMode="on";Editor.editorObj.focus&&Editor.editorObj.focus()}Editor.viewState=t}},Editor.showMap=function(){var e=Editor.controls.map;return e.sohu.lister||(e.sohu.lister=new Lister(e,editorConfig.lister.mapData,6,editorConfig.lister.option)),e.sohu.lister.show(),-2},Editor.hideMap=function(){var e=Editor.controls.map;return e.sohu.lister&&e.sohu.lister.cancel(!1),1},Editor.initMapInput=function(e){e.value="",e.focus()},Editor.checkMapInput=function(e){var t=e.value;if(""!=t){if(Browser.ie){Editor.controls.map.sohu.lister.cancel(!1);var i="http://map.sogou.com/privatemap/?lq="+decodeURIComponent(t)+"&login=auto&appid=1733&redirect=http://blog.sohu.com/editor/support/map.html",s=[["width","800"],["height","600"],["center","yes"]],o=Dom.open(i,null,s);o||alert("您的浏览器阻止了地图操作窗口，请关闭浏览器的阻止弹出窗口选项后继续使用！")}else alert("对不起，您的浏览器不支持此功能！");return 0}alert("请填入搜索关键词！"),e.focus()},Editor.addMap=function(e){Editor.checkRange();var t=e.src,i=e.link,s='<a href="'+i+'" target="_blank"><img title="点击此查看地图" src="'+t+'" style="display: block; margin: 0px auto 10px; text-align: center;" border="0" /></a>';s=decodeURI(s),Editor.pasteHTML(s)},Editor.cancelMapCall=function(){Editor.setState(null,0,"map")},Editor.showArticle=function(){var e=Editor.controls.article,t=[["height","350"],["width","550"],["center","yes"]];Editor.setContent();var i=Editor.coder.value.unescapeHTML();if(300>i.length)alert("对不起，文品测试至少需要300个文字！");else{var s={win:window,controler:e,content:i};Dom.showModalDialog("/editor/support/sogou_article.html",s,t)}return 0},Editor.cancelArticleCall=function(){Editor.setState(null,0,"article")},Editor.addArticle=function(e){e="<br /><!-- sohublogblock begin -->"+e+"<!-- sohublogblock end -->",Editor.pasteHTML(e)},Editor.showRelative=function(){var e=$F("keywords").trim();return""==e?(Editor.setContent(),100>Editor.coder.value.length?Editor.popupRelative(e):(showTipInfo("正在分析您的日志内容，请稍候..."),_requestTag(Editor.popupRelative))):Editor.popupRelative(e),0},Editor.popupRelative=function(e){hideTipInfo();var t=Editor.controls.relative_s,i=[["height","572"],["width","643"],["center","yes"]],s={win:window,controler:t,keywords:e};return Dom.showModalDialog("/editor/support/relative.html",s,i),0},Editor.cancelRelativeCall=function(){Editor.setState(null,0,"relative_s")},Editor.addRelative=function(e,t){switch(t=t||"entry"){case"entry":var i="日志";
break;case"mini":var i="微博";break;default:var i="日志"}var s="";if(e[0].length>0){var o=e[0];s+='<br /><div style="font-weight: bold;">我的相关'+i+"：</div><br />";for(var n=0;o.length>n;n++){var a=o[n].title,r=o[n].url,d=Editor.getDateStr(o[n].time);s+=d+'&nbsp;|&nbsp;<a href="'+r+'" target="_blank" title="'+a+'">'+a+"</a><br />"}s+="<br />"}if(e[1].length>0){var o=e[1];s+='<br /><div style="font-weight: bold;">其他网友的相关'+i+"：</div><br />";for(var n=0;o.length>n;n++){var a=o[n].title,r=o[n].url,d=Editor.getDateStr(o[n].time);s+=d+'&nbsp;|&nbsp;<a href="'+r+'" target="_blank" title="'+a+'">'+a+"</a><br/>"}s+="<br />"}Editor.pasteHTML(s)},Editor.showRelativeMini=function(){var e="";return Editor.popupRelativeMini(e),0},Editor.popupRelativeMini=function(e){hideTipInfo();var t=Editor.controls.relative_mini,i=[["height","572"],["width","643"],["center","yes"]],s={win:window,controler:t,keywords:e};return Dom.showModalDialog("/editor/support/relative_mini.html",s,i),0},Editor.addRelativeMini=function(e){var t="",i=[];e[0].length>0?i=e[0]:e[1].length>0&&(i=e[1]),t+='<br /><div style="margin:10px 100px;padding:10px;border:1px solid;"><div style="margin:10px;font-weight:bold;">以下内容来自搜狐微博</div>';for(var s=0;i.length>s;s++)i[s].content&&(t+=i[s].content);t+='<div style="clear:both"></div></div>',Editor.pasteHTML(t)},Editor.cancelRelativeMiniCall=function(){Editor.setState(null,0,"relative_mini")},Editor.getDateStr=function(e){var t=new Date(parseInt(e)),i=t.getMonth()+1;i=(i>9?"":"0")+i;var s=(t.getDate()>9?"":"0")+t.getDate(),o=t.getFullYear()+"-"+i+"-"+s;return o},Editor.focusContent=function(){try{Editor.editorWin.focus()}catch(e){}},Editor.cacheRange=function(){Editor.selection=Editor.editorWin.document.selection,Editor.rangeCache=Editor.selection.createRange()},Editor.checkRange=function(){Editor.rangeCache&&(Editor.editorWin.focus(),Editor.rangeCache.select(),Editor.rangeCache=!1)},Editor.getRange=function(){var e=!1;return Browser.ie?(Editor.editorWin.focus(),Editor.selection=Editor.editorWin.document.selection,e=Editor.selection.createRange()):(Editor.selection=Editor.editorWin.getSelection(),e=Editor.editorWin.document),e},Editor._e_keyPress=function(e){13==e.keyCode&&window.setTimeout(Editor._afterKeyEnter,0)},Editor._afterKeyEnter=function(){var e=Editor.getElement();if(e&&e.tagName)switch(e.tagName.toLowerCase()){case"br":if(e=e.parentNode,!e||!e.tagName||"p"!=e.tagName.toLowerCase())return;case"p":var t=e.innerHTML;if(10>t.length&&(t=t.toLowerCase(),""==t||"<br>"==t||"<br/>"==t||"<br />"==t||"&nbsp;"==t)){for(var i=e;(i=i.previousSibling)&&(!i.nodeType||1!=i.nodeType););var s="";if(i&&i.tagName&&"p"==i.tagName.toLowerCase()){for(var o=i.innerHTML,n=0,a=[];;){var r="&nbsp;";if(0!=o.indexOf(r,n)-n)if(r=" ",0!=o.indexOf(r,n)-n){if(r="　",0!=o.indexOf(r,n)-n)break;n+=r.length,a.push(r)}else n+=r.length,a.push("&nbsp;");else n+=r.length,a.push(r)}a.length>0&&(s=a.join(""))}s.length>0&&Editor.pasteHTML(s)}}},Editor.getElement=function(){var e,t,i;if(Browser.ie)switch(t=Editor.editorWin.document.selection,t.type.toLowerCase()){case"none":case"text":i=t.createRange(),e=i.parentElement();break;case"control":var s=t.createRange();e=s.item(0)}else t=Editor.editorWin.getSelection(),t.rangeCount>0&&(i=t.getRangeAt(0),e=i.startContainer==i.endContainer?3!=i.startContainer.nodeType?i.startContainer.childNodes[i.startOffset]:i.startContainer:i.commonAncestorContainer),e&&3==e.nodeType&&(e=e.parentNode);return e},Editor.getSpecialElement=function(e,t){var i=null,s=Editor.getElement();if(s)for("string"==typeof e&&(e=[e]);s&&s.tagName;){for(var o=e.length-1;o>=0;o--)if(e[o]==s.tagName.toLowerCase()){i=s;break}if(i)break;s=s.parentNode}if(t&&i)if(Browser.ie){Editor.rangeCache=!1;var n=Editor.editorWin.document.body.createTextRange();n.moveToElementText(i),n.select()}else{var a=Editor.editorWin.getSelection();if(a){var n=a.getRangeAt(0);n.selectNode(i),a.removeAllRanges(),a.addRange(n)}}return i},Editor.initCacheTool=function(){var e="",t="http://js3.pp.sohu.com.cn/ppp/blog/styles_ppp/images/cacheWriter.swf",i="callBackFun=Editor.checkCacheTool";e+=Browser.ie?'<object id="cacheFlash_ob" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%" align="middle"><param name="allowScriptAccess" value="always" /><param name="movie" value="'+t+'" />'+'<param name="flashvars" value="'+i+'" />'+'<param name="quality" value="high" />'+'<param name="wmode" value="transparent" />'+'<param name="allowFullScreen" value="true" />'+'<embed id="cacheFlash_em" src="'+t+'" flashvars="'+i+'" quality="high" width="100%" height="100%" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />'+"</object>":'<embed id="cacheFlash_em" src="'+t+'" flashvars="'+i+'" quality="high"  width="100%" height="100%" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',Editor.ctContainer.innerHTML=e},Editor.checkCacheTool=function(){return Editor.cacheToolReady=!0,!0},Editor.getCacheTool=function(){return Browser.ie?$("cacheFlash_ob"):document.cacheFlash_em},Editor.backup=function(){Editor.setContent(),""!=Editor.coder.value&&Editor.getCacheTool().setCache("entry",Editor.coder.value)},Editor.recover=function(){var e=Editor.getCacheTool();try{var t=e.getCache("entry"),i="";""==Editor.coder.value&&null!=t&&(i=t),i&&Editor.pasteHTML(i)}catch(s){window.setTimeout(Editor.recover,100)}},Editor.delBackup=function(){Editor.getCacheTool().delCache("entry")};var Lister=Class.create();Lister.now=!1,Lister.prototype={initialize:function(e,t,i,s){this.controler=e,this.listData=t,this.colCount=i,this.containerClass=s.containerClass,this.itemClass=t.itemClass?t.itemClass:s.itemClass,this.itemOverClass=t.itemOverClass?t.itemOverClass:s.itemOverClass,this.listData.text||(this.listData.text=this.listData.value),this.clickEventObj=!1,this.visibility=!1,this.initContainer(this.containerClass)},initContainer:function(e){var t=document.createElement("div");t.className=e,t.style.display="none",this.container=t,this.initContent(),document.body.appendChild(this.container)},initContent:function(){switch(this.listData.type){case"auto":for(var e=0;this.listData.value.length>e;e++)0==e%this.colCount&&e>0&&Dom.create("div","newLine",this.container),this.initListItem(e,this.container);break;case"manual":for(var e=0;this.listData.value.length>e;e++)this.initListItem2(e,this.container);break;case"manual2":this.container.innerHTML=this.listData.content;break;case"function":this.listData.init(this.container,this.selectedCall.bind(this))}},initListItem:function(e,t){var i=this.listData.text[e],s=this.listData.value[e],o=this.listData.pattern;i=o.replace(/\$=text\$/gi,i).replace(/\$=value\$/gi,s);var n=Dom.create("div",this.itemClass,t);n.innerHTML=i;var a=this.selectedCall.bind(this,s),r=this.itemMouseOver.bind(this,n),d=this.itemMouseOut.bind(this,n);Event.observe(n,"click",a),Event.observe(n,"mouseover",r),Event.observe(n,"mouseout",d)},initListItem2:function(e,t){var i=this.listData.value[e][0],s=this.listData.value[e][1];if(i){var o=Dom.create("div",this.itemClass,t);o.innerHTML=i;var n=this.selectedCall.bind(this,s),a=this.itemMouseOver.bind(this,o),r=this.itemMouseOut.bind(this,o);Event.observe(o,"click",n),Event.observe(o,"mouseover",a),Event.observe(o,"mouseout",r)}else Dom.create("div","newLine",this.container)},itemMouseOver:function(e){e.className=this.itemOverClass},itemMouseOut:function(e){e.className=this.itemClass},selectedCall:function(e){this.hide(),this.controler.sohu.selectCall.call(Editor,e,this.controler)},cancel:function(e){if(this.visibility){var t=!0;if("boolean"!=typeof e&&(e=window.event||e))for(eventEle=Event.element(e);eventEle;){if(this.container==eventEle){t=!1;break}eventEle=eventEle.parentElement}t&&(this.hide(),this.controler.sohu.cancelCall.call(this.controler))}},show:function(){if(!this.visibility){this.visibility=!0;var rect=Dom.getRect(this.controler),position={left:rect.left,top:rect.bottom};Dom.setPosition(this.container,position),this.clickEventObj=this.cancel.bind(this),Event.observe(document,"mouseup",this.clickEventObj),Event.observe(Editor.editorWin.document,"mouseup",this.clickEventObj),Dom.show(this.container),Lister.now=this,this.listData.init&&eval(this.listData.init)}},hide:function(){Lister.now=!1,this.clickEventObj&&(Event.stopObserving(document,"mouseup",this.clickEventObj),Event.stopObserving(Editor.editorWin.document,"mouseup",this.clickEventObj),this.clickEventObj=!1),this.visibility=!1,Dom.hide(this.container)}},window.Dom=Dom,window.Editor=Editor}(this,this.document),~function(){var e=Editor.Config;e.tool.data=[[[["bimg","paste","粘贴",Editor.paste,Editor.blankUpCall,Editor.blankCall,Editor.normalCancelCall]]],[[["img","cut","剪切",Editor.cut,Editor.blankUpCall,Editor.blankCall,Editor.normalCancelCall]],[["img","copy","复制",Editor.copy,Editor.blankUpCall,Editor.blankCall,Editor.normalCancelCall]]],[[["line","line"]]],[[["select","fontname","字体",Editor.showFontNameList,Editor.hideFontNameList,Editor.setFontName,Editor.cancelFontName],["select","fontsize","字号",Editor.showFontSizeList,Editor.hideFontSizeList,Editor.setFontSize,Editor.cancelFontSize]],[["img","bold","粗体",Editor.setBold,Editor.clearBold],["img","italic","斜体",Editor.setItalic],["img","underline","下划线",Editor.setUnderline],["img","forecolor","文字颜色",Editor.showForeColorList,Editor.hideForeColorList,Editor.setForeColor,Editor.cancelForeColor],["img","backcolor","背景颜色",Editor.showBackColorList,Editor.hideBackColorList,Editor.setBackColor,Editor.cancelBackColor],["img","url","插入超链接",Editor.showLink,Editor.clearLink,Editor.addLink,Editor.cancelLinkCall],["img","emot","插入表情",Editor.showBrow,Editor.hideBrow,Editor.addBrow,Editor.cancelBrowCall]]],[[["line","line"]]],[[["line","line"]]],[[["line","line"]]],[[["line","line"]]],[[["line","line"]]],[[["img","justifyleft","左对齐",Editor.setLeft,Editor.setLeft],["img","justifycenter","居中",Editor.setCenter,Editor.setCenter],["img","justifyright","右对齐",Editor.setRight,Editor.setRight]],[["img","orderlist","数字列表",Editor.setOrder,Editor.setOrder],["img","unorderlist","符号列表",Editor.setUnorder,Editor.setUnorder],["img","indent","增大缩进",Editor.setIndent],["img","outdent","减小缩进",Editor.setOutdent]]],[[["line","line"]]],[[["bimg","relative_mini","插入相关微博",Editor.showRelativeMini,Editor.showRelativeMini,Editor.addRelativeMini,Editor.cancelRelativeMiniCall]]],[[["bimg","relative_s","插入相关博文",Editor.showRelative,Editor.showRelative,Editor.addRelative,Editor.cancelRelativeCall]]],[[["bimg","simg","插入图片",Editor.showImg,Editor.showImg,Editor.addImg,Editor.cancelImgCall]]],[[["bimg","svideo","插入视频",Editor.showMv,Editor.showMv,Editor.addMv,Editor.cancelMvCall]]],[[["bimg","smusic","插入音乐",Editor.showMusic]]],[[["line","line"]]],[[["bimg","undo","撤销上一步操作",Editor.undo,Editor.undo]]]],e.tool.css={row:"tool_row",newLine:"newLine",part:"tool_part",tool:"tool_tool",toolOver:"tool_over",toolDown:"tool_down",toolDisable:"tool_disable",toolBig:"b_tool_tool",toolOverBig:"b_tool_over",toolDownBig:"b_tool_down",toolDisableBig:"b_tool_disable",editor:"editor",cache:"editor_cache",footer:"editor_footer clearfix",coder:"editor_coder2"},e.pager={},e.pager.option={coverClass:"cover",containerClass:"pager",loadingClass:"loading"},e.lister={},e.temp='<div style="width:10px;height:11px;overflow:hidden;background-color:',e.lister.option={containerClass:"lister",itemClass:"listerItem",itemOverClass:"listerItem_over"},e.lister.mapData={type:"manual2",content:'<form action="#" onsubmit="Editor.checkMapInput($(\'editorMapInput\'));return false;"><div style="background:#eee;padding:3px 5px;margin-bottom:2px;"><img src="http://img3.pp.sohu.com/ppp/blog/styles/images/editor/arr.gif" />&nbsp;插入地图</div><div style="width:120px;padding:5px;"><div style="margin-bottom:3px;">请填入地图关键词：</div><div style="margin-bottom:3px;"><input id="editorMapInput" name="editorMapInput" size=16 class="input" /></div><div style="text-align:center;"><input type="submit" value="搜索" class="button" /></div></div></form>',init:"Editor.initMapInput($('editorMapInput'))"},e.lister.fontNameData={type:"auto",pattern:'<div style="float:left;width:130px;text-align:center;font-size:12pt;"><div style="font-family:$=value$">$=text$</div></div>',text:["宋体","黑体","隶书","楷体","幼圆","Arial","Impact","Georgia","Verdana","Courier New","Times New Roman"],value:["宋体","黑体","隶书","楷体_GB2312","幼圆","Arial","Impact","Georgia","Verdana","Courier New","Times New Roman"]},e.lister.fontSizeData={type:"auto",pattern:'<div style="float:left;width:100px;text-align:center;"><div class="fontSizee$=value$" >$=text$</div></div>',text:["初号","一号","二号","三号","四号","五号","六号"],value:[7,6,5,4,3,2,1]},e.lister.colorData={type:"manual",itemClass:"colorItem",itemOverClass:"colorItem_over",value:[['<div style="overflow:hidden;color:#000000;height:15px;width:229px;border:1px solid #dbd8d1;float:left;text-align:center;font-size:13px;margin-bottom:1px;">自动颜色</div>',"#"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#003300;"></div>',"#003300"],[e.temp+'#006600;"></div>',"#006600"],[e.temp+'#009900;"></div>',"#009900"],[e.temp+'#00CC00;"></div>',"#00CC00"],[e.temp+'#00FF00;"></div>',"#00FF00"],[e.temp+'#330000;"></div>',"#330000"],[e.temp+'#333300;"></div>',"#333300"],[e.temp+'#336600;"></div>',"#336600"],[e.temp+'#339900;"></div>',"#339900"],[e.temp+'#33CC00;"></div>',"#33CC00"],[e.temp+'#33FF00;"></div>',"#33FF00"],[e.temp+'#660000;"></div>',"#660000"],[e.temp+'#663300;"></div>',"#663300"],[e.temp+'#666600;"></div>',"#666600"],[e.temp+'#669900;"></div>',"#669900"],[e.temp+'#66CC00;"></div>',"#66CC00"],[e.temp+'#66FF00;"></div>',"#66FF00"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#333333;"></div>',"#333333"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#000033;"></div>',"#000033"],[e.temp+'#003333;"></div>',"#003333"],[e.temp+'#006633;"></div>',"#006633"],[e.temp+'#009933;"></div>',"#009933"],[e.temp+'#00CC33;"></div>',"#00CC33"],[e.temp+'#00FF33;"></div>',"#00FF33"],[e.temp+'#330033;"></div>',"#330033"],[e.temp+'#333333;"></div>',"#333333"],[e.temp+'#336633;"></div>',"#336633"],[e.temp+'#339933;"></div>',"#339933"],[e.temp+'#33CC33;"></div>',"#33CC33"],[e.temp+'#33FF33;"></div>',"#33FF33"],[e.temp+'#660033;"></div>',"#660033"],[e.temp+'#663333;"></div>',"#663333"],[e.temp+'#666633;"></div>',"#666633"],[e.temp+'#669933;"></div>',"#669933"],[e.temp+'#66CC33;"></div>',"#66CC33"],[e.temp+'#66FF33;"></div>',"#66FF33"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#666666;"></div>',"#666666"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#000066;"></div>',"#000066"],[e.temp+'#003366;"></div>',"#003366"],[e.temp+'#006666;"></div>',"#006666"],[e.temp+'#009966;"></div>',"#009966"],[e.temp+'#00CC66;"></div>',"#00CC66"],[e.temp+'#00FF66;"></div>',"#00FF66"],[e.temp+'#330066;"></div>',"#330066"],[e.temp+'#333366;"></div>',"#333366"],[e.temp+'#336666;"></div>',"#336666"],[e.temp+'#339966;"></div>',"#339966"],[e.temp+'#33CC66;"></div>',"#33CC66"],[e.temp+'#33FF66;"></div>',"#33FF66"],[e.temp+'#660066;"></div>',"#660066"],[e.temp+'#663366;"></div>',"#663366"],[e.temp+'#666666;"></div>',"#666666"],[e.temp+'#669966;"></div>',"#669966"],[e.temp+'#66CC66;"></div>',"#66CC66"],[e.temp+'#66FF66;"></div>',"#66FF66"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#999999;"></div>',"#999999"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#000099;"></div>',"#000099"],[e.temp+'#003399;"></div>',"#003399"],[e.temp+'#006699;"></div>',"#006699"],[e.temp+'#009999;"></div>',"#009999"],[e.temp+'#00CC99;"></div>',"#00CC99"],[e.temp+'#00FF99;"></div>',"#00FF99"],[e.temp+'#330099;"></div>',"#330099"],[e.temp+'#333399;"></div>',"#333399"],[e.temp+'#336699;"></div>',"#336699"],[e.temp+'#339999;"></div>',"#339999"],[e.temp+'#33CC99;"></div>',"#33CC99"],[e.temp+'#33FF99;"></div>',"#33FF99"],[e.temp+'#660099;"></div>',"#660099"],[e.temp+'#663399;"></div>',"#663399"],[e.temp+'#666699;"></div>',"#666699"],[e.temp+'#669999;"></div>',"#669999"],[e.temp+'#66CC99;"></div>',"#66CC99"],[e.temp+'#66FF99;"></div>',"#66FF99"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#CCCCCC;"></div>',"#CCCCCC"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#0000CC;"></div>',"#0000CC"],[e.temp+'#0033CC;"></div>',"#0033CC"],[e.temp+'#0066CC;"></div>',"#0066CC"],[e.temp+'#0099CC;"></div>',"#0099CC"],[e.temp+'#00CCCC;"></div>',"#00CCCC"],[e.temp+'#00FFCC;"></div>',"#00FFCC"],[e.temp+'#3300CC;"></div>',"#3300CC"],[e.temp+'#3333CC;"></div>',"#3333CC"],[e.temp+'#3366CC;"></div>',"#3366CC"],[e.temp+'#3399CC;"></div>',"#3399CC"],[e.temp+'#33CCCC;"></div>',"#33CCCC"],[e.temp+'#33FFCC;"></div>',"#33FFCC"],[e.temp+'#6600CC;"></div>',"#6600CC"],[e.temp+'#6633CC;"></div>',"#6633CC"],[e.temp+'#6666CC;"></div>',"#6666CC"],[e.temp+'#6699CC;"></div>',"#6699CC"],[e.temp+'#66CCCC;"></div>',"#66CCCC"],[e.temp+'#66FFCC;"></div>',"#66FFCC"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#FFFFFF;"></div>',"#FFFFFF"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#0000FF;"></div>',"#0000FF"],[e.temp+'#0033FF;"></div>',"#0033FF"],[e.temp+'#0066FF;"></div>',"#0066FF"],[e.temp+'#0099FF;"></div>',"#0099FF"],[e.temp+'#00CCFF;"></div>',"#00CCFF"],[e.temp+'#00FFFF;"></div>',"#00FFFF"],[e.temp+'#3300FF;"></div>',"#3300FF"],[e.temp+'#3333FF;"></div>',"#3333FF"],[e.temp+'#3366FF;"></div>',"#3366FF"],[e.temp+'#3399FF;"></div>',"#3399FF"],[e.temp+'#33CCFF;"></div>',"#33CCFF"],[e.temp+'#33FFFF;"></div>',"#33FFFF"],[e.temp+'#6600FF;"></div>',"#6600FF"],[e.temp+'#6633FF;"></div>',"#6633FF"],[e.temp+'#6666FF;"></div>',"#6666FF"],[e.temp+'#6699FF;"></div>',"#6699FF"],[e.temp+'#66CCFF;"></div>',"#66CCFF"],[e.temp+'#66FFFF;"></div>',"#66FFFF"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#FF0000;"></div>',"#FF0000"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#990000;"></div>',"#990000"],[e.temp+'#993300;"></div>',"#993300"],[e.temp+'#996600;"></div>',"#996600"],[e.temp+'#999900;"></div>',"#999900"],[e.temp+'#99CC00;"></div>',"#99CC00"],[e.temp+'#99FF00;"></div>',"#99FF00"],[e.temp+'#CC0000;"></div>',"#CC0000"],[e.temp+'#CC3300;"></div>',"#CC3300"],[e.temp+'#CC6600;"></div>',"#CC6600"],[e.temp+'#CC9900;"></div>',"#CC9900"],[e.temp+'#CCCC00;"></div>',"#CCCC00"],[e.temp+'#CCFF00;"></div>',"#CCFF00"],[e.temp+'#FF0000;"></div>',"#FF0000"],[e.temp+'#FF3300;"></div>',"#FF3300"],[e.temp+'#FF6600;"></div>',"#FF6600"],[e.temp+'#FF9900;"></div>',"#FF9900"],[e.temp+'#FFCC00;"></div>',"#FFCC00"],[e.temp+'#FFFF00;"></div>',"#FFFF00"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#00FF00;"></div>',"#00FF00"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#990033;"></div>',"#990033"],[e.temp+'#993333;"></div>',"#993333"],[e.temp+'#996633;"></div>',"#996633"],[e.temp+'#999933;"></div>',"#999933"],[e.temp+'#99CC33;"></div>',"#99CC33"],[e.temp+'#99FF33;"></div>',"#99FF33"],[e.temp+'#CC0033;"></div>',"#CC0033"],[e.temp+'#CC3333;"></div>',"#CC3333"],[e.temp+'#CC6633;"></div>',"#CC6633"],[e.temp+'#CC9933;"></div>',"#CC9933"],[e.temp+'#CCCC33;"></div>',"#CCCC33"],[e.temp+'#CCFF33;"></div>',"#CCFF33"],[e.temp+'#FF0033;"></div>',"#FF0033"],[e.temp+'#FF3333;"></div>',"#FF3333"],[e.temp+'#FF6633;"></div>',"#FF6633"],[e.temp+'#FF9933;"></div>',"#FF9933"],[e.temp+'#FFCC33;"></div>',"#FFCC33"],[e.temp+'#FFFF33;"></div>',"#FFFF33"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#0000FF;"></div>',"#0000FF"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#990066;"></div>',"#990066"],[e.temp+'#993366;"></div>',"#993366"],[e.temp+'#996666;"></div>',"#996666"],[e.temp+'#999966;"></div>',"#999966"],[e.temp+'#99CC66;"></div>',"#99CC66"],[e.temp+'#99FF66;"></div>',"#99FF66"],[e.temp+'#CC0066;"></div>',"#CC0066"],[e.temp+'#CC3366;"></div>',"#CC3366"],[e.temp+'#CC6666;"></div>',"#CC6666"],[e.temp+'#CC9966;"></div>',"#CC9966"],[e.temp+'#CCCC66;"></div>',"#CCCC66"],[e.temp+'#CCFF66;"></div>',"#CCFF66"],[e.temp+'#FF0066;"></div>',"#FF0066"],[e.temp+'#FF3366;"></div>',"#FF3366"],[e.temp+'#FF6666;"></div>',"#FF6666"],[e.temp+'#FF9966;"></div>',"#FF9966"],[e.temp+'#FFCC66;"></div>',"#FFCC66"],[e.temp+'#FFFF66;"></div>',"#FFFF66"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#FFFF00;"></div>',"#FFFF00"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#990099;"></div>',"#990099"],[e.temp+'#993399;"></div>',"#993399"],[e.temp+'#996699;"></div>',"#996699"],[e.temp+'#999999;"></div>',"#999999"],[e.temp+'#99CC99;"></div>',"#99CC99"],[e.temp+'#99FF99;"></div>',"#99FF99"],[e.temp+'#CC0099;"></div>',"#CC0099"],[e.temp+'#CC3399;"></div>',"#CC3399"],[e.temp+'#CC6699;"></div>',"#CC6699"],[e.temp+'#CC9999;"></div>',"#CC9999"],[e.temp+'#CCCC99;"></div>',"#CCCC99"],[e.temp+'#CCFF99;"></div>',"#CCFF99"],[e.temp+'#FF0099;"></div>',"#FF0099"],[e.temp+'#FF3399;"></div>',"#FF3399"],[e.temp+'#FF6699;"></div>',"#FF6699"],[e.temp+'#FF9999;"></div>',"#FF9999"],[e.temp+'#FFCC99;"></div>',"#FFCC99"],[e.temp+'#FFFF99;"></div>',"#FFFF99"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#00FFFF;"></div>',"#00FFFF"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#9900CC;"></div>',"#9900CC"],[e.temp+'#9933CC;"></div>',"#9933CC"],[e.temp+'#9966CC;"></div>',"#9966CC"],[e.temp+'#9999CC;"></div>',"#9999CC"],[e.temp+'#99CCCC;"></div>',"#99CCCC"],[e.temp+'#99FFCC;"></div>',"#99FFCC"],[e.temp+'#CC00CC;"></div>',"#CC00CC"],[e.temp+'#CC33CC;"></div>',"#CC33CC"],[e.temp+'#CC66CC;"></div>',"#CC66CC"],[e.temp+'#CC99CC;"></div>',"#CC99CC"],[e.temp+'#CCCCCC;"></div>',"#CCCCCC"],[e.temp+'#CCFFCC;"></div>',"#CCFFCC"],[e.temp+'#FF00CC;"></div>',"#FF00CC"],[e.temp+'#FF33CC;"></div>',"#FF33CC"],[e.temp+'#FF66CC;"></div>',"#FF66CC"],[e.temp+'#FF99CC;"></div>',"#FF99CC"],[e.temp+'#FFCCCC;"></div>',"#FFCCCC"],[e.temp+'#FFFFCC;"></div>',"#FFFFCC"],[!1,!1],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#FF00FF;"></div>',"#FF00FF"],[e.temp+'#000000;"></div>',"#000000"],[e.temp+'#9900FF;"></div>',"#9900FF"],[e.temp+'#9933FF;"></div>',"#9933FF"],[e.temp+'#9966FF;"></div>',"#9966FF"],[e.temp+'#9999FF;"></div>',"#9999FF"],[e.temp+'#99CCFF;"></div>',"#99CCFF"],[e.temp+'#99FFFF;"></div>',"#99FFFF"],[e.temp+'#CC00FF;"></div>',"#CC00FF"],[e.temp+'#CC33FF;"></div>',"#CC33FF"],[e.temp+'#CC66FF;"></div>',"#CC66FF"],[e.temp+'#CC99FF;"></div>',"#CC99FF"],[e.temp+'#CCCCFF;"></div>',"#CCCCFF"],[e.temp+'#CCFFFF;"></div>',"#CCFFFF"],[e.temp+'#FF00FF;"></div>',"#FF00FF"],[e.temp+'#FF33FF;"></div>',"#FF33FF"],[e.temp+'#FF66FF;"></div>',"#FF66FF"],[e.temp+'#FF99FF;"></div>',"#FF99FF"],[e.temp+'#FFCCFF;"></div>',"#FFCCFF"],[e.temp+'#FFFFFF;"></div>',"#FFFFFF"],[!1,!1]]}}();