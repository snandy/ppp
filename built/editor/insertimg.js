/*! SohuBlog @snandy 2013-04-09 15:58:38 */
function FileProgress(e,t){if(this.fileProgressID=e.id,this.opacity=100,this.height=0,this.fileProgressWrapper=document.getElementById(this.fileProgressID),this.fileProgressWrapper)this.fileProgressElement=this.fileProgressWrapper.firstChild,this.fileProgressElement.childNodes[1].innerHTML=e.name;else{this.fileProgressWrapper=document.createElement("div"),this.fileProgressWrapper.className="progressWrapper",this.fileProgressWrapper.id=this.fileProgressID,this.fileProgressElement=document.createElement("div"),this.fileProgressElement.className="progressContainer";var i=document.createElement("a");i.className="progressCancel",i.href="#",i.style.visibility="hidden",i.appendChild(document.createTextNode(" "));var s=document.createElement("div");s.className="progressName",s.appendChild(document.createTextNode(e.name));var o=document.createElement("div");o.className="progressBarInProgress";var n=document.createElement("div");n.className="progressBarStatus",n.innerHTML="&nbsp;",this.fileProgressElement.appendChild(i),this.fileProgressElement.appendChild(s),this.fileProgressElement.appendChild(n),this.fileProgressElement.appendChild(o),this.fileProgressWrapper.appendChild(this.fileProgressElement),document.getElementById(t).appendChild(this.fileProgressWrapper)}this.height=this.fileProgressWrapper.offsetHeight}function $(e){return"string"==typeof e?document.getElementById(e):e}function timeStamp(){var e=new Date;return e.getTime()}function getCookie(e){var t,i=RegExp("(^| )"+e+"=([^;]*)(;|$)","gi");return(t=i.exec(unescape(document.cookie)))?t[2]:null}function setCookie(e,t,i,s,o){var n=e+"="+escape(t);if(i){"never"==i&&(i=5256e4);var a=new Date;a.setTime(a.getTime()+1e3*60*i),n+="; expires="+a.toGMTString()}s&&(n+="; path="+s),o&&(n+="; domain="+o),document.cookie=n}function escapeHTML(e){return e=e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;")}function noMultiline(e){return e=e.replace(/\r/gm,"").replace(/\n/,"")}function getAlign(){return $("f_align").checked?$("f_align").value:$("f_align_left").checked?$("f_align_left").value:$("f_align_center").checked?$("f_align_center").value:$("f_align_right").checked?$("f_align_right").value:""}function filterAlbum(e){var t,i,s=[];for(t=0;e.length>t;t++)i=e[t],0==i.permission&&s.push(i);return s}function setFlashPhoto(e){for(var t=e.data.photoList,i=t.length,s={type:"flash",kind:flashCfg.selectedMode,url:flashCfg.selectedCover,name:noMultiline(escapeHTML(flashCfg.selectedName)),desc:noMultiline(escapeHTML(flashCfg.selectedDesc)),link:"http://pp.sohu.com/u/"+flashCfg.userId+"/f"+flashCfg.selectedSet,count:i,data:[]},o=0;i>o;o++){var n=t[o],a=n.creatorId,r=n.showId,l=n.originUrl+"_c150",d="http://pp.sohu.com/u/"+a+"/p"+r,p=noMultiline(escapeHTML(n.uploadAtDesc));s.data.push({url:l,alt:p,link:d})}s.count>0?callback(s):alert("此专辑中没有任何图片！")}function getSetList(e){flashCfg.setListCtr.innerHTML="正在读取专辑信息......",flashCfg.setPageNo=e;var t="http://pp.sohu.com/folders/"+e+".jsonp",i={param:"pageSize="+defaultSetCount_flash,charset:"utf-8",success:setSetList,failure:failure};Sjax.get(t,i)}function setSetList(e){var t="",i="",s=filterAlbum(e.folderList);if(flashCfg.userId=e.creator.userId,0==s.length)Tabs.hasPP=!1,hideBotton(),t='您还没有公开的相册专辑，何不去<a href="http://pp.sohu.com" target="_blank">创建</a>一个?';else{var o,n=s.length,a=flashCfg.setPageNo-1,r=e.hasNextPage?flashCfg.setPageNo+1:0;for(o=0;n>o;o++){var l=s[o];if(l&&l.showId){var d=l.showId,p=l.name,h=l.description,c=(l.cover||{}).url;l.photoNum,t+='<div id="photoSet'+d+'" onclick="selectSet(\''+d+"', '"+c+"', '"+p+"', '"+h+'\')" class="'+(flashCfg.selectedSet==d?"albumCoverPicSelected":"albumCoverPic")+'"><div class="albumCover"><img src="'+c+'" height="75" width="75" class="coverPic" /></div><div class="albumTitle">'+p+"</div></div>"}}i+='<input type="button" value="上一页" onclick="getSetList('+a+');" '+(a>0?"":"disabled")+' class="'+(a>0?"buttonEnable":"buttonDisable")+'" />',i+='&nbsp;<input type="button" value="下一页" onclick="getSetList('+r+');" '+(r>1?"":"disabled")+' class="'+(r>1?"buttonEnable":"buttonDisable")+'"/>'}flashCfg.setListCtr.innerHTML=t,flashCfg.setPageCtr.innerHTML=i}function selectSet(e,t,i,s){if(""!=flashCfg.selectedSet){var o=$("photoSet"+flashCfg.selectedSet);o&&(o.className="albumCoverPic")}flashCfg.selectedSet=e,flashCfg.selectedCover=t,flashCfg.selectedName=i||"",flashCfg.selectedDesc=s||"",$("photoSet"+e).className="albumCoverPicSelected"}function selectMode(e){$("showMode"+e).checked=!0,flashCfg.selectedMode=e}function getAlbums(e){function t(e){var t="",i="",s=filterAlbum(e.folderList);if(0==s.length)Tabs.hasPP=!1,hideBotton(),t='您还没有公开的相册专辑，何不去<a href="http://pp.sohu.com" target="_blank">创建</a>一个?';else{var o,n=s.length,a=ppCfg.setPageNo-1,r=e.hasNextPage?ppCfg.setPageNo+1:0;for(o=0;n>o;o++){var l=s[o];if(l&&l.showId){var d=l.showId,p=l.name,h=(l.cover||{}).url,c=l.photoNum;t+='<div class="albumCoverPic" id="'+d+'" onclick="getPhotos(1,\''+d+"',"+c+')"><div class="albumCover"><img src="'+h+'" height="75" width="75" class="coverPic" /></div><div class="albumTitle">'+p+"</div></div>"}}i+='<input class="'+(a>0?"buttonEnable":"buttonDisable")+'" type="button" value="上一页" onclick="getAlbums('+a+');" '+(a>0?"":"disabled")+" />",i+='&nbsp;<input class="'+(r>1?"buttonEnable":"buttonDisable")+'" type="button" value="下一页" onclick="getAlbums('+r+');" '+(r>1?"":"disabled")+" />"}ppCfg.setListCtr.innerHTML=t,ppCfg.setPageCtr.innerHTML=i}var i="http://pp.sohu.com/folders/"+e+".jsonp";ppCfg.setListCtr.innerHTML="正在读取专辑信息......",ppCfg.setPageNo=e;var s={url:i,charset:"utf-8",param:"pageSize=10",success:t,failure:failure};Sjax.get(s)}function getPhotos(e,t,i){if(ppCfg.photoListCtr.innerHTML="正在读取图片信息......",ppCfg.photoPageCtr.innerHTML=" ",ppCfg.photoAllCtr.innerHTML=" ",arguments.length>2&&(ppCfg.pageCount=Math.ceil(i/defaultPhotoCount)),t){ppCfg.photoPageCtr.innerHTML="",ppCfg.photoAllCtr.innerHTML="";var s=$(ppCfg.setId);ppCfg.setId&&s&&(s.className="albumCoverPic"),ppCfg.setId=t,$(t).className="albumCoverPicSelected"}else t=ppCfg.setId;ppCfg.photoPageNo=e;var o="http://pp.sohu.com/folders/"+t+"/photos/"+e+".jsonp",n={charset:"utf-8",param:"pageSize="+defaultPhotoCount,success:setPhotoList,failure:failure};Sjax.get(o,n)}function setPhotoList(e){if(e.status){var t=e.data.photoList,i=t.length,s=ppCfg.photoPageNo>1?ppCfg.photoPageNo-1:0,o=e.data.hasNextPage?ppCfg.photoPageNo+1:0,n="";if(i>0){showTip();for(var a=0;i>a;a++){var r=t[a],l=r.creatorId,d=r.showId,p=r.url,h=r.originUrl,c=r.uploadAtDesc.replace(/\n/g,""),g="http://pp.sohu.com/u/"+l+"/p"+d,u=c.length>5?c.substr(0,5)+"...":c;u=noMultiline(escapeHTML(u)),c=noMultiline(escapeHTML(c)),n+='<div id="divOption'+d+'" class="'+(ppCfg.photos[d]?"photolistSelected":"photolist")+'" onclick="selectOrCancel(\''+d+"','"+p+"','"+h+"','"+c+"','"+g+'\')" ><div class="photoCover"><img src="'+p+'" /></div><div class="photoTitle">'+u+"</div></div>"}}else n="此专辑中没有图片！",showTip("noPhoto");var m="";m+='<input class="'+(s>0?"buttonEnable":"buttonDisable")+'" type="button" value="首页" onclick="getPhotos(1)" '+(s>0?"":"disabled")+" />",m+='&nbsp;<input class="'+(s>0?"buttonEnable":"buttonDisable")+'" type="button" value="上一页" onclick="getPhotos('+s+')" '+(s>0?"":"disabled")+"  />",m+='&nbsp;<input class="'+(o>1?"buttonEnable":"buttonDisable")+'" type="button" onclick="getPhotos('+o+');" value="下一页" '+(o>1?"":"disabled")+"  />",m+='&nbsp;<input class="'+(o>1?"buttonEnable":"buttonDisable")+'" type="button" onclick="getPhotos('+ppCfg.pageCount+');" value="末页" '+(o>1?"":"disabled")+"  />";var f='<input type="button" value="全选" class="'+(i>0?"buttonEnable":"buttonDisable")+'" onclick="selectAll()" '+(i>0?"":"disabled")+"  />";ppCfg.photoListCtr.innerHTML=n,ppCfg.photoPageCtr.innerHTML=m,ppCfg.photoAllCtr.innerHTML=f}}function selectAll(){for(var e=ppCfg.photoListCtr.childNodes,t=e.length,i=0;t>i;i++)"photolist"===e[i].className&&e[i].click()}function cancelAll(){var e=ppCfg.photos;for(var t in e)e[t].url&&selectOrCancel(t)}function selectOrCancel(e,t,i,s,o){var n=ppCfg.photos,a=ppCfg.photoArr;if("object"==typeof n[e]){ppCfg.selectedCtr.removeChild($("divSelect"+e)),delete n[e];var r=$("divOption"+e);r&&(r.className="photolist")}else{var l=document.createElement("div");l.id="divSelect"+e,l.className="photolist",l.innerHTML='<div class="photoCover" onclick="selectOrCancel(\''+e+'\')"><img src="'+t+'" title="'+s+'" /></div>',ppCfg.selectedCtr.appendChild(l),n[e]={url:i,alt:s,link:o},a.push(n[e]),$("divOption"+e).className="photolistSelected",l.scrollIntoView()}var d=ppCfg.selectedCtr.children.length;$("showSelectedCount").innerHTML=d,1>d?(ppCfg.cancelAllCtr.disabled=!0,ppCfg.cancelAllCtr.className="buttonDisable"):(ppCfg.cancelAllCtr.disabled=!1,ppCfg.cancelAllCtr.className="buttonEnable")}function failure(){alert("读取数据失败，请重新操作！")}function showTip(e){var t=[{intro:"提示：通过下面的操作，您可以把电脑中的某张图片添加到日志中。"},{intro:'提示：您只需要找到<font color="red">搜狐网站</font>内图片的网络地址，即可将一张或多张网络图片添加到日志中。'},{intro:"提示：通过下面的操作，您可以把你的图片公园相册中的图片添加到日志中。",noPhoto:'<font color="red">提示：此专辑中没有任何图片，请先到您的图片公园相册中添加图片！</font>'},{intro:"提示：通过下面的操作，某一专辑将以指定的显示方式添加到日志中。"},{intro:""}];e||(e="intro");var i=Tabs.selectedIndex;Tabs.tip.innerHTML=t[i][e]}function swapBoard(e){Tabs.selectedIndex>-1&&(Tabs[Tabs.selectedIndex].label.className="contentLabel",Tabs[Tabs.selectedIndex].tab.style.display="none"),Tabs.selectedIndex=e,Tabs[e].label.className="contentLabelActive",Tabs[e].tab.style.display="block",showTip(),Tabs[e].initGood||(Tabs[e].init(),Tabs[e].initGood=!0),2!=e&&3!=e||Tabs.hasPP?(popBottom.style.display="",popButton.style.display=""):hideBotton(),infoBox.style.display=0==e||1==e?"":"none"}function hideBotton(){popBottom.style.display="none",popButton.style.display="none"}function onOK(){Tabs[Tabs.selectedIndex].onOk()}function onCancel(){cancel()}function callback(e){window.dialogArguments.controler.sohu.selectCall.call(null,e),closeNow()}function closeNow(){$("saveSetting").checked?(setCookie("editor_insertImg_saveSetting","true","never"),setCookie("editor_insertImg_imgLayout",getAlign(),"never")):(setCookie("editor_insertImg_saveSetting","","never"),setCookie("editor_insertImg_imgLayout","","never")),setCookie("editor_image_tab",""+Tabs.selectedIndex,"never"),window.onunload=null,window.close()}function cancel(){window.dialogArguments.controler.sohu.cancelCall.call(),closeNow()}var SWFUpload;void 0==SWFUpload&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(e){if("string"!=typeof e||e.match(/^https?:\/\//i)||e.match(/^\//))return e;window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var t=window.location.pathname.lastIndexOf("/");return path=0>=t?"/":window.location.pathname.substr(0,t)+"/",path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=void 0==this.settings[e]?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","file"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(0>this.settings.flash_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==e)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(""+i)+"="+encodeURIComponent(""+e[i]));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;if(e=this.getMovieElement(),e&&"unknown"==typeof e.CallFunction){for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(i){}try{e.parentNode.removeChild(e)}catch(s){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(o){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",""+this.settings.use_query_string,"\n","	","requeue_on_error:         ",""+this.settings.requeue_on_error,"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",""+this.settings.post_params,"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",""+this.settings.debug,"\n","	","prevent_swf_caching:      ",""+this.settings.prevent_swf_caching,"\n","	","button_placeholder_id:    ",""+this.settings.button_placeholder_id,"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",""+this.settings.button_image_url,"\n","	","button_width:             ",""+this.settings.button_width,"\n","	","button_height:            ",""+this.settings.button_height,"\n","	","button_text:              ",""+this.settings.button_text,"\n","	","button_text_style:        ",""+this.settings.button_text_style,"\n","	","button_text_top_padding:  ",""+this.settings.button_text_top_padding,"\n","	","button_text_left_padding: ",""+this.settings.button_text_left_padding,"\n","	","button_action:            ",""+this.settings.button_action,"\n","	","button_disabled:          ",""+this.settings.button_disabled,"\n","	","custom_settings:          ",""+this.settings.custom_settings,"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",""+("function"==typeof this.settings.swfupload_loaded_handler),"\n","	","file_dialog_start_handler assigned: ",""+("function"==typeof this.settings.file_dialog_start_handler),"\n","	","file_queued_handler assigned:       ",""+("function"==typeof this.settings.file_queued_handler),"\n","	","file_queue_error_handler assigned:  ",""+("function"==typeof this.settings.file_queue_error_handler),"\n","	","upload_start_handler assigned:      ",""+("function"==typeof this.settings.upload_start_handler),"\n","	","upload_progress_handler assigned:   ",""+("function"==typeof this.settings.upload_progress_handler),"\n","	","upload_error_handler assigned:      ",""+("function"==typeof this.settings.upload_error_handler),"\n","	","upload_success_handler assigned:    ",""+("function"==typeof this.settings.upload_success_handler),"\n","	","upload_complete_handler assigned:   ",""+("function"==typeof this.settings.upload_complete_handler),"\n","	","debug_handler assigned:             ",""+("function"==typeof this.settings.debug_handler),"\n"].join(""))},SWFUpload.prototype.addSetting=function(e,t,i){return this.settings[e]=void 0==t?i:t},SWFUpload.prototype.getSetting=function(e){return void 0!=this.settings[e]?this.settings[e]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){t!==!1&&(t=!0),this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return"number"==typeof e?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,i){return this.callFlash("AddFileParam",[e,t,i])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=""+e,this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){"string"==typeof e&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){void 0==e&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var i=this.getMovieElement();void 0!=i&&(i.style.width=e+"px",i.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){void 0==t?t=[]:t instanceof Array||(t=[t]);var i=this;if("function"==typeof this.settings[e])this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){i.executeNextEvent()},0);else if(null!==this.settings[e])throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;"function"==typeof e&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t,i=/[$]([0-9a-f]{4})/i,s={};if(void 0!=e){for(var o in e.post)if(e.post.hasOwnProperty(o)){t=o;for(var n;null!==(n=i.exec(t));)t=t.replace(n[0],String.fromCharCode(parseInt("0x"+n[1],16)));s[t]=e.post[o]}e.post=s}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();return e?(this.cleanUp(e),this.queueEvent("swfupload_loaded_handler"),void 0):(this.debug("Flash called back ready but the flash movie can't be found."),void 0)},SWFUpload.prototype.cleanUp=function(e){try{if(this.movieElement&&"unknown"==typeof e.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(i){}}}catch(s){}window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(i){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,i])},SWFUpload.prototype.fileDialogComplete=function(e,t,i){this.queueEvent("file_dialog_complete_handler",[e,t,i])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if("function"==typeof this.settings.upload_start_handler)e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===t&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,i])},SWFUpload.prototype.uploadError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,i])},SWFUpload.prototype.uploadSuccess=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,i])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,i=[];if("object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.message){for(var s in e)e.hasOwnProperty(s)&&i.push(s+": "+e[s]);t=i.join("\n")||"",i=t.split("\n"),t="EXCEPTION: "+i.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,i;try{t=document.getElementById("SWFUpload_Console"),t||(i=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(i),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",i.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(s){alert("Exception: "+s.name+" Message: "+s.message)}},FileProgress.prototype.setProgress=function(e){this.fileProgressElement.className="progressContainer green",this.fileProgressElement.childNodes[3].className="progressBarInProgress",this.fileProgressElement.childNodes[3].style.width=e+"%"},FileProgress.prototype.setComplete=function(){this.appear(),this.fileProgressElement.className="progressContainer blue",this.fileProgressElement.childNodes[2].className="progressBarStatus yes",this.fileProgressElement.childNodes[3].className="progressBarComplete",this.fileProgressElement.childNodes[3].style.width=""},FileProgress.prototype.setError=function(){this.appear(),this.fileProgressElement.className="progressContainer red",this.fileProgressElement.childNodes[2].className="progressBarStatus no",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width=""},FileProgress.prototype.setCancelled=function(){this.appear(),this.fileProgressElement.className="progressContainer",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width="";var e=this;setTimeout(function(){e.disappear()},2e3)},FileProgress.prototype.setStatus=function(e){this.fileProgressElement.childNodes[2].innerHTML=e},FileProgress.prototype.toggleCancel=function(e,t){if(this.fileProgressElement.childNodes[0].style.visibility=e?"visible":"hidden",t){var i=this.fileProgressID;this.fileProgressElement.childNodes[0].onclick=function(e){var e=e||window.event;return e.preventDefault?e.preventDefault():e.returnValue=!1,t.cancelUpload?t.cancelUpload(i):t.xhr.abort&&t.xhr.abort(),!1}}},FileProgress.prototype.appear=function(){if(this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100}catch(e){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=100)"
}else this.fileProgressWrapper.style.opacity=1;this.fileProgressWrapper.style.height="",this.height=this.fileProgressWrapper.offsetHeight,this.opacity=100,this.fileProgressWrapper.style.display=""},FileProgress.prototype.disappear=function(){var e=15,t=4,i=30;if(this.opacity>0)if(this.opacity-=e,0>this.opacity&&(this.opacity=0),this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity}catch(s){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}else this.fileProgressWrapper.style.opacity=this.opacity/100;if(this.height>0&&(this.height-=t,0>this.height&&(this.height=0),this.fileProgressWrapper.style.height=this.height+"px"),this.height>0||this.opacity>0){var o=this;setTimeout(function(){o.disappear()},i)}else this.fileProgressWrapper.style.display="none"},Sjax=function(e){function t(e){var t,i,s=[];for(t in e)if(i=e[t],i.constructor===Array)for(var o=0,n=i.length;n>o;o++)s.push(t+"="+encodeURIComponent(i[o]));else s.push(t+"="+encodeURIComponent(i));return s.join("&")}function i(){var e="",t=[],i=0,s="0123456789ABCDEF";for(i=0;32>i;i++)t[i]=s.substr(Math.floor(16*Math.random()),1);return t[12]="4",t[16]=s.substr(8|3&t[16],1),e="jsonp_"+t.join("")}function s(){}var o=!-[1],n=e.opera,a=e.document,r=a.head||a.getElementsByTagName("head")[0],l=3e3,d=!1,p={debug:!1,log:function(t){e.console&&this.debug&&e.console.log(t)},get:function(p,h){function c(t){t?(d=!0,u.log("Request success!")):(v.call(y),u.log("Request failed!")),E.onload=E.onerror=E.onreadystatechange=null,r&&E.parentNode&&(r.removeChild(E),E=null,e[_]=void 0,u.log("Garbage collecting!"))}function g(){setTimeout(function(){d||c()},l)}"object"==typeof p&&(h=p,p=h.url);var u=this,p=p+"?",m=h.param,f=h.charset,b=h.success||s,v=h.failure||s,y=h.scope||e,w=h.timestamp,C=h.jsonpName||"callback",_=h.jsonpCallback||i();m&&"object"==typeof m&&(m=t(m));var E=a.createElement("script");o?E.onreadystatechange=function(){var e=this.readyState;d||"loaded"!=e&&"complete"!=e||c(!0)}:(E.onload=function(){c(!0)},E.onerror=function(){c()},n&&g()),p+=C+"="+_,f&&(E.charset=f),m&&(p+="&"+m),w&&(p+="&ts=",p+=(new Date).getTime()),e[_]=function(e){b.call(y,e)},this.log("Getting JSONP data"),E.src=p,r.insertBefore(E,r.firstChild)}};return p}(this);var isIE=document.all?!0:!1;isIE&&(window.opener=window.dialogArguments.win),window.JSON||(window.JSON=opener.JSON);var defaultSetCount=10,defaultPhotoCount=15,defaultSetCount_flash=9,displayTab=0;~function(){function e(){}function t(){if(window.netCfg=[$("netUrl1"),$("netUrl2"),$("netUrl3"),$("netUrl4"),$("netUrl5")],window.netCfgCtr=[$("f_url1"),$("f_url2"),$("f_url3"),$("f_url4"),$("f_url5")],window.dialogArguments.obj)for(var e=netCfg.length-1;e>0;e--)netCfg[e].style.display="none"}function i(){window.ppCfg={setListCtr:$("setListCtr"),setPageCtr:$("setPageCtr"),photoListCtr:$("photoListCtr"),photoPageCtr:$("photoPageCtr"),selectedCtr:$("selectedCtr"),photoAllCtr:$("photoAllCtr"),cancelAllCtr:$("cancelAllCtr"),setPageNo:1,photoPageNo:1,pageCount:1,photos:{},photoArr:[]},getAlbums(1)}function s(){window.flashCfg={setListCtr:$("flashSetList"),setPageCtr:$("flashSetPage"),showCount:$("showPhotoCount"),setPageNo:1,selectedSet:"",selectedMode:1},getSetList(1)}function o(){return f.data.length?(f.align=getAlign(),setTimeout(function(){callback(f)},100),void 0):(alert("请选择照片！"),void 0)}function n(){var e,t=[];for(e=0;netCfgCtr.length>e;e++){var i=netCfgCtr[e].value;i&&"http://"!=i&&t.push({url:i})}if(t.length>0){var s={type:"imgs",align:getAlign(),data:t};callback(s)}else alert("请输入网络图片的地址！")}function a(){var e=ppCfg.photoArr;if(e.length>0){var t={type:"imgs",align:"center",data:e,showMemo:$("isAddMemo").checked};callback(t)}else alert("请选择照片！")}function r(){if(""==flashCfg.selectedSet)return alert("请选择专辑！"),void 0;var e="http://pp.sohu.com/folders/"+flashCfg.selectedSet+"/photos.jsonp",t={charset:"utf-8",success:setFlashPhoto,failure:failure};Sjax.get(e,t)}function l(e){if(window.popBottom=$("popBottom"),window.popButton=$("artItem-button"),window.infoBox=$("artItem-infoBox"),getCookie("editor_insertImg_saveSetting"))switch($("saveSetting").checked="checked",getCookie("editor_insertImg_imgLayout")){case"none":$("f_align").checked="checked";break;case"left":$("f_align_left").checked="checked";break;case"center":$("f_align_center").checked="checked";break;case"right":$("f_align_right").checked="checked";break;default:$("f_align_center").checked="checked"}else $("saveSetting").checked=!1,$("f_align_center").checked="checked";if(e){displayTab=2,e.src&&($("f_url1").value=e.src);var t=isIE?e.style.styleFloat:e.style.cssFloat;t?"left"==t.toLowerCase()?$("f_align_left").checked="checked":"right"==t.toLowerCase()&&($("f_align_right").checked="checked"):e.style.textAlign?"center"==e.style.textAlign.toLowerCase()&&($("f_align_center").checked="checked"):$("f_align").checked="checked"}else getCookie("editor_image_tab")&&(displayTab=parseInt(getCookie("editor_image_tab")));-1==displayTab&&(displayTab=1),swapBoard(displayTab)}function d(e,t){try{var i=new FileProgress(e,m),s=this;t&&(s=t),i.toggleCancel(!0,s)}catch(o){}}function p(e,t,i){try{var s=Math.ceil(100*(t/i)),o=new FileProgress(e,m);o.setProgress(s),o.setStatus("上传中...")}catch(n){}}function h(e,t){try{var i=new FileProgress(e,m);i.setComplete(),i.setStatus("上传成功！"),i.toggleCancel(!1);var s="object"==typeof t?t:JSON.parse(t);s.status&&f.data.push({url:s.data.origin_url,width:s.data.width})}catch(o){}}function c(){function e(){try{this.startUpload()}catch(e){}}function t(e,t,i){try{if(t===SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED)return alert("最多只能选择10张图片."),void 0;var s=new FileProgress(e,m);switch(s.setError(),s.toggleCancel(!1),t){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:s.setStatus("文件太大，不能超过10M.");break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:s.setStatus("不能上传0字节的文件.");break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:s.setStatus("文件格式不正确，只能上传图片.");break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:alert("You have selected too many files.  "+(i>1?"You may only add "+i+" more files":"You cannot add any more files."));break;default:null!==e&&s.setStatus("Unhandled Error")}}catch(o){}}function i(){try{this.startUpload()}catch(e){}}var s=document.createElement("span");s.id="spanButton";var o=Tabs[0].tab;o.insertBefore(s,o.children[0]);var n={flash_url:"http://js3.pp.sohu.com.cn/ppp/swf/swfupload.swf",upload_url:"http://pp.sohu.com/upload",post_params:{},file_size_limit:"10 MB",file_types:"*.jpg;*.jpeg;*.gif;*.png",file_upload_limit:10,file_queue_limit:0,custom_settings:{progressTarget:"progress",cancelButtonId:"cancelAllBtn"},debug:!1,button_image_url:"http://js2.pp.sohu.com.cn/ppp/blog/styles/images/editor/upload.png",button_width:"95",button_height:"30",button_placeholder_id:"spanButton",file_queued_handler:d,file_queue_error_handler:t,file_dialog_complete_handler:e,upload_progress_handler:p,upload_success_handler:h,upload_complete_handler:i};u=new SWFUpload(n);var a=$("cancelAllBtn");a.onclick=function(){var e;a.disabled=!0,u.stopUpload();do e=u.getStats(),u.cancelUpload();while(0!==e.files_queued)}}function g(){var e=document.createElement("div");e.className="btnWrap";var t='<div id="coverBtn"></div><input id="uploadBtn" type="file" multiple accept="image/*"/>';e.innerHTML=t;var i=Tabs[0].tab;i.insertBefore(e,i.children[0]);var s=$("uploadBtn"),o=$("coverBtn");s.onmouseover=function(){o.className="coverBtn-hover"},s.onmouseout=function(){o.className=""};var n=$("uploadBtn"),a={url:"http://pp.sohu.com/upload",refile:/(?:png|jpg|jpeg|gif)/,credential:!0,params:{},fileQueued:d,success:h,progress:p,checkMaximun:function(){alert("最多只能选择10张图片.")},checkMaximize:function(e){var t=new FileProgress(e,m);t.setError(),t.toggleCancel(!1),t.setStatus("文件太大，不能超过10M.")},failure:function(e){var t=new FileProgress(e,m);t.setError(),t.toggleCancel(!1),t.setStatus("上传失败，请稍后再试.")}},r=XHRUpload(n,a),l=$("cancelAllBtn");l.onclick=function(){l.disabled=!0,r.cancel()}}var u,m="progress",f={type:"imgs",align:"",data:[]};window.onload=function(){isIE&&(window.opener=window.dialogArguments.win);var d=window.dialogArguments.obj;window.Tabs=[{label:$("imgLabel_0"),tab:$("imgBox0"),init:e,onOk:o},{label:$("imgLabel_1"),tab:$("imgBox1"),init:t,onOk:n},{label:$("imgLabel_2"),tab:$("imgBox2"),init:i,onOk:a},{label:$("imgLabel_3"),tab:$("imgBox3"),init:s,onOk:r}],Tabs.hasPP=!0,Tabs.selectedIndex=-1,Tabs.tip=$("tabTip"),l(d),isIE?c():g()}}(),window.onunload=cancel;